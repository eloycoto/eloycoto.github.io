<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>My thoughts about CGRates</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://acalustra.com/" rel="canonical" />

  <!-- Feed -->
        <link href="https://acalustra.com/rss.xml" type="application/atom+xml" rel="alternate" title="A Calustra Full Atom Feed" />

  <link href="https://acalustra.com/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://acalustra.com/theme/css/code_blocks/monokai.css" rel="stylesheet">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="https://acalustra.com/my-thoughts-about-cgrates.html" rel="canonical" />
  <meta name="keywords" content="kamailio, kamevapi, evapi, cgrates, billing" >

    <meta name="description" content="At Foehn, we started to use CGRateS earlier this year, nowadays (May-2015) the platform has rated tens of millions of calls. I want to...">

    <meta name="author" content="eloycoto">

    <meta name="tags" content="kamailio">
    <meta name="tags" content="billing">
    <meta name="tags" content="cgrates">




<!-- Open Graph -->
<meta property="og:site_name" content="A Calustra"/>
<meta property="og:title" content="My thoughts about CGRates"/>
<meta property="og:description" content="At Foehn, we started to use CGRateS earlier this year, nowadays (May-2015) the platform has rated tens of millions of calls. I want to..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://acalustra.com/my-thoughts-about-cgrates.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2015-05-27 21:00:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://acalustra.com/author/eloycoto.html">
<meta property="article:section" content="blog"/>
<meta property="article:tag" content="kamailio"/>
<meta property="article:tag" content="billing"/>
<meta property="article:tag" content="cgrates"/>
<meta property="og:image" content="https://acalustra.com/img/oia.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@eloycoto">
    <meta name="twitter:title" content="My thoughts about CGRates">
    <meta name="twitter:url" content="https://acalustra.com/my-thoughts-about-cgrates.html">

        <meta name="twitter:image:src" content="https://acalustra.com/img/oia.jpg">

      <meta name="twitter:description" content="At Foehn, we started to use CGRateS earlier this year, nowadays (May-2015) the platform has rated tens of millions of calls. I want to...">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "My thoughts about CGRates",
  "headline": "My thoughts about CGRates",
  "datePublished": "2015-05-27 21:00:00+02:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "eloycoto",
    "url": "https://acalustra.com/author/eloycoto.html"
  },
  "image": "https://acalustra.com/img/oia.jpg",
  "url": "https://acalustra.com/my-thoughts-about-cgrates.html",
  "description": "At Foehn, we started to use CGRateS earlier this year, nowadays (May-2015) the platform has rated tens of millions of calls. I want to..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

              <li role="presentation"><a href="https://acalustra.com/pages/about.html">About</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://acalustra.com/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">My thoughts about CGRates</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="https://acalustra.com/author/eloycoto.html">Eloy Coto</a>
            | <time datetime="Wednesday 27-05-2015">Wednesday 27-05-2015</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('https://acalustra.com/img/oia.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p>At <a class="reference external" href="http://www.foehn.co.uk">Foehn</a>, we started to use
<a class="reference external" href="http://cgrates.org/">CGRateS</a> earlier this year, nowadays (May-2015) the
platform has rated tens of millions of calls. I want to share my experience.</p>
<p>I discovered CGRateS in 2014 at the <a class="reference external" href="http://conference.kamailio.com/k03/">Kamailio World
Conference</a>. After a few years using
different solutions we found that CGRateS suits all our needs, so I decided  to
give it a try.</p>
<p>The project is written in <a class="reference external" href="https://golang.org/">Golang</a>, so this was the
first challenge, it's not a bad idea to learn a bit of Golang before installing
CGRateS.</p>
<p>One of our uses is based on <a class="reference external" href="https://cgrates.readthedocs.org/en/latest/cdrclient.html">cdr client</a>, we have some
legacy installations where we wanted to use some CGRateS features. Every few
minutes we send csv files to the platform. This method is fast, we are billing
our daily traffic without problem. On the other hand I tested 10K calls per minute
and it is still fast.</p>
<p>I can recommend this option if you are starting with CGRateS.</p>
<p>In the last weeks, we started working with <a class="reference external" href="https://github.com/cgrates/kamevapi">kamailio
evapi</a> integration. This feature provides
a realtime rating engine in the proxy. This integration is still in test-mode
but I can recommend it well:</p>
<ul class="simple">
<li>Performance in CGRateS is not a problem. We tested with 3K calls per minute in
a t2-small instance. Very good result.</li>
<li>Kamailio configuration with CGRateS <a class="reference external" href="https://github.com/cgrates/cgrates/blob/a2e36b6ae6273a61db2d5e3b2194cd281c105e0e/data/tutorials/kamevapi/kamailio/etc/kamailio/kamailio-cgrates.cfg">is easy</a>.</li>
<li>For every call, CGRateS has a cache map of the current calls, so the timeout
is set based on the virtual balance.</li>
<li>With dialog module you can set the timeouts for these calls.</li>
</ul>
<p>On the other hand, I love the following points:</p>
<div class="section" id="cdrstats">
<h2>CDRStats</h2>
<p><a class="reference external" href="https://github.com/cgrates/cgrates/blob/a2e36b6ae6273a61db2d5e3b2194cd281c105e0e/data/tariffplans/cdrstats/CdrStats.csv">This feature</a>
provides some stats per account, tenant, time frame, call queues, etc.. This is
pretty useful, for example with time frames of 24 hours, you can easily get the
Total Cost of the calls in the last 24 hours per customer. Or the ACC (Average
Call Cost) in the last 1000 calls.</p>
<p>It provides the best interface that I ever seen for fraud, for example:</p>
<ul class="simple">
<li>When TCC in the last 24 hours is more than £XXX</li>
<li>When the ACC in the last 200 calls queue are more than £2</li>
<li>When the ASR(Average success ratio) is less than 20%</li>
</ul>
</div>
<div class="section" id="derivate-charging">
<h2>Derivate Charging:</h2>
<p>In our case we have some rates for customers, this was pretty easy, but we
needed that every call bills three times. One for the cost of the customer, one
for the cost of the reseller, and a one cost with our prices. With 2 lines into
DerivedChargers.csv we can get this easily.</p>
<p>This is pretty useful, nowadays we have a graph with our benefits, costs, and
customer costs in one single panel.</p>
</div>
<div class="section" id="bundles">
<h2>Bundles:</h2>
<p>Bundles are a swiss knife for telecoms. The good thing about CGRates is that
you can have more than one balance per account, moreover you can have two
different balances, <em>monetary</em> or <em>minutes</em>, so you can set a destination
included in a balance in minutes, when this balance finished account will be
switching to monetary balance.</p>
<p>With Acions Triggers you can reset the bundle every first of the month, which
means there are no problems with the recurrent balaces.</p>
<p>With Action Triggers you can call a action when the balance is less than XX
minutes too. It's easy to make business logic based on minutes balances.</p>
</div>
<div class="section" id="api">
<h2>API</h2>
<p>One of the best improvements in the new version(0.9.7) is the fact that the API
is HTTP json-rpc, so it's easy to call to the API from a simple curl request or
any other software like postman.</p>
</div>
<div class="section" id="fixedfees">
<h2>FixedFees</h2>
<p>Another improvement in CGRateS 0.9.7 is the <em>cdrlog</em> action. With this action
you can log into the rated_cdrs table some actions. In this case I'm using it
for the recurrent fees that the customer paid for. Rent of DDIs, number of
extensions or support fees for example.</p>
<p>Finally I need to say, starting with CGRateS it's not easy, but when you have a
little bit of knowledge you can get CGRateS do all the hard billing work for
you.</p>
</div>

            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=My thoughts about CGRates&amp;url=https://acalustra.com/my-thoughts-about-cgrates.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://acalustra.com/my-thoughts-about-cgrates.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=https://acalustra.com/my-thoughts-about-cgrates.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://acalustra.com/tag/kamailio.html">kamailio</a><a href="https://acalustra.com/tag/billing.html">billing</a><a href="https://acalustra.com/tag/cgrates.html">cgrates</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="https://acalustra.com/img/profile.jpg" alt="Eloy Coto" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="https://acalustra.com/author/eloycoto.html">Eloy Coto</a></h4>
                            <p class="post-author-about">Senior software engineer with experience in Golang, C and Python and CI/CD</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> Galicia</span>
                            <span class="post-author-website"><a href="http://acalustra.com"><i class="ic ic-link"></i> Website</a></span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-github"><a target="_blank" href="https://github.com/eloycoto"><i class="ic ic-link"></i> GitHub</a></span>
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/eloycoto"><i class="ic ic-link"></i> LinkedIn</a></span>
                            <span class="post-author-twitter"><a target="_blank" href="https://twitter.com/eloycoto"><i class="ic ic-twitter"></i> Twitter</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>

                <script type="text/javascript">
                    var disqus = 'acalustra';
                    var disqus_shortname = 'acalustra';
                    var disqus_identifier = '/my-thoughts-about-cgrates.html';
                    var disqus_url = 'https://acalustra.com/my-thoughts-about-cgrates.html';
                </script>
                <noscript>Please enable JavaScript to view the comments.</noscript>
                <section class="post-comments">
                        <a id="show-disqus" class="post-comments-activate" data-disqus-identifier="/my-thoughts-about-cgrates.html" >Show Comments</a>
                    <div id="disqus_thread"></div>
                </section>

                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="https://acalustra.com/theme/js/script.js"></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-36310774-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-36310774-1', { 'anonymize_ip': true });
    </script>
<script type="text/javascript">
    var disqus_shortname = 'acalustra';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>