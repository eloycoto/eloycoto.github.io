<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>A Calustra - eloycoto</title><link href="https://acalustra.com/" rel="alternate"></link><link href="https://acalustra.com/feeds/eloycoto.atom.xml" rel="self"></link><id>https://acalustra.com/</id><updated>2023-03-23T21:00:00+01:00</updated><entry><title>On promotion: Lessons learned along the way</title><link href="https://acalustra.com/on-promotion-lessons-learned-along-the-way.html" rel="alternate"></link><published>2023-03-23T21:00:00+01:00</published><updated>2023-03-23T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2023-03-23:/on-promotion-lessons-learned-along-the-way.html</id><summary type="html">&lt;p&gt;My manager confirmed my promotion to Principal software engineer a few days
ago. Getting in there made me happy; in fact, I enjoyed more the process. I
would share some thoughts with you.&lt;/p&gt;
&lt;p&gt;The process is a bit long. To get in there, my manager and I need to write …&lt;/p&gt;</summary><content type="html">&lt;p&gt;My manager confirmed my promotion to Principal software engineer a few days
ago. Getting in there made me happy; in fact, I enjoyed more the process. I
would share some thoughts with you.&lt;/p&gt;
&lt;p&gt;The process is a bit long. To get in there, my manager and I need to write a
document on why you should be promoted, with links and references. And for me,
this is one of the best things where I saw how many things I did correctly from
the beginning of my career; let me share a few:&lt;/p&gt;
&lt;div class="section" id="brag-document"&gt;
&lt;h2&gt;Brag Document&lt;/h2&gt;
&lt;p&gt;I remember reading about companies doing Performance Reviews; at that time, I
only worked for small companies where P&amp;amp;D was not enforced or planned. Getting
a way to know where I was doing good, taking care of the yearly goals, and
setting some direction was game changer for me.&lt;/p&gt;
&lt;p&gt;When I wrote the promotion document, I only reviewed the brag documents I had
and got links to things I did correctly, empowering the company, team or
bussiness. It was an easy process because of my brag documents; when I spoke
with colleagues who did not have the document, it was difficult for them if
their manager did not help.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="journal-journal-journal"&gt;
&lt;h2&gt;Journal, Journal, Journal&lt;/h2&gt;
&lt;p&gt;I still remember my early days one of my mentors (&lt;a class="reference external" href="https://twitter.com/AntonRoman"&gt;Antón Román&lt;/a&gt;) told me to open a Google doc where I should
save all my tips regarding Linux, small things, and notes. Also, he taught me
how to use Delicious(A bookmark service) and keep all this information sorted
for future use.&lt;/p&gt;
&lt;p&gt;Nowadays, I still journal all the conversations, meeting notes, complains to my
manager, so at the end of the year, I can see that I complained to my manager N
times, and how many proposals I made. This has been a powerful thing for me
because It helps me to identify some patterns over time.&lt;/p&gt;
&lt;p&gt;Nowadays, I'm using org-mode for the notes, which may be hard to use initially,
but the tags and the to-do list are handy for my use cases.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="growing-the-mindset"&gt;
&lt;h2&gt;Growing the mindset&lt;/h2&gt;
&lt;p&gt;I still remember my first week of work, I did not attend any University, and
Antón told me a phrase that It is part of my since then:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
An engineer is someone who thinks up.
&lt;/pre&gt;
&lt;p&gt;Since that day, I have taken a self-learnt process. Every day, I normally spend
around 15 minutes learning something new, which has been one of the best things
I have done. When I'm with someone that it's junior, I told them something:
&lt;em&gt;that it's not taught in the school&lt;/em&gt; is not valid as an engineer, and you'll
need to find the way alone or with help.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sharing-is-caring"&gt;
&lt;h2&gt;Sharing is caring&lt;/h2&gt;
&lt;p&gt;There is a book in Spain that it's pretty good (&lt;a class="reference external" href="https://www.goodreads.com/book/show/55683157-aprendiendo-a-aprender"&gt;Aprendiendo a aprender&lt;/a&gt;) which
teaches you how to learn to learn. Sharing things with a junior engineer,
coworker, or manager is the best way to unlock stuff for companies, and it
helps you to settle the knowledge in your brain. Also, give you superpowers
with your colleagues because you always care about things, and this is why I
mastered being the green CI guy or the refactor man time over time.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="getting-feedback-help"&gt;
&lt;h2&gt;Getting feedback&amp;amp;help&lt;/h2&gt;
&lt;p&gt;I live in a place where thinking big is nothing ordinary. When I said to my
parents that I would like to work on Open Source they were scared, and the same
with other many things. To reach where you want to go, you need to realise many
things. You can battle some of them, but at some point, you need to know if
you're doing it correctly and validate it. Over the years, I was lucky to meet
a lot of good engineers out there, and from time to time, I asked them things
to improve my work. For example, I asked too many times to VP level management
people, how I could create more exposure to reach higher or understand the
business process of a change/new product.&lt;/p&gt;
&lt;p&gt;To finalise, in April 2009, I started my internship at Quobis. That first day I
cried (a lot), I was scared, and I had zero clue about things. I still remember
that on the first day, Ángel advised me to read the &lt;a class="reference external" href="https://www.oreilly.com/library/view/asterisk-the-definitive/9781492031598/"&gt;Asterisk book&lt;/a&gt;;
my English was even crapier than now, and those days I could not even imagine
writing this blog post - I'm currently working at the same company as some
writers of that book-. I'm so thankful for the things I achieved, the people I
learnt from, and all the things I made over this time. To all of you who helped
me with something, many thanks. I really appreciate it!&lt;/p&gt;
&lt;pre class="literal-block"&gt;
&amp;quot;A time comes when you need to stop waiting for the man you want to become
and start being the man you want to be.” No one accidentally improves. If
you want to improve, you must improve yourself.
Bruce Springsteen.
&lt;/pre&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="thoughts"></category><category term="work"></category></entry><entry><title>Unlocking Fiber Deployment in the town council: A Citizen's Journey of Using Data</title><link href="https://acalustra.com/unlocking-fiber-deployment-in-the-town-council-a-citizens-journey-of-using-data.html" rel="alternate"></link><published>2023-02-04T21:00:00+01:00</published><updated>2023-02-04T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2023-02-04:/unlocking-fiber-deployment-in-the-town-council-a-citizens-journey-of-using-data.html</id><summary type="html">&lt;p&gt;European Union is pushing some money to all countries to develop infrastructure
for the regions. The kind of infrastructure does not matter, and the regions
ask for their needs. One of the biggest for many town councils in my area is
deploying FFTH to all homes, but as normal, some …&lt;/p&gt;</summary><content type="html">&lt;p&gt;European Union is pushing some money to all countries to develop infrastructure
for the regions. The kind of infrastructure does not matter, and the regions
ask for their needs. One of the biggest for many town councils in my area is
deploying FFTH to all homes, but as normal, some issues are in place.&lt;/p&gt;
&lt;p&gt;I knew about these public funds! And I also knew that some telecoms operators
where I live got money to connect thousands of homes to FFTH. Sadly, time
passed, and I didn't see any development, so I started to get &lt;a class="reference external" href="https://acalustra.com/os-proxectos-de-fibra-optica-en-galicia.html"&gt;suspicious&lt;/a&gt; that the
funds were not reaching the right place. So over the years, I shared this
information with all political parties to make them aware; some of them
supervised it others said I was lying. A few months ago, the new mayor called
me asking for help, so I decided to help to execute and supervise these public
funds.&lt;/p&gt;
&lt;p&gt;After our first call with the Telecoms Operators, the information could have
been more transparent, so one of the first goals was to know if all the houses
they said have FFTH connections were correct or not, and validate their data
with mine.&lt;/p&gt;
&lt;p&gt;To achieve this goal, I took advantage of two sources of truth:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;All houses' directions:&lt;/strong&gt; In Spain, there is a way to register the houses to the
govt(Catastro), so each plot has a reference number, and you know the direction
and coordinates of that house. I ended up mapping thousands of house directions
in simple GeoJson files.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Real internet connection:&lt;/strong&gt; This is easy to do if you can ask the operator if you
have coverage. One of the landing pages out there has a way to know if you have
fiber connection, so it was easy to scrape all the council house directions
and, from there, map true/false.&lt;/p&gt;
&lt;p&gt;Having this info allowed the mayor to have a lot of information; at the same
time, in April'22 we sent all the directions that were not with FFTH coverage
to the Spanish government to be able to receive funds to cover during the
following years.&lt;/p&gt;
&lt;p&gt;During the following months, we learnt that each Wednesday, they updated the
coverage so that we could track the progress weekly. Because we have all this
information, we can chase them, follow the process and unlock the issues.&lt;/p&gt;
&lt;p&gt;In the end, during 2022, &lt;strong&gt;we ended with more than 1500 houses with FFTH&lt;/strong&gt;, and
more than 240 with deployment-ready, but with license issues with Spanish Govt
for the interconnection, a minor thing that should be finished in the coming
weeks.&lt;/p&gt;
&lt;p&gt;Over this time, I learned a lot of things:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Social skills are needed:&lt;/strong&gt; I don't know how many times the deployment is
blocked by someone who is not allowing to do certain things, like enter their
plot to update the cables, even is good for him and all the neighbours.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;All the people complained, and no one said thanks:&lt;/strong&gt; This has been an issue
for so long in the town council, and it makes me sad that no one said thanks
when the deployment was successful. Incredibly, a neighbour called me every
week to complain; when he got his 1GB fiber connection, he didn't call me to
say thanks!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Geojson is cool, but not performance enough:&lt;/strong&gt; A friend told me, but it's
not going to work because of the performance, I can manage it, but I ended up
with more than 10GB of Geojson information.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Ask for help:&lt;/strong&gt; It was cool that I made the small framework to get all the
data, and  Adri took it to the next level; he updated all the maps weekly and
helped me with some context information and added some cool features to our
maps&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall, I'm super happy to do this pro-bono project. Over the years, I had
this problem, and I needed to work with a crappy 4G connection. I learnt how
difficult it is to deal with the town council, government, and telecoms
operator, and not only having the data but also helping the telecoms unlock
their deployments. It makes me happy the public funds reach almost all people
and make a difference in how the town council tackle issues with data, so it
has been an excellent experience for me.&lt;/p&gt;
</content><category term="blog"></category><category term="thoughts"></category><category term="work"></category></entry><entry><title>Embedded Rust katas in A Industriosa</title><link href="https://acalustra.com/embedded-rust-katas-in-a-industriosa.html" rel="alternate"></link><published>2022-12-25T21:00:00+01:00</published><updated>2022-12-25T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2022-12-25:/embedded-rust-katas-in-a-industriosa.html</id><summary type="html">&lt;p&gt;Embedded Rust is something that it's taken off over the last months. In
February, we will start a Monthly Kata where all of us work on different
projects while learning Embedded rust.&lt;/p&gt;
&lt;p&gt;For these sessions, there is no need to have prior knowledge, and the agenda
for the katas will …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Embedded Rust is something that it's taken off over the last months. In
February, we will start a Monthly Kata where all of us work on different
projects while learning Embedded rust.&lt;/p&gt;
&lt;p&gt;For these sessions, there is no need to have prior knowledge, and the agenda
for the katas will be like this:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;9:30  - 10:00 -&amp;gt; Breakfast&lt;/li&gt;
&lt;li&gt;10:00 - 12:00 -&amp;gt; Pair programming with all of us.&lt;/li&gt;
&lt;li&gt;12:00 - 13:30 -&amp;gt; Introduction/Presentation to any specific topic (Testing, CI,
debugging, etc..)&lt;/li&gt;
&lt;li&gt;13:30 - 14:00 -&amp;gt; Recap and vote for the presentation on the next topic.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We'll have an introduction and dev environment setup on the first kata. Over
the next katas, I'll be the presenter for the following topics, so with a month
in advantage; I can prepare the doc/examples, etc. In each Kata, a new topic
will be raised to discuss. The pair programming sessions are to have enough
time to share/ask/do things with others.&lt;/p&gt;
&lt;p&gt;My main goal is that a few have a small project to build. I prefer STM32(ARM)
or ESP32 (RISC-V) based projects, so the support is good enough. Regarding
peripherals, we have some in the hackspace, but I highly recommend buying all
in advance, so it can be easy to do.&lt;/p&gt;
&lt;p&gt;All the seasons will be on the third Saturday of the month, and I expect some
people to do more pair-programming seasons in the hackspace.&lt;/p&gt;
</content><category term="blog"></category><category term="rust"></category><category term="programming"></category></entry><entry><title>Make your Golang project more secure with a few simple tools</title><link href="https://acalustra.com/make-your-golang-project-more-secure-with-a-few-simple-tools.html" rel="alternate"></link><published>2022-11-20T21:00:00+01:00</published><updated>2022-11-20T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2022-11-20:/make-your-golang-project-more-secure-with-a-few-simple-tools.html</id><summary type="html">&lt;p&gt;Over the last few years, I have been jumping between multiple Golang projects
within different teams. These are a few tools that are not well-known by many
developers but make your code a bit more secure.&lt;/p&gt;
&lt;p&gt;These static check tools fit nicely on your CI pipelines. Other tools validate
what …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Over the last few years, I have been jumping between multiple Golang projects
within different teams. These are a few tools that are not well-known by many
developers but make your code a bit more secure.&lt;/p&gt;
&lt;p&gt;These static check tools fit nicely on your CI pipelines. Other tools validate
what your code is doing on runtime (&lt;a class="reference external" href="https://github.com/cilium/tetragon"&gt;Tetragon&lt;/a&gt;), and some validate that your
dependencies are what it is supposed to be (&lt;a class="reference external" href="https://www.sigstore.dev/"&gt;SigStore&lt;/a&gt;).&lt;/p&gt;
&lt;div class="section" id="gosec"&gt;
&lt;h2&gt;Gosec:&lt;/h2&gt;
&lt;p&gt;It's a community-driven tool that does static code analysis based on Golang
AST. It prevents your application from common attacks and controls SQL
injection, decompression attacks, Insecuring connections, ENV attacks and a few
others.&lt;/p&gt;
&lt;p&gt;You can use it manually like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;docker run --rm -w /opt/data/ &lt;span class="se"&gt;\&lt;/span&gt;
  -v &lt;span class="k"&gt;$(&lt;/span&gt;PWD&lt;span class="k"&gt;)&lt;/span&gt;:/opt/data/:z &lt;span class="se"&gt;\&lt;/span&gt;
  docker.io/securego/gosec &lt;span class="se"&gt;\&lt;/span&gt;
  -exclude-generated /opt/data/...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or using it on GitHub Actions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nn"&gt;---&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Security&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;push&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;branches&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;main&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;pull_request&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;branches&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;main&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="nt"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;Security-Scanner&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Security Scanner&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;runs-on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ubuntu-latest&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Check out code&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;actions/checkout@v2&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Run Gosec Security Scanner&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;securego/gosec@master&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;env&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;GOFLAGS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;-buildvcs=false&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;-exclude-generated&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;./...&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="semgrep"&gt;
&lt;h2&gt;Semgrep:&lt;/h2&gt;
&lt;p&gt;Semgrep is a broader tool and supports multiple programming languages. It has a
lot of rules that are community driven and free, and it also has some extended
rules that are only available by paying a subscription.&lt;/p&gt;
&lt;p&gt;You can use it manually like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ docker run --rm -v &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;pwd&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;:/src&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    returntocorp/semgrep &lt;span class="se"&gt;\&lt;/span&gt;
    semgrep --config &lt;span class="s2"&gt;&amp;quot;p/golang&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="vuln"&gt;
&lt;h2&gt;Vuln:&lt;/h2&gt;
&lt;p&gt;In Golang projects, it is usual to commit the vendor packages inside the
application repository. This behaviour can add some issues if one dependency
has a CVE that the infra team may be unaware of.&lt;/p&gt;
&lt;p&gt;Vuln is a community-driven tool that checks the dependencies that are part of
the go.mod and validates that there is no CVE in the current dependency
version; if it's any, it'll inform about the dependency.&lt;/p&gt;
&lt;p&gt;From my perspective, this tool should run daily in our CI with a clear path to
fixing it.&lt;/p&gt;
&lt;p&gt;You can use it manually like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;govulncheck ./...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or using it on GitHub Actions:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;My Workflow&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p p-Indicator"&gt;[&lt;/span&gt;&lt;span class="nv"&gt;push&lt;/span&gt;&lt;span class="p p-Indicator"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;pull_request&lt;/span&gt;&lt;span class="p p-Indicator"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;build&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;runs-on&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ubuntu-latest&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;actions/checkout@v3&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Running govulncheck&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;uses&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Templum/govulncheck-action@&amp;lt;version&amp;gt;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;go-version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;1.18&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;vulncheck-version&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;latest&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;package&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;./...&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="nt"&gt;github-token&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;${{ secrets.GITHUB_TOKEN }}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;These are the tools that I would always add to my CI; they are free and can
save your organization from any stupid risk.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="golang"></category><category term="programming"></category><category term="security"></category></entry><entry><title>What I wish my Telecom operator offer me</title><link href="https://acalustra.com/what-i-wish-my-telecom-operator-offer-me.html" rel="alternate"></link><published>2022-11-17T21:00:00+01:00</published><updated>2022-11-17T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2022-11-17:/what-i-wish-my-telecom-operator-offer-me.html</id><summary type="html">&lt;p&gt;Last week I was on a call with my internet provider, and surprisingly the agent
started to offer me a revolutionary product, &amp;quot;health insurance&amp;quot;, yes it was my
telecom provider.&lt;/p&gt;
&lt;p&gt;I understand why this happens; company boards want to diversify the cash flow
of revenue, which is a way to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last week I was on a call with my internet provider, and surprisingly the agent
started to offer me a revolutionary product, &amp;quot;health insurance&amp;quot;, yes it was my
telecom provider.&lt;/p&gt;
&lt;p&gt;I understand why this happens; company boards want to diversify the cash flow
of revenue, which is a way to increase revenue differently. Sadly, they are
looking for new products instead of growing their customer fidelity with better
solutions. In my opinion, this is a list of solutions where I think someone
will pay more:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;IPV6:&lt;/strong&gt; really, it's a reality nowadays. In Spain, only a low-cost provider
is providing it. They invest heavily in mobile tech, as we can see with 3G,
4G and 5G. Sadly, nowadays, we're suffering a lot of CG-NAT, and it's almost
impossible to pay for a static IP.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SIM Attacks:&lt;/strong&gt; This is still a typical attack, so things didn't improve;
they should consider taking care of that, and it is simple.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Parental control:&lt;/strong&gt; It's something that they can offer without too much
pain. They already have the infrastructure to manage millions of devices.
I'll pay more if I have a web app to disable my kid's connection or services
like NextDns or Pi-hole. Even disconnecting the 5G connection in his phone
will be a great addition.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Network mesh:&lt;/strong&gt; I love Tailscale,  they are doing fantastic work, but I
miss a service where my internet provider can offer me a network mesh within
my home and mobile, where I can see all the things together without too much
pain.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IoT Management:&lt;/strong&gt; I am trying to understand why they do not productize
home-assistant inside the router and be able to manage multiple applications
from there, like my Roomba, lawnmower, blinds, etc. Standardizing all
appliances will be challenging, but it's good vendor lock-in.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Such offerings like insurance or alarms are a faster way of revenue (In the
end, it is just enabling your commercial power). Still, it's not a good
strategic position. They are investing heavily in acquiring new customers to
lower customer attrition. Telecoms are data pipelines where no value is added
in their area of expertise, so end-users cannot benefit from it.&lt;/p&gt;
&lt;p&gt;I wish that someone took a position that thinks that each house has a  device
powerful enough that it's able to do more things than routing packages. If that
does not happen, telecoms will lose portions of their revenue, as it happens
now with Cloud Hyperscalers, Netflix and some other friends.&lt;/p&gt;
</content><category term="blog"></category><category term="thoughts"></category></entry><entry><title>On Agassi's biography</title><link href="https://acalustra.com/on-agassis-biography.html" rel="alternate"></link><published>2022-10-27T21:00:00+02:00</published><updated>2022-10-27T21:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2022-10-27:/on-agassis-biography.html</id><summary type="html">&lt;p&gt;One of the best readings this year was Agassi's biography, &amp;quot;Open&amp;quot;. The book
explained so many concepts that I enjoyed each page even though I never followed
tennis.&lt;/p&gt;
&lt;p&gt;Agassi's life is a rollercoaster! He hated tennis, yes you read correctly! He
played tennis mainly because his father -a frustrated athlete- …&lt;/p&gt;</summary><content type="html">&lt;p&gt;One of the best readings this year was Agassi's biography, &amp;quot;Open&amp;quot;. The book
explained so many concepts that I enjoyed each page even though I never followed
tennis.&lt;/p&gt;
&lt;p&gt;Agassi's life is a rollercoaster! He hated tennis, yes you read correctly! He
played tennis mainly because his father -a frustrated athlete- only wanted one
of his sons to be ATP number one. Over the first chapters, you can learn much
about parenthood and childhood behaviour, and you can mainly see what you
shouldn't do! Because Agassi hated playing, he always tried to be on edge to be
out kicked out of the tennis jail.&lt;/p&gt;
&lt;p&gt;One of the best learnings you can take is how important the people around you
are. It is crazy that Agassi's first fitness trainer didn't help. When Gil Reyes
started, it was a successful partnership and brought Agassi's performance to the
best level. It's clear how vital a mentor and partners are to help others
achieve the best, which happens in all roles and professions. I can highlight
this paragraph:  At the beginning of my journey, my friend Gil said to me,
&amp;quot;Andre, you have dreams and I have strong shoulders, so stand on my shoulders
and reach.&amp;quot;&lt;/p&gt;
&lt;p&gt;The same thing with perfectionism when Agassi's hired Brad Gilbert as a trainer;
Brad rapidly made it clear that not all the tennis points need to be perfect,
not all the matches incredible, just a victory and finish the work. You can read
four phases about the rivals: &lt;em&gt;thinking, recognising, analysing and
capitalising&lt;/em&gt;. Brad made it clear how to spend energy on only the needed things.
I can remark this quote from  Agassi: -you hope to be perfect but only need to
be better than one-. I wish this concept could be spread across IT industry,
where sometimes I feel that we only accept the perfect code and not the one that
do the work and live with it.&lt;/p&gt;
&lt;p&gt;But even when he won and made history, he fell -dragons always awaited us- and
it was big! His relationship broke, media added too much pressure, drugs, and
depression. Over the book, you'll identify all red flags, and sometimes we
should care why someone reached that state instead of complaining about him.&lt;/p&gt;
&lt;p&gt;But after the fall, luckily, it was a rise! I enjoyed that part of the book.
Even when he played at 200 ATP world, he started to enjoy himself, he knew how
to play, and the victories were for him, not his father, sponsors or whatever.
He was playing for himself and his team, he was proud about being #1 again,  and
when someone takes ownership of their dreams, it can be unstoppable!&lt;/p&gt;
&lt;p&gt;I Loved this book. It taught different aspects about parenthood, behaviour,
relationships, partnerships and life journey, which is what we all do!&lt;/p&gt;
</content><category term="blog"></category><category term="books"></category></entry><entry><title>Speaking at Pulpocon 2022 about Edge Computing</title><link href="https://acalustra.com/speaking-at-pulpocon-2022-about-edge-computing.html" rel="alternate"></link><published>2022-09-15T21:00:00+02:00</published><updated>2022-09-15T21:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2022-09-15:/speaking-at-pulpocon-2022-about-edge-computing.html</id><summary type="html">&lt;p&gt;Pulpocon is, for me, one of the best conferences in Spain. The level of speakers
and attendees is just crazy for a conference located in Vigo-Spain, and I
couldn't imagine this conference ten years ago.&lt;/p&gt;
&lt;p&gt;This year has been challenging for me, and being able to speak at this
incredible …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Pulpocon is, for me, one of the best conferences in Spain. The level of speakers
and attendees is just crazy for a conference located in Vigo-Spain, and I
couldn't imagine this conference ten years ago.&lt;/p&gt;
&lt;p&gt;This year has been challenging for me, and being able to speak at this
incredible conference was a bit of energy and fear at the highest level.&lt;/p&gt;
&lt;p&gt;I spoke about Edge Computing, what I think will be the future, how things
change, and what will mark a difference. I think many things will change in the
next 4-6 years.&lt;/p&gt;
&lt;p&gt;Here are my slides:&lt;/p&gt;
&lt;div style="width: 100%;" class="align-center" align="center"&gt;
&lt;script async class="speakerdeck-embed"
data-id="934db9125c664637bc0126ad8a8c2e50" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Many thanks to Rolando, Patri and Sergio for giving me this opportunity. At the
same time, many thanks to Gradiant, Marine Instruments and Wallbox for trusting
me to provide details about their Edge computing projects.&lt;/p&gt;
&lt;img alt="" src="img/pulpo2.jpg" /&gt;
&lt;p&gt;And thanks to all attendees for all the feedback. At the same time, I'm sorry
for not flying a three-meter drone inside the auditorium, but this drone get
from 0 to 200km in 3 seconds, so I'm sorry for not killing a bunch of you :-)&lt;/p&gt;
</content><category term="blog"></category><category term="talks"></category><category term="conference"></category><category term="edge-computing"></category></entry><entry><title>Os proxectos de fibra Óptica en Galicia</title><link href="https://acalustra.com/os-proxectos-de-fibra-optica-en-galicia.html" rel="alternate"></link><published>2021-11-03T21:00:00+01:00</published><updated>2021-11-03T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2021-11-03:/os-proxectos-de-fibra-optica-en-galicia.html</id><summary type="html">&lt;p&gt;Nos últimos anos, millóns e millóns de euros foron a acabar as mans das
operadoras de telecomunicacións para poder ofrecer conexión de fibra de mais de
100MB. Estas axudas é un plan da unión Europea, que ven dirixido dende a
Secretaría de Estado de Telecomunicaciones e Infraestructuras dixitais.&lt;/p&gt;
&lt;p&gt;Eu son …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nos últimos anos, millóns e millóns de euros foron a acabar as mans das
operadoras de telecomunicacións para poder ofrecer conexión de fibra de mais de
100MB. Estas axudas é un plan da unión Europea, que ven dirixido dende a
Secretaría de Estado de Telecomunicaciones e Infraestructuras dixitais.&lt;/p&gt;
&lt;p&gt;Eu son parte &amp;quot;agraciada&amp;quot; por estes proxectos, eu vivo nun sitio onde en menos de
10 semanas debería ter conexión de Fibra óptica, pero o proxecto vai con moito
atraso, tanto, que se me deu por facer seguimento.&lt;/p&gt;
&lt;p&gt;Todo os anos, o estado saca un informe de zonas brancas e grises de internet,
que marca onde debería terse fibra óptica, conexión 4G/5G, etc.. Esta cobertura
é planificada a través de códigos de unidades poboacionais, un mecanismo do INE
para referenciar as diferentes barrios. Unha unidade poboacional é una parte
pequeda dun concello, estando xestionado tal que así:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;36039030000&lt;/strong&gt;:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;36&lt;/em&gt;: Provincia(Pontevedra)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;039&lt;/em&gt;: Concello (O Porriño)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;03&lt;/em&gt;: Parroquia (Cans)&lt;/li&gt;
&lt;li&gt;&lt;em&gt;00000&lt;/em&gt;: Barrio(San esteban)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Os datos de unidades poboacionais, poden ser consultados na seguinte ligazón:
&lt;a class="reference external" href="https://www.ine.es/nomen2/index.do"&gt;https://www.ine.es/nomen2/index.do&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Se queremos ver os datos de cobertura, tendo claro o número de unidade
poboacional do noso interese, podemos ir a este informe e buscalo.
&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/zonas-blancas-NGA/Paginas/2021.aspx"&gt;https://avancedigital.mineco.gob.es/banda-ancha/zonas-blancas-NGA/Paginas/2021.aspx&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Se nos vamos ao  Concello de O Porriño, vemos que contamos con 141 unidades
poboacionais distintas, e cada unha cun rango diferente de acceso a internet.
Revisando os datos das axudas mencionadas, decateime, de que moitas unidades
poboacionais inda non están co 100% de cobertura, cando si que eran parte de
proxectos pasados. Estes proxectos afectan a case ao 50% da poboación do
Porriño, quedando aquí os datos:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Proxectos 2017: 11 Unidades poboacionais - 3332 habitantes.&lt;/li&gt;
&lt;li&gt;Proxectos 2018: 14 Unidades poboacionais - 1825 habitantes.&lt;/li&gt;
&lt;li&gt;Proxectos 2019: 58 Unidaes poboacionais - 3541 habitantes.&lt;/li&gt;
&lt;li&gt;Proxectos 2020: 1 Unidade poboacional - 169 Habitantes.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quedando asi o mapa:&lt;/p&gt;
&lt;script src="https://gist.github.com/eloycoto/16fc0c6a6848a29bb902f70cc3056c83.js"&gt;&lt;/script&gt;&lt;p&gt;Se revisamos a cobertura do proxecto do 2017, 4 anos despois, temos os seguintes
datos de cobertura de fibra óptica:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;36039010100     ALBARÍN         28%
36039011200     PONTENOVA       56%
36039050200     CABADIÑA (A)    76%
36039051100     MADORRAS (AS)   74%
36039060700     CENTEÁNS        70%
36039061000     IGREXA (A)      59%
36039071000     SEQUEIRAS       92%
36039080200     CONTRASTO (O)   49%
36039080500     PEREIRA         87%
36039080600     RELBA (A)       100%
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Os do 2018, inda son moito peores, 3 anos despois da concesión:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;36039010500     CAVADAS (AS)            0%
36039010600     COVELO                  0%
36039010700     EIDOS (OS)              71%
36039010800     GALEGOS (OS)            0%
36039010900     GUÍA                    4%
36039011300     PORTELA DE SOUTO (A)    55%
36039011400     REAL (O)                0%
36039011500     ROCHA (A)               0%
36039011600     TORRE (A)               15%
36039051000     LEVADA (A)              24%
36039070100     AVISEIRO                0%
36039070200     CARRACIDO               15%
36039080300     MOTA (A)                0%
36039080400     NOVAL (O)               26%
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Dende as administracións as respostas son dispares. Dende o concello que é algo
externo a eles, que están fora de plazo como calquera outra subvención. Dende a
Xunta (AMTega) que nada poden facer, dado que é algo do ministerio, e dende a
secretaria do ministerio, so me comentaron que o proxecto(do 2019) esta en fase
de replánteo, salvo unha unidade poboacional que estaba lista.&lt;/p&gt;
&lt;p&gt;Por outra parte para as operadoras, é moi bo negocio, as conexións de ADSL son
moito mais caras, agora xa non podes ter ofertas, e para eles é un método extra
de incrementar os seus balances.&lt;/p&gt;
&lt;p&gt;Dende mediados do 2019 levo buscando respostas sobre isto, pero por moito que
intento encontralas, non acabo de ser capaz de saber os estados do proxectos.
Pero tamén, o 50% do municipio de Porriño, leva con unha conexión de baixa
calidade, sen ter maior interese por ningunha administración.&lt;/p&gt;
&lt;div class="section" id="e-cales-son-os-datos-destes-proxectos"&gt;
&lt;h2&gt;E cales son os datos destes proxectos?&lt;/h2&gt;
&lt;p&gt;Todos os proxectos poden descargarse aquí:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2021.aspx"&gt;2021&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2020.aspx"&gt;2020&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2019.aspx"&gt;2019&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2018.aspx"&gt;2018&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2017.aspx"&gt;2017&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2016.aspx"&gt;2016&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2015.aspx"&gt;2015&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2014.aspx"&gt;2014&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://avancedigital.mineco.gob.es/banda-ancha/ayudas/Banda-Ancha-Generacion-2013-2021/Paginas/convocatoria-2013.aspx"&gt;2013&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Os datos económicos dende o 2017 ata o 2020 son os seguintes:&lt;/p&gt;
&lt;table border="1" class="docutils"&gt;
&lt;colgroup&gt;
&lt;col width="68%" /&gt;
&lt;col width="15%" /&gt;
&lt;col width="17%" /&gt;
&lt;/colgroup&gt;
&lt;thead valign="bottom"&gt;
&lt;tr&gt;&lt;th class="head"&gt;Razón social&lt;/th&gt;
&lt;th class="head"&gt;Sum - Ayuda&lt;/th&gt;
&lt;th class="head"&gt;Sum - Subvención&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td&gt;TELEFONICA DE ESPAÑA, S.A.&lt;/td&gt;
&lt;td&gt;332,567,788.84&lt;/td&gt;
&lt;td&gt;64,183,395.10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ADAMO TELECOM IBERIA SA&lt;/td&gt;
&lt;td&gt;77,743,641.41&lt;/td&gt;
&lt;td&gt;12,190,982.86&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ORANGE ESPAÑA COMUNICACIONES FIJAS S.L.U.&lt;/td&gt;
&lt;td&gt;19,368,679.62&lt;/td&gt;
&lt;td&gt;6,769,579.47&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;MASMOVIL BROADBAND S.A.UNIPERSONAL&lt;/td&gt;
&lt;td&gt;11,325,413.77&lt;/td&gt;
&lt;td&gt;3,175,688.55&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;R CABLE Y TELECOMUNICACIONES GALICIA, S.A.&lt;/td&gt;
&lt;td&gt;7,963,322.46&lt;/td&gt;
&lt;td&gt;1,917,170.03&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;OPERADORA IBERICA DE REDES Y SERVICIOS DE TELECOMUNICACIONES S.L.&lt;/td&gt;
&lt;td&gt;3,906,035.00&lt;/td&gt;
&lt;td&gt;694,894.10&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;ANTENAS Y SISTEMAS DE COMUNICACIONES, S.L&lt;/td&gt;
&lt;td&gt;3,613,124.00&lt;/td&gt;
&lt;td&gt;353,445.18&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;FIBRA MEDIOS TELECOM S.L.&lt;/td&gt;
&lt;td&gt;3,547,456.56&lt;/td&gt;
&lt;td&gt;347,687.16&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;TELECABLE DE ASTURIAS, S.A&lt;/td&gt;
&lt;td&gt;1,732,347.07&lt;/td&gt;
&lt;td&gt;314,361.54&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Esta é soamente a lista de operadoras por encima do 1M en axudas.&lt;/p&gt;
&lt;p&gt;Os datos de unidades poboacionais (2017-2020) con fibra os seguintes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;2017:&lt;/em&gt; 2378 Unidades poboacionais.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;2018:&lt;/em&gt; 4345 Unidades poboacionais.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;2019:&lt;/em&gt; 13.190 Unidades poboacionais.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;2020:&lt;/em&gt; 10356 Uniades poboacionais.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="como-se-pinta-no-mapa"&gt;
&lt;h2&gt;Como se pinta no mapa:&lt;/h2&gt;
&lt;p&gt;Unha grata sorpresa é o catalogo de GIS da Xunta de Galicia, con moita
información e cun sistema de busca moi sinxelo.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://xeocatalogo.xunta.gal/xeocatalogo/srv/glg/catalog.search#/home"&gt;https://xeocatalogo.xunta.gal/xeocatalogo/srv/glg/catalog.search#/home&lt;/a&gt;
&lt;a class="reference external" href="http://mapas.xunta.gal/centro-de-descargas"&gt;http://mapas.xunta.gal/centro-de-descargas&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Unha ferramenta descoñecida para min, pero moi útil en diferentes ámbitos.No que traballar con GeoJson, para alguén que non se dedica a GIS e moi sinxelo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="onde-queixarse"&gt;
&lt;h2&gt;Onde queixarse?&lt;/h2&gt;
&lt;p&gt;Na web do ministerio é a mellor forma, a traves dos seguinte ligazón.
&lt;a class="reference external" href="https://sede.serviciosmin.gob.es/es-es/procedimientoselectronicos/Paginas/detalle-procedimientos.aspx?IdProcedimiento=176"&gt;https://sede.serviciosmin.gob.es/es-es/procedimientoselectronicos/Paginas/detalle-procedimientos.aspx?IdProcedimiento=176&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Inda que moitos concellos, xa se queixan eles. &lt;a class="reference external" href="https://www.farodevigo.es/comarcas/2021/01/28/mos-denuncia-r-implantar-banda-31717827.html"&gt;Exemplo 1&lt;/a&gt; &lt;a class="reference external" href="https://www.lavozdegalicia.es/noticia/coruna/sada/2021/10/25/sada-realiza-encuesta-sobre-cobertura-fibra-optica/0003_202110H25C6996.htm"&gt;Exemplo 2&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="fibra optica"></category><category term="galicia"></category></entry><entry><title>Fosdem 2021 review</title><link href="https://acalustra.com/fosdem-2021-review.html" rel="alternate"></link><published>2021-02-18T21:00:00+01:00</published><updated>2021-02-18T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2021-02-18:/fosdem-2021-review.html</id><summary type="html">&lt;p&gt;As every year, the first week of February, Fosdem took place. The conference was
online for the first time, and I think that we all missed the rain and the snow.&lt;/p&gt;
&lt;p&gt;I really enjoyed the conference; it was not the same; also, it was hard to get
time over the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;As every year, the first week of February, Fosdem took place. The conference was
online for the first time, and I think that we all missed the rain and the snow.&lt;/p&gt;
&lt;p&gt;I really enjoyed the conference; it was not the same; also, it was hard to get
time over the weekend to see the talks. Online conferences should rethink a bit
the schedules, but overall I'm more than happy with the result!&lt;/p&gt;
&lt;p&gt;As usual, I went to multiple talks. This year, the talk that I most enjoyed was
the one given by &lt;a class="reference external" href="https://twitter.com/1nuritzi"&gt;Nuritzi Sanchez&lt;/a&gt;, she showed a
different way to think about communication and how to build trust with other
cultures, from now on, I'm going to share with many people &lt;a class="reference external" href="https://fosdem.org/2021/schedule/event/community_devroom_communication_hacks/attachments/slides/4675/export/events/attachments/community_devroom_communication_hacks/slides/4675/FOSDEM_2021_Communication_Hacks.pdf"&gt;[slides]&lt;/a&gt;.&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/4f4Za-X9CJQ" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen&gt;&lt;/iframe&gt;&lt;p&gt;Regarding other topics, quite impressed by the &lt;a class="reference external" href="https://fosdem.org/2021/schedule/event/tee_enarx/"&gt;Ernax project&lt;/a&gt; and &lt;a class="reference external" href="https://fosdem.org/2021/schedule/event/tee_veracruz/"&gt;ARM Veracruz&lt;/a&gt;, this technology will
be crucial in the next couple of years, and I think this will change how Edge
Computing will behave.&lt;/p&gt;
&lt;p&gt;Regarding containers, I highly recommend the talk by my former colleague &lt;a class="reference external" href="https://fosdem.org/2021/schedule/event/containers_ebpf_kernel/"&gt;Daniel
Borkmann&lt;/a&gt;,
impressive work made by Cilium team. &lt;a class="reference external" href="https://fosdem.org/2021/schedule/speaker/viktor_farcic/"&gt;Viktor Farcic&lt;/a&gt; made an excellent
presentation about Argo CD, also recommend his Youtube channel. Another famous
Youtuber, &lt;a class="reference external" href="https://fosdem.org/2021/schedule/speaker/david_mckay/"&gt;David McKay&lt;/a&gt;, made two talks, I
enjoyed Cluster API one, and the Telegraph one is worth to listen.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://fosdem.org/2021/schedule/speaker/peter_zaitsev/"&gt;Peter Zaitsev&lt;/a&gt; made
many talks, this one about performance testing has very good tips, I'll keep in
my bookmarks for the future, a lot of good things there.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://fosdem.org/2021/schedule/speaker/brad_fitzpatrick/"&gt;Brad Fitzpatrick&lt;/a&gt;
background is unachievable, and he shared how Tailscale is using Golang. I loved
Tailscale, and maybe I'm biased, but I found very interesting the problems
regarding Golang net.IP types.&lt;/p&gt;
&lt;p&gt;Finally, this was my Fosdem, and I'm so thankful to all organisers to keep the
level so high! Thanks for always giving a weekend of joy!&lt;/p&gt;
</content><category term="blog"></category><category term="fosdem"></category></entry><entry><title>A smooth move to 4G using Linux</title><link href="https://acalustra.com/a-smooth-move-to-4g-using-linux.html" rel="alternate"></link><published>2021-01-19T23:00:00+01:00</published><updated>2021-01-19T23:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2021-01-19:/a-smooth-move-to-4g-using-linux.html</id><summary type="html">&lt;p&gt;One of the problems that I faced in the past is how I switched from DSL to 4G
connection. My primary internet connection is DSL, and things are bad when you
try to upload something big or want to do a videocall without issues.&lt;/p&gt;
&lt;p&gt;I used 4G over the phone …&lt;/p&gt;</summary><content type="html">&lt;p&gt;One of the problems that I faced in the past is how I switched from DSL to 4G
connection. My primary internet connection is DSL, and things are bad when you
try to upload something big or want to do a videocall without issues.&lt;/p&gt;
&lt;p&gt;I used 4G over the phone, but the experience it's terrible. Also, it's not a
smooth change: disconnect the cable, connect to your mobile wifi, etc.  If you
got a call, meanwhile you're using 4G connection, the connection goes down, a
lot of downsides for a permanent workspace.&lt;/p&gt;
&lt;p&gt;Over the last weeks, I'm running a new setup, where I still use ADSL as a
primary connection, but If I use VLAN 100, I'll use an external 4G antenna. Let
me explain how I build this setup.&lt;/p&gt;
&lt;img alt="" src="img/4g.png" /&gt;
&lt;div class="section" id="hardware-needed"&gt;
&lt;h2&gt;Hardware needed&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Edgerouter X&lt;/strong&gt;: This is the primary router; it does the LoadBalance.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Zyxel LTE7460:&lt;/strong&gt; The 4G modem that I found. The best thing is that it supports
bridge mode, so no double NAT issues.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux computer&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Wan connection&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="edgerouter-x-load-balance-based-on-vlan"&gt;
&lt;h2&gt;Edgerouter X, load balance based on VLAN&lt;/h2&gt;
&lt;p&gt;Edgerouter X is, in my opinion, one of the best purchases that you can do. An
old, but a powerful router, where you can achieve many things with a super
simple DSL (Domain-specific Language) config.&lt;/p&gt;
&lt;p&gt;The main behaviour will be: SWITCH0 interface will support a VLAN 100, when
traffic goes into this virtual interface, it'll use a modify rule that will send
traffic to a different Load Balancer. Here is the config:&lt;/p&gt;
&lt;p&gt;VLAN 100 definition:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
switch switch0 {
  address 192.168.25.1/24
  description Local
  firewall {
    in {
      modify balance
    }
  }
  mtu 1500
  switch-port {
    interface eth0 {
    }
    interface eth1 {
    }
    interface eth2 {
    }
    vlan-aware disable
  }
  vif 100 {
    firewall {
      in {
        modify balance_100
      }
    }
  }
}
&lt;/pre&gt;
&lt;p&gt;Load Balance definition:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
load-balance {
  group 4G {
    interface eth4 {
    }
    interface pppoe0 {
      failover-only
    }
    lb-local enable
    lb-local-metric-change disable
  }

  group G {
    interface pppoe0 {
    }
    interface pppoe1 {
    }
    interface eth4 {
      failover-only
    }
    lb-local enable
    lb-local-metric-change disable
  }
}
&lt;/pre&gt;
&lt;p&gt;Outbound Firewall modify rule:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
modify balance_100 {
  rule 10 {
    action modify
    description &amp;quot;do not balance lan to lan&amp;quot;
    destination {
      group {
        network-group PRIVATE_NETS
      }
    }
    log disable
    modify {
      table main
    }
  }
  rule 20 {
    action modify
    description &amp;quot;do NOT load balance destination public address&amp;quot;
    destination {
      group {
        address-group ADDRv4_pppoe0
      }
    }
    modify {
      table main
    }
  }
  rule 21 {
    action modify
    description &amp;quot;do NOT load balance destination public address&amp;quot;
    destination {
      group {
        address-group ADDRv4_pppoe1
      }
    }
    modify {
      table main
    }
  }
  rule 30 {
    action modify
    description &amp;quot;do NOT load balance destination public address&amp;quot;
    destination {
      group {
        address-group ADDRv4_eth4
      }
    }
    modify {
      table main
    }
  }
  rule 100 {
    action modify
    log disable
    modify {
      lb-group 4G
    }
  }
}
&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="linux-set-vlan-on-the-fly"&gt;
&lt;h2&gt;Linux set VLAN on the fly.&lt;/h2&gt;
&lt;p&gt;When setting a VLAN on a Linux system, I always used vconfig, but I wanted
something fast and no permanent networking configuration involved in this case.&lt;/p&gt;
&lt;p&gt;Linux TC (Traffic-control) is not commonly used, but it has a lot of power to
change interface datapath configurations on the fly. One of the options that you
can do is adding a VLAN tag when a condition matches.&lt;/p&gt;
&lt;p&gt;So, I made a simple script, it enables or disables the VLAN 100. The best way is
to use QDISC(queueing discipline) filters on the egress, this is the main
action:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;tc qdisc add dev &lt;span class="nv"&gt;$interface&lt;/span&gt; handle &lt;span class="m"&gt;1&lt;/span&gt;: root prio
tc filter add dev &lt;span class="nv"&gt;$interface&lt;/span&gt; parent &lt;span class="m"&gt;1&lt;/span&gt;: protocol ip matchall action vlan push id &lt;span class="nv"&gt;$VLAN_TO_PUSH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the traffic is IP, in my case, it will set the VLAN 100, and traffic goes
over 4G connection. Actions can be more powerful such as port/IP filtering,
etc..&lt;/p&gt;
&lt;p&gt;The complete script is the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="nv"&gt;ACTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;VLAN_TO_PUSH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;100&lt;/span&gt;

echoerr&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; get_local_interfaces&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nv"&gt;LOCAL_INTERFACES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;ip --json a show &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;.[] | select((.operstate == &amp;quot;UP&amp;quot;) and ((.addr_info?[0].local|tostring)|test(&amp;quot;^192.*&amp;quot;))) | .ifname+&amp;quot;\t&amp;quot;+.addr_info?[0].local&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
  &lt;span class="nb"&gt;echo&lt;/span&gt; -n &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$LOCAL_INTERFACES&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; disable_4g &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
  echoerr &lt;span class="s2"&gt;&amp;quot;Disable 4G connection&amp;quot;&lt;/span&gt;
  tc qdisc del dev &lt;span class="nv"&gt;$interface&lt;/span&gt; root
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; enable_4g &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
  echoerr &lt;span class="s2"&gt;&amp;quot;Enable 4G connection&amp;quot;&lt;/span&gt;
  tc qdisc add dev &lt;span class="nv"&gt;$interface&lt;/span&gt; handle &lt;span class="m"&gt;1&lt;/span&gt;: root prio
  tc filter add dev &lt;span class="nv"&gt;$interface&lt;/span&gt; parent &lt;span class="m"&gt;1&lt;/span&gt;: protocol ip matchall action vlan push id &lt;span class="nv"&gt;$VLAN_TO_PUSH&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; is_interface_on_4g &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
  tc filter show dev &lt;span class="nv"&gt;$interface&lt;/span&gt; parent &lt;span class="m"&gt;1&lt;/span&gt;: &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="s2"&gt;&amp;quot;^filter&amp;quot;&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt; -eq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    echoerr &lt;span class="s2"&gt;&amp;quot;Inferface &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39; does not have tc filter&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;false&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    echoerr &lt;span class="s2"&gt;&amp;quot;Inferface &amp;#39;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39; contains tc filter&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;true&lt;/span&gt;
  &lt;span class="k"&gt;fi&lt;/span&gt;

&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; toggle_interface&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; is_interface_on_4g &lt;span class="nv"&gt;$interface&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
    disable_4g &lt;span class="nv"&gt;$interface&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt;
    enable_4g &lt;span class="nv"&gt;$interface&lt;/span&gt;
  &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; toggle&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nv"&gt;IFS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; line &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;get_local_interfaces&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -n &lt;span class="nv"&gt;$line&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
    toggle_interface &lt;span class="nv"&gt;$interface&lt;/span&gt;
  &lt;span class="k"&gt;done&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; list&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;RESULT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;quot;&lt;/span&gt;
  &lt;span class="nv"&gt;IFS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;$&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; line &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;get_local_interfaces&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -n &lt;span class="nv"&gt;$line&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;DEFAULT_MODE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;DSL&amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; is_interface_on_4g &lt;span class="nv"&gt;$interface&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
      &lt;span class="nv"&gt;RESULT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESULT&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;=4G &amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;
      &lt;span class="nv"&gt;RESULT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RESULT&lt;/span&gt;&lt;span class="si"&gt;}${&lt;/span&gt;&lt;span class="nv"&gt;interface&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;=DSL &amp;quot;&lt;/span&gt;
    &lt;span class="k"&gt;fi&lt;/span&gt;
  &lt;span class="k"&gt;done&lt;/span&gt;
  &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$RESULT&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; &lt;span class="nv"&gt;$ACTION&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;toggle&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  toggle
&lt;span class="k"&gt;else&lt;/span&gt;
  list
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="argos-gnome-shell-extensions"&gt;
&lt;h2&gt;Argos Gnome Shell Extensions&lt;/h2&gt;
&lt;p&gt;Because I pay a lot of the 4G connection,  I want to have something seamless and
be notified when I use it.  Argos Gnome Shell extension is the best way to get
that info; a simple script displays if an interface is using DSL or 4G and I
also add a toggle button, here is the complete script:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;STATUS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;~/bin/toggle_dsl.sh  &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt;/dev/null&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;STATUS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;---&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;📡toggle | bash=&amp;#39;~/bin/toggle_dsl.sh toggle&amp;#39; terminal=false&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, this is the seamless setup, moving to 4G is easy; I do not need an
external phone, I'm no longer worried about receiving calls. Because It uses a
4G antenna when ADSL is down, I can failover without problems! By far, this was
one of the best productivity hacks that I made in 2020!&lt;/p&gt;
&lt;p&gt;Yup, I already sign up on Startlink.&lt;/p&gt;
&lt;p&gt;Cover image: &lt;a class="reference external" href="https://pxhere.com/en/photo/1592827"&gt;https://pxhere.com/en/photo/1592827&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="networking"></category><category term="vlan"></category><category term="tc"></category></entry><entry><title>Envoy WASM debugging with BPFtrace</title><link href="https://acalustra.com/envoy-wasm-debugging-with-bpftrace.html" rel="alternate"></link><published>2021-01-19T23:00:00+01:00</published><updated>2021-01-19T23:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2021-01-19:/envoy-wasm-debugging-with-bpftrace.html</id><summary type="html">&lt;p&gt;A few days back, I was checking &lt;a class="reference external" href="https://www.envoyproxy.io/"&gt;Envoy&lt;/a&gt;
performance when WASM is in use. &lt;a class="reference external" href="https://github.com/envoyproxy/envoy/blob/main/bazel/PPROF.md"&gt;PPROF&lt;/a&gt; can be enabled
quite easily in Envoy, but I wanted to have less intrusive experience.&lt;/p&gt;
&lt;p&gt;In the past, to debug things like this I always use &lt;a class="reference external" href="https://www.sourceware.org/systemtap/"&gt;Systemtap&lt;/a&gt;, (super intrusive) but &lt;a class="reference external" href="https://github.com/iovisor/bpftrace"&gt;BPFtrace&lt;/a&gt; is straightforward and fast …&lt;/p&gt;</summary><content type="html">&lt;p&gt;A few days back, I was checking &lt;a class="reference external" href="https://www.envoyproxy.io/"&gt;Envoy&lt;/a&gt;
performance when WASM is in use. &lt;a class="reference external" href="https://github.com/envoyproxy/envoy/blob/main/bazel/PPROF.md"&gt;PPROF&lt;/a&gt; can be enabled
quite easily in Envoy, but I wanted to have less intrusive experience.&lt;/p&gt;
&lt;p&gt;In the past, to debug things like this I always use &lt;a class="reference external" href="https://www.sourceware.org/systemtap/"&gt;Systemtap&lt;/a&gt;, (super intrusive) but &lt;a class="reference external" href="https://github.com/iovisor/bpftrace"&gt;BPFtrace&lt;/a&gt; is straightforward and fast.&lt;/p&gt;
&lt;p&gt;So I did this super simple &lt;a class="reference external" href="https://github.com/eloycoto/envoy_playground/tree/master/bpftrace"&gt;docker-compose project&lt;/a&gt; where you
can run bpftrace meanwhile you run Envoy, and here is the bpftrace script that
you can see the list of WASM functions used by Envoy, and the time that was
used.&lt;/p&gt;
&lt;p&gt;Over the next weeks, I'll keep adding bpftrace scripts &lt;a class="reference external" href="https://github.com/eloycoto/envoy_playground/tree/master/bpftrace/traces"&gt;here&lt;/a&gt;,
because they are quite useful on my day job.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#!/usr/bin/env bpftrace
BEGIN
{
  printf(&amp;quot;Tracing proxy-wasm call in envoy...Hit Ctrl-C to end.\n&amp;quot;);
}

uprobe:/usr/bin/envoy:proxy_wasm*exports* {
  @start[tid] = nsecs;
}

uretprobe:/usr/bin/envoy:proxy_wasm*exports*
/@start[tid]/
{
  @ns[func] = hist(nsecs - @start[tid]);
  delete(@start[tid]);
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And running it using the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#-&amp;gt; bpftrace -p $(pgrep envoy) /traces/proxy_wasm_calls_time.bt
Attaching 249 probes...
Tracing proxy-wasm call in envoy...Hit Ctrl-C to end.
^C
@ns[proxy_wasm::exports::get_current_time_nanoseconds(void*, proxy_wasm::Word)]:
[2K, 4K)               2 |@@@@@@@@@@@@@@@@@@@@                                |
[4K, 8K)               5 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[8K, 16K)              2 |@@@@@@@@@@@@@@@@@@@@                                |

@ns[proxy_wasm::exports::send_local_response(void*, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word)]:
[1K, 2K)             544 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[2K, 4K)             419 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@            |
[4K, 8K)              31 |@@                                                  |
[8K, 16K)              3 |                                                    |
[16K, 32K)             1 |                                                    |
[32K, 64K)             1 |                                                    |
[64K, 128K)            1 |                                                    |

@ns[proxy_wasm::exports::send_local_response(void*, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word)]:
[2K, 4K)             653 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[4K, 8K)             295 |@@@@@@@@@@@@@@@@@@@@@@@                             |
[8K, 16K)             47 |@@@                                                 |
[16K, 32K)             5 |                                                    |

@ns[proxy_wasm::exports::get_header_map_pairs(void*, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word)]:
[1K, 2K)             295 |@@@@@@@@@@@@@@@@@@@@@@@                             |
[2K, 4K)             653 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[4K, 8K)              47 |@@@                                                 |
[8K, 16K)              3 |                                                    |
[16K, 32K)             2 |                                                    |

@ns[proxy_wasm::exports::log(void*, proxy_wasm::Word, proxy_wasm::Word, proxy_wasm::Word)]:
[1K, 2K)            4036 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ |
[2K, 4K)            4098 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[4K, 8K)             746 |@@@@@@@@@                                           |
[8K, 16K)            106 |@                                                   |
[16K, 32K)            14 |                                                    |
[32K, 64K)             6 |                                                    |
[64K, 128K)            1 |                                                    |
[128K, 256K)           1 |                                                    |
[256K, 512K)           0 |                                                    |
[512K, 1M)             0 |                                                    |
[1M, 2M)               1 |                                                    |
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to learn bpftrace, I highly recommend to have a look at &lt;a class="reference external" href="https://github.com/iovisor/bpftrace/blob/master/docs/tutorial_one_liners.md"&gt;bpftrace
one-liners&lt;/a&gt;
tutorial, is made for dummies like me.&lt;/p&gt;
&lt;p&gt;Enjoy!&lt;/p&gt;
</content><category term="blog"></category><category term="bpf"></category><category term="envoy"></category><category term="wasm"></category></entry><entry><title>My Fosdem 2020 review list of talks</title><link href="https://acalustra.com/my-fosdem-2020-review-list-of-talks.html" rel="alternate"></link><published>2020-02-05T23:00:00+01:00</published><updated>2020-02-05T23:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2020-02-05:/my-fosdem-2020-review-list-of-talks.html</id><summary type="html">&lt;p&gt;This year I can't attend Fosdem! this, for me, is one of the best conference in
the world, so in the following weeks I will catch up with some talks videos,
something that I always use to do, but this year I'll make the list public, so
people can see …&lt;/p&gt;</summary><content type="html">&lt;p&gt;This year I can't attend Fosdem! this, for me, is one of the best conference in
the world, so in the following weeks I will catch up with some talks videos,
something that I always use to do, but this year I'll make the list public, so
people can see in what I'm interested in, and hopefully will help someone.&lt;/p&gt;
&lt;div class="section" id="network-protocols"&gt;
&lt;h2&gt;Network &amp;amp; protocols&lt;/h2&gt;
&lt;p&gt;HTTP/3 for everyone, by Curl creator about HTTP3&amp;amp;QUIC
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/http3/"&gt;https://fosdem.org/2020/schedule/event/http3/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The ultimate guide to HTTP resource prioritization by  Robin Marx
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/webperf_http_prioritization/"&gt;https://fosdem.org/2020/schedule/event/webperf_http_prioritization/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;SCION: Future internet that you can use today by Kamila Součková&amp;amp;Mateusz Kowalski
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/scion/"&gt;https://fosdem.org/2020/schedule/event/scion/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;SWIM - Protocol to Build a Cluster by Vladislav Shpilevoy
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/swim/"&gt;https://fosdem.org/2020/schedule/event/swim/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Making &amp;amp; Breaking Matrix's E2E encryption by Matthew Hodgson
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/matrix/"&gt;https://fosdem.org/2020/schedule/event/matrix/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fundamental Technologies We Need to Work on for Cloud-Native Networking by Magnus Karlsson
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/fundamental_technologies_we_need_to_work_on_for_cloud_native_networking/"&gt;https://fosdem.org/2020/schedule/event/fundamental_technologies_we_need_to_work_on_for_cloud_native_networking/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The hairy issue of e2e encryption in instant messaging by Winfried Tilanus
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/security_the_hairy_issue_of_e2e_encryption_in_instant_messaging/"&gt;https://fosdem.org/2020/schedule/event/security_the_hairy_issue_of_e2e_encryption_in_instant_messaging/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Identity Box: Decentralized Web of the Future by Marcin Czenko
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/dip_identity_box/"&gt;https://fosdem.org/2020/schedule/event/dip_identity_box/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Decentralizing OAuth2.0 in a post-GDPR world for full privacy and portability
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/dip_decentralizing_oauth/"&gt;https://fosdem.org/2020/schedule/event/dip_decentralizing_oauth/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="culture-and-personal-behaviour"&gt;
&lt;h2&gt;Culture and personal behaviour&lt;/h2&gt;
&lt;p&gt;The Linux Kernel: We have to finish this thing one day, by Thorsten Leemhuis
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/linux_kernel/"&gt;https://fosdem.org/2020/schedule/event/linux_kernel/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;How Containers and Kubernetes re-defined the GNU/Linux Operating System by Daniel Riek
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/riek_kubernetes/"&gt;https://fosdem.org/2020/schedule/event/riek_kubernetes/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="golang"&gt;
&lt;h2&gt;Golang&lt;/h2&gt;
&lt;p&gt;TinyGo on microcontrollers and WebAssembly by Ron Evans
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/bof_tinygo/"&gt;https://fosdem.org/2020/schedule/event/bof_tinygo/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The State of Go by Francesc Campoy, Maartje Eyskens
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/stateofgo/"&gt;https://fosdem.org/2020/schedule/event/stateofgo/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Functional Programming with Go by Dylan Meeus
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/functionalgo/"&gt;https://fosdem.org/2020/schedule/event/functionalgo/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;From Go to Kubernetes CRDs and Back by Stefan Schimanski
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/gokubernetes/"&gt;https://fosdem.org/2020/schedule/event/gokubernetes/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Deterministic debugging with Delve by Derek Parker
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/debuggingwithdelve/"&gt;https://fosdem.org/2020/schedule/event/debuggingwithdelve/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Advanced debugging techniques of Go code by Andrii Soldatenko
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/advanceddebugginggo/"&gt;https://fosdem.org/2020/schedule/event/advanceddebugginggo/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Speed up the monolith: building a smart reverse proxy in Go by Alessio Caiazza
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/speedupmonolith/"&gt;https://fosdem.org/2020/schedule/event/speedupmonolith/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="linux-and-friends"&gt;
&lt;h2&gt;Linux and friends&lt;/h2&gt;
&lt;p&gt;Address Space Isolation in the Linux Kernel by James Bottomley and Mike Rapoport
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/kernel_address_space_isolation/"&gt;https://fosdem.org/2020/schedule/event/kernel_address_space_isolation/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fixing the Kubernetes clusterfuck by Kris Nova
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/kubernetes/"&gt;https://fosdem.org/2020/schedule/event/kubernetes/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Tools and mechanisms to debug BPF programs by Quentin Monnet
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/debugging_bpf/"&gt;https://fosdem.org/2020/schedule/event/debugging_bpf/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Debugging apps running in Kubernetes by Jeff Knurek
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/debugging_kubernetes/"&gt;https://fosdem.org/2020/schedule/event/debugging_kubernetes/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Skydive A real time network topology and protocols analyzer by Sylvain Baubeau and Sylvain Afchain
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/real_time_network_topology_and_protocols_analyzer/"&gt;https://fosdem.org/2020/schedule/event/real_time_network_topology_and_protocols_analyzer/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Endless Network Programming − An Update from eBPF Land by Quentin Monnet
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/endless_network_programming/"&gt;https://fosdem.org/2020/schedule/event/endless_network_programming/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Replacing iptables with eBPF in Kubernetes with Cilium by Michal Rostecki
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/replacing_iptables_with_ebpf/"&gt;https://fosdem.org/2020/schedule/event/replacing_iptables_with_ebpf/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fast QUIC sockets for cloud networking by Nathan Skrzypczak and Aloys Augustin
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/fast_quic_sockets_for_cloud_networking/"&gt;https://fosdem.org/2020/schedule/event/fast_quic_sockets_for_cloud_networking/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Falco Internals 101 : Syscalls processing for security analysis by Lorenzo Fontana
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/security_falco_internals_101/"&gt;https://fosdem.org/2020/schedule/event/security_falco_internals_101/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Docker Security considerations &amp;amp; Incident Analysis by John Lionis
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/security_docker_security_considerations_incident_analysis/"&gt;https://fosdem.org/2020/schedule/event/security_docker_security_considerations_incident_analysis/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Protecting plaintext secrets in configuration files by Moisés Guimarães
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/security_protecting_plaintext_secrets_in_configuration_files/"&gt;https://fosdem.org/2020/schedule/event/security_protecting_plaintext_secrets_in_configuration_files/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kernel Runtime Security Instrumentation by Florent Revest
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/security_kernel_runtime_security_instrumentation/"&gt;https://fosdem.org/2020/schedule/event/security_kernel_runtime_security_instrumentation/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;How secure is your build/server?  a story of packages and trust by Patrick Debois
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/kubernetes_gitops/"&gt;https://fosdem.org/2020/schedule/event/kubernetes_gitops/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Welcome to KernelCI by Guillaume Tucker
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/testing_welcome_kernelci/"&gt;https://fosdem.org/2020/schedule/event/testing_welcome_kernelci/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;How to measure Linux Performance Wrong by Peter Zaitsev
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/measure_linux_performance/"&gt;https://fosdem.org/2020/schedule/event/measure_linux_performance/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Supervising and emulating syscalls by Christian Brauner
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/containers_syscall_emulation/"&gt;https://fosdem.org/2020/schedule/event/containers_syscall_emulation/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;BPF as a revolutionary technology for the container landscape by Daniel Borkmann
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/containers_bpf/"&gt;https://fosdem.org/2020/schedule/event/containers_bpf/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="programming-ops"&gt;
&lt;h2&gt;Programming &amp;amp;&amp;amp; ops&lt;/h2&gt;
&lt;p&gt;Writing Go(od) Tests by Nikki Attea
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/testing_writing_go_tests/"&gt;https://fosdem.org/2020/schedule/event/testing_writing_go_tests/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Boosting Python with Rust by Raphaël Gomès
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/python2020_rust/"&gt;https://fosdem.org/2020/schedule/event/python2020_rust/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Introducing HTTPX by Tom Christie
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/python2020_httpx/"&gt;https://fosdem.org/2020/schedule/event/python2020_httpx/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Testing, releasing and deploying Tekton with Tekton by Andrea Frittoli, Vincent Demeester
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/marios_adventures_in_tekton_land/"&gt;https://fosdem.org/2020/schedule/event/marios_adventures_in_tekton_land/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Precise, cross-project code navigation at GitHub scale by Douglas Creager
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/github_cross_project_code_navigation/"&gt;https://fosdem.org/2020/schedule/event/github_cross_project_code_navigation/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Distributed Tracing for beginners by Juraci Paixão
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/tracing_beginners/"&gt;https://fosdem.org/2020/schedule/event/tracing_beginners/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Grafana: Successfully correlate metrics, logs, and traces by Andrej Ocenas
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/tracing_grafana/"&gt;https://fosdem.org/2020/schedule/event/tracing_grafana/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Container Live Migration by Adrian Reber
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/containers_live_migration/"&gt;https://fosdem.org/2020/schedule/event/containers_live_migration/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Minimalistic typed Lua is here by Hisham Muhammad
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/minimalistictypedlua/"&gt;https://fosdem.org/2020/schedule/event/minimalistictypedlua/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;RaptorJIT: a fast, dynamic systems programming language by      Max Rottenkolber
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/raptorjit_lua/"&gt;https://fosdem.org/2020/schedule/event/raptorjit_lua/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="misc"&gt;
&lt;h2&gt;Misc&lt;/h2&gt;
&lt;p&gt;Continuous Integration for Open Hardware Projects by Mario Behling
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/oshw_ci/"&gt;https://fosdem.org/2020/schedule/event/oshw_ci/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Open Source Hardware for Industrial use by Tsvetan Usunov
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/olimex_oshw/"&gt;https://fosdem.org/2020/schedule/event/olimex_oshw/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;FOSDEM Video Box by Mark Van den Borre, Luc Verhaegen and Gerry Demaret
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/videobox/"&gt;https://fosdem.org/2020/schedule/event/videobox/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Discover the New Firefox Profiler by Nazım Can Altınova
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/discover_the_new_firefox_profiler/"&gt;https://fosdem.org/2020/schedule/event/discover_the_new_firefox_profiler/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Facilitating distributed deterministic computation with WASI by  Jakub Konka
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/facilitating_distributed_deterministic_computation_with_wasi/"&gt;https://fosdem.org/2020/schedule/event/facilitating_distributed_deterministic_computation_with_wasi/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Fixing healthcare data exchange with decentralized FOSS by Steven van der Vegt
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/dip_fixing_healthcare_data/"&gt;https://fosdem.org/2020/schedule/event/dip_fixing_healthcare_data/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Modern VoIP in Modern Infrastructures by Giacomo Vacca
&lt;a class="reference external" href="https://fosdem.org/2020/schedule/event/modern_voip_infra/"&gt;https://fosdem.org/2020/schedule/event/modern_voip_infra/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Hope it helps!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="fosdem"></category></entry><entry><title>Kubernetes Network Policies talk at AtlanticaConf19</title><link href="https://acalustra.com/kubernetes-network-policies-talk-at-atlanticaconf19.html" rel="alternate"></link><published>2019-10-15T16:00:00+02:00</published><updated>2019-10-15T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2019-10-15:/kubernetes-network-policies-talk-at-atlanticaconf19.html</id><summary type="html">&lt;p&gt;I had the luck to gave a talk at &lt;a class="reference external" href="https://www.atlanticaconf.com/"&gt;AtlanticaConf&lt;/a&gt;. The topic was about Kubernetes Network
Policies and a bit of Istio&lt;/p&gt;
&lt;script async class="speakerdeck-embed"
data-id="edc88328c1d34c6da8d2fa9f004c57e8" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;p&gt;Thanks to all organizers for doing that, I really enjoyed my time at the
conference.&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;Full room for &lt;a href="https://twitter.com/eloycoto?ref_src=twsrc%5Etfw"&gt;@eloycoto&lt;/a&gt; in the &lt;a href="https://twitter.com/atlanticaConf?ref_src=twsrc%5Etfw"&gt;@atlanticaConf&lt;/a&gt;. A very top &lt;a href="https://twitter.com/hashtag/kubernetes?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#kubernetes&lt;/a&gt; talk! &lt;a href="https://t.co/Lr7U1UTAoL"&gt;pic …&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;p&gt;I had the luck to gave a talk at &lt;a class="reference external" href="https://www.atlanticaconf.com/"&gt;AtlanticaConf&lt;/a&gt;. The topic was about Kubernetes Network
Policies and a bit of Istio&lt;/p&gt;
&lt;script async class="speakerdeck-embed"
data-id="edc88328c1d34c6da8d2fa9f004c57e8" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;p&gt;Thanks to all organizers for doing that, I really enjoyed my time at the
conference.&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="en" dir="ltr"&gt;Full room for &lt;a href="https://twitter.com/eloycoto?ref_src=twsrc%5Etfw"&gt;@eloycoto&lt;/a&gt; in the &lt;a href="https://twitter.com/atlanticaConf?ref_src=twsrc%5Etfw"&gt;@atlanticaConf&lt;/a&gt;. A very top &lt;a href="https://twitter.com/hashtag/kubernetes?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#kubernetes&lt;/a&gt; talk! &lt;a href="https://t.co/Lr7U1UTAoL"&gt;pic.twitter.com/Lr7U1UTAoL&lt;/a&gt;&lt;/p&gt;&amp;mdash; Antón (@antonmry) &lt;a href="https://twitter.com/antonmry/status/1180443235304517634?ref_src=twsrc%5Etfw"&gt;October 5, 2019&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;&lt;p&gt;I also had the opportunity to moderate an Open Space around remote work, and it
was awesome. A lot of feedback and useful tips were shared.&lt;/p&gt;
&lt;blockquote class="twitter-tweet"&gt;&lt;p lang="es" dir="ltr"&gt;Lleno en el Open Space sobre trabajo remoto en &lt;a href="https://twitter.com/atlanticaConf?ref_src=twsrc%5Etfw"&gt;@atlanticaConf&lt;/a&gt; con &lt;a href="https://twitter.com/eloycoto?ref_src=twsrc%5Etfw"&gt;@eloycoto&lt;/a&gt; moderando. &lt;a href="https://t.co/F2IvfIlesc"&gt;pic.twitter.com/F2IvfIlesc&lt;/a&gt;&lt;/p&gt;&amp;mdash; Orestes Carracedo (@OrestesCA) &lt;a href="https://twitter.com/OrestesCA/status/1180483979213971457?ref_src=twsrc%5Etfw"&gt;October 5, 2019&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;</content><category term="blog"></category><category term="cilium"></category><category term="kubernetes"></category><category term="network policies"></category><category term="security"></category></entry><entry><title>Propostas a Vigotech</title><link href="https://acalustra.com/propostas-a-vigotech.html" rel="alternate"></link><published>2019-10-15T16:00:00+02:00</published><updated>2019-10-15T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2019-10-15:/propostas-a-vigotech.html</id><summary type="html">&lt;p&gt;Co drama do ocurrido da Operación Morriña -e todo o que se montou despois-
varias debilidades sairon a relucir no ámbito de Vigotech. O 12 de Setembro
mandei un email a lista de organizadores con propstas claras de facer, o que
para min, sería unha mellor organización.&lt;/p&gt;
&lt;p&gt;Creo que sería …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Co drama do ocurrido da Operación Morriña -e todo o que se montou despois-
varias debilidades sairon a relucir no ámbito de Vigotech. O 12 de Setembro
mandei un email a lista de organizadores con propstas claras de facer, o que
para min, sería unha mellor organización.&lt;/p&gt;
&lt;p&gt;Creo que sería bo que este email fora público, axudaría a entender o que pasou e
as razóns polas que pasou, ao mesmo tempo, da visión do que pasa dentro de
Vigotech.&lt;/p&gt;
&lt;p&gt;Ao mesmo tempo, creo que é bo momento &lt;strong&gt;para desmarcarme totalmente de
Vigotech&lt;/strong&gt;. Quen me coñece sabe que son un rapaz con principios, que non me
gusta errar, e que non me gusta ter que pedir perdón, gústame que a xente cando
confía saiba que non vou cometer un erro.&lt;/p&gt;
&lt;p&gt;Moitas foron as chamadas que tiven que responder por cousas que se fixeron na
comunidade, dende Meetups que acabaron tarde, problemas de organización con
espazos, tratar de defender o indefendible, e ver como non cuidamos de quen nos
cuida.&lt;/p&gt;
&lt;p&gt;Eu son dos que pensa: &amp;quot;quen non suma, resta!&amp;quot; Agora mesmo, en Vigotech resto,
e segundo chegou a min, non pouco! O meu soño nunca foi molar na comunidade,
-nesta ou en ámbito nacional-, meu soño sempre foi que este recuncho fora algo
mellor, espero que o que fixen axudara.&lt;/p&gt;
&lt;p&gt;Graciñas por todo.&lt;/p&gt;
&lt;p&gt;Correo enviado a lista de organizadores, con formato para axudar a lectura.&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Rapaces,&lt;/p&gt;
&lt;p&gt;Fai uns días tivemos o drama da operación morriña, este drama creo que causou, e
demostrou, unha certas debilidades como organización. Creo que agora, pasada a
PulpoConf, deberíase ver como atallalas. Deixo unha serie de propostas que creo
que son de interese para que faledes na seguinte reunión.&lt;/p&gt;
&lt;div class="section" id="ofertas-de-traballo-integracion-de-empresas"&gt;
&lt;h2&gt;Ofertas de traballo, integración de empresas:&lt;/h2&gt;
&lt;p&gt;Foi un  tema que se tocou, e que se falou, e no que se acordou que Vigotech non
debería ter ningún tipo de colaboración, permiso para usar Vigotech en proxectos
que tiveran un fin comercial.&lt;/p&gt;
&lt;p&gt;Creo que despois da Operación Morriña todo cambia, un proxecto con fin
económica, que inda que bonito - e ilusiónante- demostrou unha serie de
problemas en como se ven as cousas dentro de Vigotech. Para min, o principal
problema, dixémoslle a empresas amigas de todos os eventos de Vigo que non se
podía, e un día -cunha forte campaña de publicidade-  apareceu o logo nun sitio,
que para min, non debería estar. Que agora esta -inda que estou en desacordo-,
pero cun texto moito mais acertado que o inicial.&lt;/p&gt;
&lt;p&gt;Eu son dos que pensa, que non hai nada mellor que ser querido na casa, e creo
que as empresas -da casa- deberían ser queridas. Neses días, por un erro de
comunicación, a miña impresión (e de algunha xente que se manifestou en
privado), fallamos a quen no se lle tiña que fallar, aos que algún día confiaron
en nós sen saber que iría a pasar con todos os nosos grupos.&lt;/p&gt;
&lt;p&gt;Si, Vigotech non tiña acordos con empresas, pero todo o mundo fala coas mesmas
empresas, e moitas delas, de forma recorrente, axudaron, de moitas e diferentes
formas, non só falo de cartos.&lt;/p&gt;
&lt;p&gt;Creo que unha boa forma de remedialo, e voltar ao que se falou das ofertas de
traballo, e poder ofrecerlle as empresas un listado de ofertas de traballo de
empresas “amigas de Vigotech”. Para facer este listado, pódense poñer unhas
normas, eu propoño as seguintes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Para colgar a oferta en Vigotech, unha empresa ten que &lt;strong&gt;aportar&lt;/strong&gt; antes a
comunidade, para aportar eu entendo que podemos falar das seguintes opcións:&lt;ul&gt;
&lt;li&gt;Opción de por unha oferta: Un empregado de esa empresa da unha charla (nalgúns dos grupos de Vigotech) nos últimos 6 meses. O prazo de validade da oferta remata ao cumprir os 6 meses da charla.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Opción de por dúas ofertas: a empresa colabora economicamente cun evento,
neste caso a oferta porase un mes antes do evento, e terá unha validez de dous
meses.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Temos o drama das ofertas de traballo malas, creo que temos que ter unhas
normas, para que non pase como pasou con xente que aportou unha oferta de
traballo ao canal, e logo marchou do slack escaldada, para min as normas de
poder publicar poden ser:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Ten que ter un rango salarial.&lt;/li&gt;
&lt;li&gt;O rango salarial, non pode ser cunha diferencia mais grande do 20%, así evitamos as ofertas de 20-50K.&lt;/li&gt;
&lt;li&gt;A oferta ten que ter base en Vigo ou 40km a redonda.&lt;/li&gt;
&lt;li&gt;Ten que ter uns requisitos ben estipulados, que o comité pode validar.  (Falarei mais tarde do comité)&lt;/li&gt;
&lt;li&gt;En temas de campañas de anuncios, eu creo que se pode facer o seguinte:&lt;ul&gt;
&lt;li&gt;Terá unha sección na web onde van aparecer todas.&lt;/li&gt;
&lt;li&gt;Un chío para cando se publique, nun horario normal.&lt;/li&gt;
&lt;li&gt;Unha mensaxe no canal xeral do slack de Vigotech.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Creo que con isto gañase nos seguintes puntos:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;As empresas, se queren, poden beneficiarse de Vigotech, están obrigadas a
colaborar previamente, nos somos claros, isto ten que ser un win-win para
todos.&lt;/li&gt;
&lt;li&gt;A comunidade sae beneficiada, se as ofertas teñen tirón, o final terase menos
problema para encontrar charlas&lt;/li&gt;
&lt;li&gt;A oferta será mandada en formato PR a web de Vigotech, polo que non temos que
traballar nesa parte. So en eliminalas.&lt;/li&gt;
&lt;li&gt;Os que dan as charlas poden pedir un referral na empresa, polo tanto saen
gañando.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;FAQ:&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Eloy, a empresa XXX é unha cárnica, consultoría e non deberíamos publicar
ofertas deles! Certo, a min as empresas cárnicas non me gustan, tampouco as
axencias de emprego, pero aquí non falamos de que empresa X mole ou non, estamos
falando de que somos neutrais e so teñen que colaborar con nos, que elas
colaboraron con nós, e que importa é que eles tamén melloran o ecosistema, eu
son dos que penso que todo se pode cambiar. Se alguén é capaz de aportar unha
charla a Vigotech, esa empresa, inda que pode ser mala, algo xa esta cambiando.&lt;/p&gt;
&lt;p&gt;Volvo a dicir, isto para min, estaba ben como estaba, pero ca entrada de
operación morriña creo que un dos nosos fundamentos cambiou, e eu creo que se o
fundamento cambiou, Vigotech ten que ver a capacidade de restauralo ou de facer
do erro unha virtude.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comite-de-direccion"&gt;
&lt;h2&gt;Comite de dirección&lt;/h2&gt;
&lt;p&gt;Outra das cousas que quedou clara é que as decisións de Vigotech non son fáciles
de tomar, moita xente cunha opinión e faixe moi difícil saber con quen contactar
nun caso como o citado.&lt;/p&gt;
&lt;p&gt;Eu teño claro que Vigotech non significa para todos o mesmo, para min é todas
esas reunións nas empresas nas que eu falaba do bo que era Vigotech, para outras
persoas poden ser a xente que viña as meetups que organizaba, para outros pode
ser o bo traballo feito co deseño do logo, estou seguro que cada un ten un
sentimento diferente.&lt;/p&gt;
&lt;p&gt;Creo que vai sendo hora de que Vigotech teña un comité de dirección, que os que
organizan podan elixir a catro representantes que se encarguen deste tipo de
cousas, a miña idea é propoñer o proceso da CNCF, que elixe cada ano uns
membros, e estes duran 2 anos, a idea sería tal que así:&lt;/p&gt;
&lt;p&gt;2019: Novo comité formado por 4 persoas, 2 estarán dous anos, as outras un ano.
2020: Dúas persoas do comité teñen que saír, e dúas entran para dous anos.
2021: Os dous membros mais vellos marchan, e entran outros dous.&lt;/p&gt;
&lt;p&gt;Desta forma conséguese que este comité poda tomar as decisións, tomar un acordo
estas 4 persoas, e cando teñan unha resolución mandáselle un correo aos
organizadores onde teñan que decidir si ou no, se é o número de negativos  é
superior ao 30% dos organizadores, entón tocará discutilo. Este prazo pode ser
de 5 días laborais, polo que se non se vota ou non sae que non, pois dáselle
para adiante a opción que o comité decida.&lt;/p&gt;
&lt;p&gt;Como actuaría o comité?&lt;/p&gt;
&lt;p&gt;Vou facer unha analoxía co pasado na Operación Morriña, non é ningún ataque a
ninguén, e autocrítica. Cando chegou iso, segundo o que comentou Orestes era tal
que así:&lt;/p&gt;
&lt;blockquote&gt;
Con David hablé personalmente, y lo que le trasladé es: esto es cosa de
todo VigoTech, lo hablamos en la lista de organizadores
En la lista de organizadores decidimos que nos parecía bien apoyar la
iniciativa, y que nuestro mensaje era. &amp;quot;Si te vuelves a Galicia, esto ya no
es un desierto. Hay mucha comunidad, no estarás solo/a.&amp;quot;
El diff con el mensaje final ha sido:
Parece que solo hablan de Coruña
Parece que colaboramos con Corunet.
En la web lo dice, que Corunet es solo la primera empresa, que es una
iniciativa a la que se unirán mas.
Esto no es lo que habíamos acordado.
Ahora tenemos en la lista una propuesta  para aclarar el texto, y podemos
enviar el texto que nos dé la gana.
Abramos hilo para discutir el texto en concreto aquí&lt;/blockquote&gt;
&lt;p&gt;O comité nesta situación debería pensar:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cal é o beneficio de Vigotech?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;O retorno de galegos, poñer en valor esta terra e dicir que non están sós.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cal é o fin de David Bonilla/Corunet?&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;Claramente a inversión para facer unha boa campaña para que Corunet e Manfred
poidan fichar, na que os dous queren poñer ofertas de traballo. Teñen intención
de facelo global? si, cal é o primeiro obxectivo? que a campaña atraia talento a
Corunet.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Como o mirara a comunidade?&lt;/strong&gt;
ben, todo o mundo ten amigos fora, estou seguro que algunha xente queres que
volva!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Como se poden sentir as empresas que colaboraron cos grupos de Vigotech?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Neste caso as empresas comentóuselles que ningunha relación directa coas
empresas, tampouco as ofertas de traballo, igual isto levanta un fundamento de
Vigotech e alguén pode sentirse molesto. O mesmo a ver un logo de Vigotech nunha
landing dunha empresa, etc..&lt;/p&gt;
&lt;p&gt;Unha vez feito este traballo(polo comité), e valorando que gaña e perde
Vigotech(Como marca), o que propón, a comunidade de desenvolvedores, e as
empresas que colaboraron, pódese facer un resume e mandalo os organizadores,
eles poden ratificar o denegar a decisión do comité.&lt;/p&gt;
&lt;p&gt;O final, isto solucionaría os seguintes problemas:&lt;/p&gt;
&lt;p&gt;David Bonilla sentiuse atacado por min, volvo a dicilo, foi mais tristeza por
fallar aos nosos que ataque. Se temos un comité de dirección, se alguén ten
dubidas sabe que hai catro persoas as que contactar antes de dar un paso en
falso, volvo a dicilo, tiña que facer unhas chamadas antes de por o chío, pero a
tristeza actúa así :-(&lt;/p&gt;
&lt;p&gt;Claramente díxose si, igual pecouse de pouca visión crítica e logo co texto
inicial todo era unha mala mensaxe, deuse un paso en falso e logo volveuse
atrás. Neste caso temos un marco no que pensar para toda a comunidade, que
entendo axudará para que este tipo de situacións non volvan suceder.&lt;/p&gt;
&lt;p&gt;Cónstame, que a comunicación durante o proceso foi malo, moita xente, etc.. con
comité todo é mais rápido e sinxelo para todos, pero se te chega unha landing o
sábado pola tarde de Agosto pouco se iba a solucionar...&lt;/p&gt;
&lt;p&gt;Eu creo que é un paso natural facer algo deste estilo. E volvo a dicir, isto non
é un ataque a ninguén, colectivamente fallouse e isto é o que temos que valorar,
que faga a analoxía co que pasou non significa que teña ningún tipo de rancor
polo sucedido, eu fun o primeiro que fallei! inda que continuo pensando que o
erro do mensaxe por parte de Manfred foi claro, e a resposta dada, non foi
respectuosa, eu non fun o único que quedou cabreado co asunto, quizais o único
que alzou a voz.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="comparte-vigotech"&gt;
&lt;h2&gt;Comparte-VigoTech&lt;/h2&gt;
&lt;p&gt;Unha das cousas que mais me molaba en Isovalent era que os xoves tiñamos unha
sesión que lle chamabamos isoshare, eran 30 min de chamada na que uns falabamos
de tecnoloxía, algún update de clientes ou tips varios.&lt;/p&gt;
&lt;p&gt;Creo que podemos exportar iso a facer unha videoCall unha mañá cada 15 días na
que a xente poida comentar cousas de tecnoloxía, o último de WASM, un update en
Kubernetes, etc.. Algo que se todo o mundo fai en remoto pode coller certa
tracción, eu creo que a única condición que poño é que non se poñan despois no
Youtube, ao final o importante é que a xente se una e pregunte. Isto podemos
velo, pero se queredes eu podo ver a opción de lideralo os primeiros meses ata
que colla algo de tracción.&lt;/p&gt;
&lt;p&gt;E isto é todos rapaces, volvo dicilo, non é ningún ataque a ningunha persoa polo
pasado. Ao final, creo que se fallou por moitos lados, eu creo que disto só
podemos aprender!&lt;/p&gt;
&lt;p&gt;PS: No meu caso, ademais de aprender, tamén levo unha ducia de horas de risas a
conta de que son un minifundista, creo que non recordo pásalo tan ben en moito
tempo :-)&lt;/p&gt;
&lt;p&gt;Cañas cando queirades :D&lt;/p&gt;
&lt;p&gt;Apertas!&lt;/p&gt;
&lt;hr class="docutils" /&gt;
&lt;p&gt;Fin do correo, espero que a todo o mundo lle quede claro o que pasou.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="operaracion morriña"></category><category term="vigotech"></category></entry><entry><title>Proyecto Morriña e o dramita de colaborar con empresas</title><link href="https://acalustra.com/proyecto-morrina-e-o-dramita-de-colaborar-con-empresas.html" rel="alternate"></link><published>2019-08-26T12:00:00+02:00</published><updated>2019-08-26T12:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2019-08-26:/proyecto-morrina-e-o-dramita-de-colaborar-con-empresas.html</id><summary type="html">&lt;p&gt;Onte aquí, un minifundista galego, xa a &lt;a class="reference external" href="https://twitter.com/eloycoto/status/1165559874677329920"&gt;liou parda en twitter&lt;/a&gt;. Onte lanzouse a web
de &lt;a class="reference external" href="https://operacionmorriña.com/es/"&gt;Operación Morriña&lt;/a&gt;, unha iniciativa
privada e cun claro fin económico, que quere atraer talento a Galicia. A idea,
en si, esta xenial, apadriñada pola empresa Coruñesa Corunet, e pola startup
madrileña Mandfred Tech.&lt;/p&gt;
&lt;p&gt;Coñezo …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Onte aquí, un minifundista galego, xa a &lt;a class="reference external" href="https://twitter.com/eloycoto/status/1165559874677329920"&gt;liou parda en twitter&lt;/a&gt;. Onte lanzouse a web
de &lt;a class="reference external" href="https://operacionmorriña.com/es/"&gt;Operación Morriña&lt;/a&gt;, unha iniciativa
privada e cun claro fin económico, que quere atraer talento a Galicia. A idea,
en si, esta xenial, apadriñada pola empresa Coruñesa Corunet, e pola startup
madrileña Mandfred Tech.&lt;/p&gt;
&lt;p&gt;Coñezo varios casos de xente que voltou, sei que é unha prioridade para moitas
empresas de aquí, e mais, recordo sentarme cun empresario da zona, para cando
saliu o Brexit, para que lle dixera que cousas podería facer para voltar xente
que estaba en Londres.&lt;/p&gt;
&lt;p&gt;Miña tristeza viu, cando na landing da páxina aparecía o seguinte texto, co logo
de VigoTech.&lt;/p&gt;
&lt;img alt="Operación morriña" class="align-center" src="img/manfred_morrinha.png" /&gt;
&lt;p&gt;Cando foi que se fundou &lt;a class="reference external" href="https://vigotech.org"&gt;Vigotech&lt;/a&gt;, unha das premisas
era que non tivera integración con ningún tipo de empresa externa, era un
metagrupo para dar cabida a todas as empresas, cunha serie de regras, pero que
non se facía publicidade con elas, e tampouco colaboracións, calquera cousas que
tivera un fin económico debería ser tratado polo grupo que estaba interesado (No
meu caso  A Industriosa e Vigolabs). O paragrafo, segundo eu leo, dicía que
Vigotech esta interesada en que a xente volva a traballar a Corunet, que eu
quero que a xente volva, pero a Corunet ou calquera outra empresa, esta
iniciativa non é de comunidade, é de ámbito privado cun claro fin económico.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update&lt;/strong&gt;: Dous logos xa non estan, o de Vigotech, e o a conferencia PulpoConf.&lt;/p&gt;
&lt;div class="section" id="non-se-poden-criticar-a-empresas-privadas-que-colaboran"&gt;
&lt;h2&gt;Non se poden criticar a empresas privadas que colaboran&lt;/h2&gt;
&lt;p&gt;Un dos chíos que me chegou onte, claro por facer cousas, xa estas libre de
críticas, inda que un dos valores dos que se fundou Vigotech este quebrado, ese
logo asociado a unha empresa era o que non se quería dende o inicio.&lt;/p&gt;
&lt;p&gt;Corunet, tampouco foi unha empresa que colaborara activamente con Vigotech, non
recordo ver meetups co seu patrocinio, unha entrada no seu blogue falando de
Vigotech, ou das meetups de Vigo, iso foi o que mais me chocaba, que unha
empresa que non recordo que colaborara co ecosistema local, usara o noso logo.
Si que recordo que colaborara con outros eventos, pero cos de Vigotech, nunca.&lt;/p&gt;
&lt;p&gt;Para min, Corunet podería facer moito mellor marketing, se tivera unha sección
onde puxera, estas son as charlas que deron os nosos empregados a través dos
múltiples eventos que temos en Galicia, iso si que é bo marketing e unha moi boa
colaboración coa comunidade! Ou dicir, se entras en Corunet, regalámosche a
entrada para a caralluda AtlanticaConf, pero non, puxeron o logo dicindo que
bonito é o todo.&lt;/p&gt;
&lt;p&gt;Bernal comentou que non colaboraba agora, que xa colaborarían. Paréceme
correcto, se inda non colabórache, e mola, despois de tantos anos, é unha pena,
o traballo na comunidade técnica non naceu onte, Vigotech naceu xa fai anos.  Na
primeira hackathon que organicei unha startup viu a pedir facer un speech para
poder contratar, sen cartos, díxenlle que si, que non problema. Nas seguintes
edicións, nunca quixeron colaborar, pero sempre aparecían polo café para dicir o
ben que traballaban. Dende aquela, sempre valoro os feitos, nunca o futuro.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="permiso-para-poner-o-logo"&gt;
&lt;h2&gt;Permiso para  poñer o logo&lt;/h2&gt;
&lt;p&gt;David Bonilla, de Manfred Tech, comentou que o logo si que estaba pedido, e que
estaba posto dado que Vigotech o autorizou, isto é correcto. Tamén o que me
chegou, e o que se falou no chat de Vigotech, e que o tema vendeuse que sería a
ser unha web de ofertas de traballo de calidade Galegas e globais, non unha
sección de ofertas tan focalizada nunha soa empresa a través dunha soa empresa
de recrutamento.&lt;/p&gt;
&lt;p&gt;Que volvo a dicilo, o proxecto é fermoso e apaixonante, pero dende o meu punto
de vista, faltou parte de comunicación en vender un proxecto de comunidade que
non é tal.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="facer-comunidade-vivir-da-comunidade"&gt;
&lt;h2&gt;Facer comunidade, vivir da comunidade&lt;/h2&gt;
&lt;p&gt;Eu con 16 anos organizaba carreiras de slot, con 18 empecei a estar nas cunetas
dos rallyes axudando, con 20 xa estaba con tarefas dentro dos rallyes. Un día un
bo amigo Víctor (59 anos) díxome, Eloy, nos rallyes traballa demasiada xente de
gratis e algunha xente gaña algúns cartos, os que gañan cartos sempre teñen
algún interese, e iso hai que xestionalo ca maior prudencia posible, a corda é
tan fina que pódese romper en calquera momento.&lt;/p&gt;
&lt;p&gt;Para min, David fixo, e fai, un traballo enorme pola comunidade informática
española. O seu incansable poderío e constancia e admirábel, e son moitas as
cousas boas que se poden dicir del! Agora a súa principal liña de traballo é o
recrutamento de talento técnico, creou unha comunidade de mais de 10.000
Tarugos, a liña de separación do seu traballo é moi fina.  Quen fai cousas
equivocase! para min ese logo estaba mal posto, polo fin do proxecto, pero cada
un ten unha opinión, eu expoño a miña con respecto ao todo mundo, cada un terá a
súa opinión ao respecto. (As miñas desculpas xa as ten)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="faq"&gt;
&lt;h2&gt;FAQ:&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Eloy, sabes o difícil que é montar algo?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Si, igual non me coñeces, traballei en Vigo, montei meetups, hackathons de
centos de persoas, fun participe do primeiro medialab de Vigo, propuxen un plan
tecnolóxico marítimo as catro organizacións de Vigo, o que ocasionou varios
problemas que algún día contarei.&lt;/p&gt;
&lt;p&gt;Ademais de iso, tamén organicei rallyes, campeonatos de slot, axudo a rapaces
cos proxectos de fin de carreira, poño en contacto a empresas cando algún
comenta que ten unha deficiencia en certas cousas. Sei o traballo que da montar
algo de este tipo e o difícil que é facer comunidade.&lt;/p&gt;
&lt;p&gt;Quen me coñece sabe que non paro de facer cousas para a comunidade, e mais, o
noso neno ten algo menos de nove meses, meus amigos teñen unha aposta para ver
cando me meto no AMPA do colexio, se alguén lle preocupa esta terra é a min.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Eloy, o problema so viu de Vigo, es un localista?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Non, e mais, son natural de Mos, o principal concello afectado polo localismo
aferrimo do amado líder de Vigo, son moi contrario o localismo. Cando podo axudo
as comunidades de outros sitios, este ano despraceime a Coruña a dar unha charla
para axudar a un bo amigo, e en Outubro darei dúas mais en Coruña, este ano non
din unha soa charla en Vigo. A xente de Coruña sempre me axudou, e a miña etapa
de vivir e traballar na Coruña é das mais bonitas da miña vida.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Eloy, que mal esta que colaboren as empresas?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nada, eu son dos que mais dixo para que Vigotech tivera empresas, creo que é
esencial ter unha certa integración e que a comunicación sexa fluída, no seu día
decidiuse que fora separado, e eu nos grupos aos que pertencía tratei de ter
integración con empresas, e mais, moitos me criticaron por facer demasiadas
cousas con empresas.&lt;/p&gt;
&lt;p&gt;O detalle do logo, e que empresas que colaboraron fortemente con Vigotech e
grupos, miraron como unha empresa de Coruña o usaba e eles non podían, a miña
tristeza viña mais encamiñada por estas empresas que polo uso de Corunet do
logo.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="paloma-barreiro-e-david-pombar"&gt;
&lt;h2&gt;Paloma Barreiro e David Pombar:&lt;/h2&gt;
&lt;p&gt;Vou facer unha sección especial a estas dúas persoas, as que admiro, por todo o
que fixeron pola comunidade galega, pero &lt;a class="reference external" href="https://twitter.com/pombita/status/1165680981937991680"&gt;este chío&lt;/a&gt; molestoume bastante.&lt;/p&gt;
&lt;img alt="David Pombar e Paloma Barreiro." class="align-center" src="img/david_pombar_paloma_barreiro.jpg" /&gt;
&lt;p&gt;O chío de Paloma, sen nome, pero ben adicado a min (E mais, eu non a sigo, e foi
un amigo o que me avisou) quedaba claro o que pensaba. Eu a Paloma por todo o
que fixo en startupgal, polo NosDay por levantar Vostok nada lle podo reprochar.
Creo que a comunidade faixe con humildade, para min ese chío ten de todo menos
humildade, pero bueno, cada un pode mellorar a comunidade como mellor lle
pareza. Ela segue tendo toda a miña admiración polo traballo que fixo e que esta
a facer.&lt;/p&gt;
&lt;p&gt;David contestoulle un link, para min desafortunado, se a Paloma teñolle
admiración a David Pombar soamente palabras de gratitude, cando montaba todo en
Vigo, non foi unha ou dúas chamadas as que lle din para pedirlle axuda,  moitos
dos emails que lle mandei viñeron de volta cun contacto que necesitaba para
facer unha meetup, patrocinio ou o que fora, moito do éxito de Vigotech foi
parte grazas a el. Responder a ese chío cun link onde se fala como as minorías
nazis, doeume, pero para el só teño palabras de agradecemento.&lt;/p&gt;
&lt;p&gt;(E si, que dixo Paloma que ese tweet non poñía Eloy Coto, que era algo xeral,
que de nada se ten que desculpar, pero a poucas palabras bo entendedor)&lt;/p&gt;
&lt;p&gt;Eu deixo de responder a todo isto, ao final o mais afectado e Orestes, esa
persoa que tanto bo fixo por esta terra que el apadriñou, eu creo que foi un
error na mensaxe, alguén se equivocou eu só puxen o meu punto de vista tratando
de ser o mais formal que puiden, recibir críticas é unha sorte!&lt;/p&gt;
&lt;p&gt;Volvo a repetilo, &lt;strong&gt;a idea de proxecto é xenial&lt;/strong&gt;, Corunet é unha empresa boa
(temos moitos amigos en común) e David Bonilla fixo, e fai, moitas boas cousas
pola comunidade técnica.&lt;/p&gt;
&lt;p&gt;E se alguén quere seguir falando disto, o meu teléfono é 678 09 67 20 e o meu
email: eloy.coto neste dominio, en público xa non contestarei nada mais, ao
final dánanos a todos. Desculpas a quen esta molesto, a miña intención era sacar
algo que non me pareceu ben, sen intentar caer en facer a crítica fácil, como
todos, eu tamén podo equivocarme :-)&lt;/p&gt;
&lt;p&gt;Abur!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="morriña"></category><category term="vigotech"></category><category term="manfred"></category><category term="corunet"></category></entry><entry><title>JQ functions, modules and dotfiles tips</title><link href="https://acalustra.com/jq-functions-modules-and-dotfiles-tips.html" rel="alternate"></link><published>2019-02-02T15:01:01+01:00</published><updated>2019-02-02T15:01:01+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2019-02-02:/jq-functions-modules-and-dotfiles-tips.html</id><summary type="html">&lt;p&gt;Over the last months I’m using quite a lot &lt;a class="reference external" href="https://stedolan.github.io/jq/manual/#DefiningFunctions"&gt;JQ&lt;/a&gt; custom functions and
&lt;a class="reference external" href="https://stedolan.github.io/jq/manual/#Modules"&gt;modules&lt;/a&gt;, If you need to deal
with the same JSON multiples times, maybe you need to dump this information
easily human-readable format.&lt;/p&gt;
&lt;p&gt;Due to my work on top of &lt;a class="reference external" href="https://kubernetes.io/"&gt;Kubernetes&lt;/a&gt;, I need to deal
with a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Over the last months I’m using quite a lot &lt;a class="reference external" href="https://stedolan.github.io/jq/manual/#DefiningFunctions"&gt;JQ&lt;/a&gt; custom functions and
&lt;a class="reference external" href="https://stedolan.github.io/jq/manual/#Modules"&gt;modules&lt;/a&gt;, If you need to deal
with the same JSON multiples times, maybe you need to dump this information
easily human-readable format.&lt;/p&gt;
&lt;p&gt;Due to my work on top of &lt;a class="reference external" href="https://kubernetes.io/"&gt;Kubernetes&lt;/a&gt;, I need to deal
with a lot of offline Kubernetes data, to debug issues from test results or
users environment, this means that I need to query the same JSON schema multiple
times, I also want to make my work faster, and here is where JQ plays a
remarkable role.&lt;/p&gt;
&lt;p&gt;For example, if you have the list of Kubernetes Pods in JSON (&lt;tt class="docutils literal"&gt;kubectl get pods &lt;span class="pre"&gt;-o&lt;/span&gt; json&lt;/tt&gt;) and you want to know if all  containers are ready for each pod, the
JQ query look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods -n kube-system -o json &lt;span class="p"&gt;|&lt;/span&gt; jq &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;.items[]|[ (.metadata.namespace+&amp;quot;:&amp;quot;+.metadata.name), ([.status.containerStatuses[].ready]|all)]&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app1-6f995955d9-7m8qr&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app1-6f995955d9-q9zxf&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app2-5b49d5dd9-fsmlf&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app3-645549cb84-f4phh&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This query is simple, but also is hard to remember, and finally, the next time
that you need to use that, you will try, at least few times, before you get the
desired result.&lt;/p&gt;
&lt;p&gt;JQ have the possibility to define functions, so that query can be translated to
a function, for example:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods -o json &lt;span class="p"&gt;|&lt;/span&gt; jq &lt;span class="se"&gt;\&lt;/span&gt;
   &lt;span class="s1"&gt;&amp;#39;def container_status: .items[]|[(.metadata.namespace+&amp;quot;:&amp;quot;+.metadata.name),([.status.containerStatuses[].ready]|all)]; container_status&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Is getting better, now you can write that function into ~/.jq where JQ is
looking for, and container status query is getting super simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods -o json &lt;span class="p"&gt;|&lt;/span&gt; jq &lt;span class="s1"&gt;&amp;#39;container_status&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app1-6f995955d9-7m8qr&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app1-6f995955d9-q9zxf&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app2-5b49d5dd9-fsmlf&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;default:app3-645549cb84-f4phh&amp;quot;&lt;/span&gt;,
  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This can be more legible than before, JSON perhaps is not the best format to
debug or quick lock, so jq output format can be used to make the output more
human-friendly, I’m a big fan of TSV format for shell, but also sh format is
good.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat ~/.jq
def container_status: .items&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="o"&gt;[(&lt;/span&gt;.metadata.namespace+&lt;span class="s2"&gt;&amp;quot;:&amp;quot;&lt;/span&gt;+.metadata.name&lt;span class="o"&gt;)&lt;/span&gt;,&lt;span class="o"&gt;([&lt;/span&gt;.status.containerStatuses&lt;span class="o"&gt;[]&lt;/span&gt;.ready&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;all&lt;span class="o"&gt;)]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods -o json &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;container_status| @tsv&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;default:app1-6f995955d9-7m8qr&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;default:app1-6f995955d9-q9zxf&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;default:app2-5b49d5dd9-fsmlf&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;default:app3-645549cb84-f4phh&amp;#39;&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;kubectl get pods -o json &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;container_status| sh&amp;#39;&lt;/span&gt;
default:app1-6f995955d9-7m8qr   &lt;span class="nb"&gt;false&lt;/span&gt;
default:app1-6f995955d9-q9zxf   &lt;span class="nb"&gt;false&lt;/span&gt;
default:app2-5b49d5dd9-fsmlf    &lt;span class="nb"&gt;false&lt;/span&gt;
default:app3-645549cb84-f4phh   &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;TSV is nice when you use with column commands, you can make a pretty table in
seconds, I have the following alias/function to be more productive, so jq
queries over the same JSON files are much simpler.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;function&lt;/span&gt; jqr&lt;span class="o"&gt;(){&lt;/span&gt;
    jq -r &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; column -t
&lt;span class="o"&gt;}&lt;/span&gt;

$ kubectl get pods -o json &lt;span class="p"&gt;|&lt;/span&gt; jqr &lt;span class="s1"&gt;&amp;#39;container_status|@tsv&amp;#39;&lt;/span&gt;
default:app1-6f995955d9-7m8qr  &lt;span class="nb"&gt;false&lt;/span&gt;
default:app1-6f995955d9-q9zxf  &lt;span class="nb"&gt;false&lt;/span&gt;
default:app2-5b49d5dd9-fsmlf   &lt;span class="nb"&gt;false&lt;/span&gt;
default:app3-645549cb84-f4phh  &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After a while, your queries will look more powerfull, and your life will be
easier.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;def cep_status:
    &lt;span class="o"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Name&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;EpID&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;IdID&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;Ingress&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;Egress&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;IPv4&amp;quot;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;IPv6&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;])&lt;/span&gt;, &lt;span class="o"&gt;(&lt;/span&gt;
    .items&lt;span class="o"&gt;[]&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;.metadata.name, .status.id, .status.identity.id,
    .status.policy.ingress.enforcing,
    .status.policy.egress.enforcing,
    .status.networking.addressing&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;.ipv4,
    .status.networking.addressing&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;.ipv6&lt;span class="o"&gt;])&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; @tsv&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can see all my examples &lt;a class="reference external" href="https://github.com/eloycoto/dotfiles"&gt;here&lt;/a&gt;, and here an example output that I use all
days:&lt;/p&gt;
&lt;img alt="JQ modules example" class="align-center" src="img/jq.png" /&gt;
&lt;p&gt;Hope you enjoy it!&lt;/p&gt;
</content><category term="blog"></category><category term="jq"></category><category term="kubernetes"></category></entry><entry><title>Six years working remotely, the good and the bad</title><link href="https://acalustra.com/six-years-working-remotely-the-good-and-the-bad.html" rel="alternate"></link><published>2019-01-06T15:01:01+01:00</published><updated>2019-01-06T15:01:01+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2019-01-06:/six-years-working-remotely-the-good-and-the-bad.html</id><summary type="html">&lt;p&gt;I always wanted to write this post, but I also wanted to wait until I have
enough experience with different companies to share it,  be able to explain in
why I struggled, what I did right and what I did wrong. As you may have read in
many places, working …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I always wanted to write this post, but I also wanted to wait until I have
enough experience with different companies to share it,  be able to explain in
why I struggled, what I did right and what I did wrong. As you may have read in
many places, working remote can be fantastic, &lt;strong&gt;but people use to forget about
the pain points.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Working remotely is not the same as working from home, but when someone starts
working remotely, the first idea usually is working from home, but before even
try, you should consider a few things:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;What is your work schedule, when are your calls?&lt;/li&gt;
&lt;li&gt;Do you have a good internet connection?&lt;/li&gt;
&lt;li&gt;Do you have a separate office in your home?&lt;/li&gt;
&lt;li&gt;Are you mentally prepare to take this challenge?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When I started working from home, I used to work from my living room, and that
was an awful idea. Each time I had a call, someone entered the living room and
made noise. When you are in this situation, things are hard because it depends
on the maturity of the team if that is valid or not.&lt;/p&gt;
&lt;p&gt;When I came back to
&lt;a class="reference external" href="https://www.google.com/destination?q=galicia&amp;amp;client=firefox-b-ab&amp;amp;site=search&amp;amp;output=search&amp;amp;dest_mid=/m/03cb8&amp;amp;sa=X&amp;amp;ved=0ahUKEwjdzq2PwfzeAhWB26QKHQMmBT8Q6tEBCDEoBDAA"&gt;Galicia&lt;/a&gt;,
I set my office in a spare room at home, having an office allowed me that
everybody at home knows that I’m working and nobody should bother me. I also
highly recommend to avoid working from the living room because that will helps
you to forget about work and spend time with your family.&lt;/p&gt;
&lt;p&gt;One of the good things that I made in these years is having a pre-defined work
schedule. In remote, you always feel that you don’t deliver enough and it is
super easy to end up being depressed. In all these years I tried to be as close
as possible to my wife work schedule, so it’s easy to work only 8-10 hours per
day, plus I have the luck to have lunch at home with her so I can interact with
someone at my lunchtime.&lt;/p&gt;
&lt;p&gt;Additionally, social life can be super challenging, when I worked for London
(almost same time zone), my social life happened when I finish my work, that use
to be around 18:00. After 18:00 was my social time and I could go to the gym,
run, attend to meetups or any other event without issues, likewise all close
people knew that I finish around 18:00.&lt;/p&gt;
&lt;p&gt;If you work with EDT timezone is ok, you can sync a few hours with them easily,
as your 18:00 are they 12:00, so you can sync without effort for more than 3
hours, maybe one day you need to work a bit more, but it’s ok. If you work for
PST timezone things are harder, the main reason is that your 18:00 are their
9:00 am, so to sync with them you need to shift a few hours and maybe you lost
part of your social life.&lt;/p&gt;
&lt;p&gt;The way that is working for me, I keep my social events/family errands on two
days per week, and try to keep three days sync more than two hours with PDT
timezone colleagues, that is the best way for my family, but I also know people
that prefer to work in the night, so the timezone can be a perk for them! The
main point, &lt;strong&gt;you should consider the timezone and the life that you want to
have for your family.&lt;/strong&gt;&lt;/p&gt;
&lt;img alt="Baiona - Galicia" class="align-center" src="img/baiona.jpg" /&gt;
&lt;div class="section" id="frustration"&gt;
&lt;h2&gt;Frustration&lt;/h2&gt;
&lt;p&gt;Yes, you heard about that, and it will happen to you, I still don’t know a guy
that work 100% remote and never got frustrated at any time, in my experience,
there are three types:&lt;/p&gt;
&lt;div class="section" id="feeling-alone"&gt;
&lt;h3&gt;Feeling alone&lt;/h3&gt;
&lt;p&gt;One of the harder things is to set boundaries at work, if you don’t have it,
you will never have free time for taking a beer with a friend, do some exercise
or enjoy! I use to take coffee/lunch with some friends and I try to keep my
friendship relations up to date. The main problem here, if you don’t do this,
after six months you’ll feel lazy to be out of home and problems will start.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Friday beers(Estrella Galicia) time!&lt;/strong&gt; I used to do this in my former company
and I loved it. Each Friday before leaving we grabbed a beer, and we did some
pair-programming, fix something small for the time that we drank the beer. In
that time, we did simple tasks or even spoke about other company related
things. That time was super dope for me because I can have more context of what
happens in the company and I can share my issues. I highly recommend this one!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="feeling-undervalued"&gt;
&lt;h3&gt;Feeling undervalued&lt;/h3&gt;
&lt;p&gt;This is super hard to know, how do you know if no one takes care of what you do
in your daily task? My advice here will be to do some lateral thinking, &lt;strong&gt;are we
doing the right job to make our work visible to others?&lt;/strong&gt; This is the root
thing, each time that we add some value to the company we need to make sure that
the management and the team know that, share improvements in the company
announcement system, etc.. this helps a lot. (I use to do terrible at this one)&lt;/p&gt;
&lt;p&gt;After that, time to time, you need to speak to someone that it is not your
direct manager (or be in your team) and ask a question about something that you
did, if they know what you did in the last weeks, that means that you are
adding value, but without the day-day communication in the office this is super
hard to know.&lt;/p&gt;
&lt;p&gt;One of the perks that I currently have is a monthly 1:1 with the CEO, that helps
me to ask questions about the company, know If I am in the right direction and
be able to know if I’m doing right. I'm sure that the CEO isn't the right
person, but someone that it’s not your direct manager is super cool to have.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="feeling-attacked"&gt;
&lt;h3&gt;Feeling attacked&lt;/h3&gt;
&lt;p&gt;This especially if you work with Pull Requests, it’s a usual thing that
developers are too rude in the PR comments, and I think that the main problem is
that developers use to think in binary, too many tech books and no a lot of
philosophy books! Sadly, nothing in a short-term can be done, teaching and
learning as a community(&lt;a class="reference external" href="http://modernagile.org/"&gt;Modern agile&lt;/a&gt; is something
good to read/listen). The only advice that I can provide is that you should
listen “&lt;em&gt;La Macarena&lt;/em&gt;” meanwhile you’re reading the review of a PR, and don’t
consider PR comments as attacks.&lt;/p&gt;
&lt;p&gt;Another thing is those team members that make jokes during other problems; Slack
added too many emoji or gifs! If you have an outage and someone is adding a
party reaction in slack, you can feel attacked (or a resource) but  maybe your
colleague does not know that someone is having hard times! But as I said, I think
that tech people are too tech and empathy is not developers strong points, my
solution, I use to fix the issue and take the easy path.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="keep-learning"&gt;
&lt;h2&gt;Keep Learning&lt;/h2&gt;
&lt;p&gt;Consequently, to not be in the office, there is another hard topic, what is new?
How to improve your skills? What is the new language used by other teams?  When
you are in a shared space is easy that someone says that went to a meetup and
they explain a new technology, this will not happen when you work from home.  In
these years I always follow a rule, &lt;strong&gt;each day I allocate fifteen minutes to
learn something&lt;/strong&gt;, and try to keep my knowledge up to date. For example, reading
open-source projects issues, reading how X project is doing the test, how to use
the debugger, etc.. This fifteen minutes learning slot help me to learnt Golang,
write better tests, improved my vim skills, etc.. but keep in mind that need to
be 15 minutes every day, I use to do this before getting lunch.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="financials"&gt;
&lt;h2&gt;Financials&lt;/h2&gt;
&lt;p&gt;This is a hard topic, and super painful! The first issue that you may work for
an abroad company, and the type of contract can be an issue; there is a good
&lt;a class="reference external" href="https://news.ycombinator.com/item?id=17022563"&gt;summary&lt;/a&gt; from Mitchell
Hashimoto about the legal implications and company issues, you should read it!
I’ll mention a few things here:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You’re a contractor:&lt;/strong&gt; that means that you have more work, each month you need
to deal with invoices and each quarter with taxes; also you should pay any
external tax consultant to deal with that. On the other hand, I would add
liability insurance, just if something wrong happens. Another bad thing, if you
work for a startup, it’ll be difficult to have stock options.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;About equipment&lt;/strong&gt;, I always followed the $1.5K rule, that means that I
reserved every year that money for things needed in my daily job, like screen,
desk, chair, keyboard, etc.. This depends of your company rule, but I always
feel embarrassed to ask for $400 to buy a desk for my house. Another important
thing, you need to buy a good microphone and camera, have a proper
video-conferencing solution, and be sure that the lighting in your office is ok,
if not people will think that you’re in a cave and will make difficult to work
with you.&lt;/p&gt;
&lt;p&gt;Another thing that you should consider is to have a proper internet connection,
from home you can’t work with your $20 DSL, that use to be super shitty
connections and you will need a proper $80 fibre cable and a good wifi router.
I also have a backup 4G connection in my router, just because I’m a bit
paranoid!&lt;/p&gt;
&lt;p&gt;If you work from home, you should also consider the heating and the AC, when
you work in the office you don’t spend all the time at home, so you don’t need
to use the heating 24 hours. My bills are double from the day that I started to
work from home. I also recommend that your office/spare room have an individual
heating/AC so you’ll save money.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tips-if-you-work-with-remote-people"&gt;
&lt;h2&gt;Tips if you work with remote people&lt;/h2&gt;
&lt;p&gt;If you working from an office, do you enter sit at your desk and don’t speak
with anyone? I don’t think so! If you work with a remote team, please, when you
open a chat, say hello! Just a “hey mate, are you ok? I need …” if not &lt;strong&gt;your
colleague will feel like a resource&lt;/strong&gt;, and that’s super bad for people, taking
care of being friendly in the team chat is super dope for remote employees.&lt;/p&gt;
&lt;p&gt;Another thing that you should avoid are those longs conversation in chats, that
are horrible! You end up with thousands of written lines, a few hours in the
chat, and mostly no-sense. A non-lantency communication(phone) with your remote
colleague is the most valuable thing that you can do for &lt;strong&gt;both&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;If you have an office and remote employees, something that you should have is a
good video conferencing system, I highly recommend the solution from &lt;a class="reference external" href="https://www.owllabs.com/"&gt;Owllabs&lt;/a&gt;, is easy to set up and for remote employees are
super awesome!&lt;/p&gt;
&lt;p&gt;That's all; these are my thoughts about working remotely  for three different
companies over the last six years, I hope that helps!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="remote"></category><category term="work"></category></entry><entry><title>Jenkins Slides from my VigoJug meetup</title><link href="https://acalustra.com/jenkins-slides-from-my-vigojug-meetup.html" rel="alternate"></link><published>2018-07-02T20:00:00+02:00</published><updated>2018-07-02T20:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2018-07-02:/jenkins-slides-from-my-vigojug-meetup.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="https://www.meetup.com/es-ES/VigoJUG/"&gt;VigoJug&lt;/a&gt; meetup is one of the best
meetups that we have in the town, my close friend &lt;a class="reference external" href="https://twitter.com/antonmry"&gt;Anton&lt;/a&gt; always help me with my Groovy skills and he
helped me to get some Jenkins pipelines to the next level!&lt;/p&gt;
&lt;p&gt;Due the job that I made in the last years, I know …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="https://www.meetup.com/es-ES/VigoJUG/"&gt;VigoJug&lt;/a&gt; meetup is one of the best
meetups that we have in the town, my close friend &lt;a class="reference external" href="https://twitter.com/antonmry"&gt;Anton&lt;/a&gt; always help me with my Groovy skills and he
helped me to get some Jenkins pipelines to the next level!&lt;/p&gt;
&lt;p&gt;Due the job that I made in the last years, I know a lot of Jenkins and he asked
me to give a talk and explain the declarative pipelines, shared libraries and
job-dsl.&lt;/p&gt;
&lt;p&gt;The meetup was awesome, we have a full house and &lt;a class="reference external" href="http://optaresolutions.com/"&gt;Optare Solutions&lt;/a&gt; sponsored the beers. Here you have the slides,
sadly this time the meetup was not recorded.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
            &lt;script async class="speakerdeck-embed"
                    data-id="8c046a529fba4a05ae4028ca6459dead"
                    data-ratio="1.77777777777778"
                    src="//speakerdeck.com/assets/embed.js"&gt;
            &lt;/script&gt;
&lt;/div&gt;&lt;p&gt;For the track of some questions that I received:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://jenkins.io/doc/pipeline/steps/"&gt;Pipeline steps reference&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://job-dsl.herokuapp.com/"&gt;JobDSL job sandbox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://wiki.jenkins.io/display/JENKINS/Amazon+EC2+Fleet+Plugin"&gt;Amazon ec2 autoscaling spot instances&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content><category term="blog"></category><category term="jenkins"></category><category term="vigo"></category><category term="talks"></category></entry><entry><title>Perseguir un soño e que se convirte nunha trampa.</title><link href="https://acalustra.com/perseguir-un-sono-e-que-se-convirte-nunha-trampa.html" rel="alternate"></link><published>2017-12-14T12:00:00+01:00</published><updated>2017-12-14T12:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-12-14:/perseguir-un-sono-e-que-se-convirte-nunha-trampa.html</id><summary type="html">&lt;p&gt;Como ben sabedes levo anos loitando por crear &lt;a class="reference external" href="intranet.aindustriosa.org"&gt;A Industriosa&lt;/a&gt;, un obxectivo que eu consideraba primordial para
Vigo e que a miña cabeza non parou ata conseguilo.  Grazas a un &lt;strong&gt;equipazo&lt;/strong&gt; de
xente este proxecto foi adiante pero eu teño que dicir basta, isto converteuse
nun traballo, polo que teño …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Como ben sabedes levo anos loitando por crear &lt;a class="reference external" href="intranet.aindustriosa.org"&gt;A Industriosa&lt;/a&gt;, un obxectivo que eu consideraba primordial para
Vigo e que a miña cabeza non parou ata conseguilo.  Grazas a un &lt;strong&gt;equipazo&lt;/strong&gt; de
xente este proxecto foi adiante pero eu teño que dicir basta, isto converteuse
nun traballo, polo que teño que renunciar.&lt;/p&gt;
&lt;img alt="Espazo A Industriosa" class="align-center" src="img/aindustriosa.jpg" /&gt;
&lt;p&gt;A miña adicación, nos últimos meses, foi en case media xornada de traballo, polo
que empuxaba ao 300%, pero este último impulso foi desmesurado e teño que baixar
o acelerador, apartarme para que outros fagan as cousas, ademais, a miña
incorporación a un novo traballo non me deixa outra opción que perder impulso.&lt;/p&gt;
&lt;p&gt;Neste camiño os números son entre alarmantes e impresionantes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Mais de 1300 emails escritos relacionados ca Industriosa.&lt;/li&gt;
&lt;li&gt;Mais de 16 meetups + Workshops&lt;/li&gt;
&lt;li&gt;Dúas hackathons organizadas&lt;/li&gt;
&lt;li&gt;Mais de 60 reunións presenciais&lt;/li&gt;
&lt;li&gt;Mais de 400 chamadas (SMS Backup + ftw)&lt;/li&gt;
&lt;li&gt;Conseguidos case 8000€ de patrocinios.&lt;/li&gt;
&lt;li&gt;Aportados mais de 200€ a fondo perdido + 350€ da fianza do local.(Que
recuperaremos) + Material que doei a fondo perdido.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Creo que A Industriosa é un proxecto grandioso, e o seu futuro esta fora de toda
dúbida, agora toca que en os enxeñeiros de Vigo lle dean contido e que este se
aliene aos proxectos das empresas. &lt;strong&gt;Por outra parte a autoxestión do espazo&lt;/strong&gt;,
que a comunidade sea capaz de aportar 1000€ mensuais para ter un espazo a
disposición de todos e que as empresas so teñan que colaborar para mellorar o
espazo ou futuros proxectos é algo primordial.&lt;/p&gt;
&lt;p&gt;Que ese espazo sirva como revulsivo para os rapaces da zona inda é mellor! No
futuro, moitas veces, igual non lle vemos valor ao espazo, pero a semente moitas
veces é o mais importante. Oxala isto sexa como unha plantación de Eucaliptos e
se propaguen a toda hostia.&lt;/p&gt;
&lt;p&gt;Eu seguirei, xa mais tranquilo, na directiva ata Setembro. A partir de Setembro
xa non serei parte da Industriosa e xa solo colaborarei axudando os rapaces. E
moi posible que pague a cota a a estudantes e que os intente foguear en
proxectos reais que poidan crear valor e axudalos a mellorar, pero iso xa
falaremos en Setembro do 2018 ^__^.&lt;/p&gt;
&lt;p&gt;Ata Setembro sigo na industriosa, empuxando con todo &lt;strong&gt;o marabilloso equipo&lt;/strong&gt;.
Ao mesmo tempo darlle as grazas a &lt;a class="reference external" href="https://twitter.com/LuisMirandaAceb"&gt;Luis Miranda&lt;/a&gt;, o home que colleu a Industriosa e
deulle o último empuxón ao espazo xunto con todo o equipo para que isto
despegara. (O de Luís ten moito mérito)&lt;/p&gt;
&lt;p&gt;Unha autentica sorte ser parte deste equipo de xente, graciñas polo viaxe e a
desfutrar/empuxar do que me queda.&lt;/p&gt;
&lt;p&gt;PS: Agora é o teu momento, da persoa que esta lendo, ti podes colaborar
activamente nisto.&lt;/p&gt;
&lt;p&gt;PS: Onte dicíame un patrocinador que somos uns heroes, eu son mais de que somos
un &lt;strong&gt;matados&lt;/strong&gt;. Unha sociedade que deixa a un dos mellores grupos de enxeñeiros
teñan que buscar locais, que teñan que xestionar altas de actividade e facer
traballo de xestión é unha sociedade podre. Así é a nosa sociedade, a que se
tira o mar para limpa chapapote, a que se tira ao monte a apagar lumes ou a que
enche hospitais para doar sangre nunha desgraza, estas imaxes son infames, pero
para nós un orgullo! Non debería enorgullecermos, senón avergoñarnos, unha
mostra da resignación do pobo galego.&lt;/p&gt;
&lt;blockquote class="epigraph"&gt;
La mitad de los gallegos no sabemos nadar, dijo al fin. Nos ahogamos resignados, y punto.
-- Perez Reverte, La reina del sur&lt;/blockquote&gt;
</content><category term="blog"></category><category term="aindustriosa"></category><category term="mar"></category><category term="vigo"></category></entry><entry><title>Terraform recipes to test Cilium on Kubernetes</title><link href="https://acalustra.com/terraform-recipes-to-test-cilium-on-kubernetes.html" rel="alternate"></link><published>2017-08-29T12:00:00+02:00</published><updated>2017-08-29T12:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-08-29:/terraform-recipes-to-test-cilium-on-kubernetes.html</id><summary type="html">&lt;p&gt;After almost five years, I left my job at &lt;a class="reference external" href="https://www.foehn.co.uk/"&gt;Foehn&lt;/a&gt;;
I need a personal break, and I have decided early this year that late August
would be a good time for doing it.&lt;/p&gt;
&lt;p&gt;During this break, I'll be doing open source for few months before starting to
look for a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;After almost five years, I left my job at &lt;a class="reference external" href="https://www.foehn.co.uk/"&gt;Foehn&lt;/a&gt;;
I need a personal break, and I have decided early this year that late August
would be a good time for doing it.&lt;/p&gt;
&lt;p&gt;During this break, I'll be doing open source for few months before starting to
look for a new place. I want to learn from the best software engineers, so I'll
be contributing the next two months to &lt;a class="reference external" href="https://www.cilium.io/"&gt;Cilium project&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you don't know what is Cilium let me explain, Cilium is a software that
enables network security mainly on container related projects, like Docker,
Kuberntes or Itsio. The main difference between Cilium and other networking
solutions is that Cilium relies in a heavy way on a lot of new technology that
the kernel provides.&lt;/p&gt;
&lt;div class="section" id="ebpf"&gt;
&lt;h2&gt;eBPF&lt;/h2&gt;
&lt;p&gt;Firstly, we need to understand what &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Berkeley_Packet_Filter"&gt;BPF (Berkeley Packet Filter)&lt;/a&gt; means. BPF is a Linux
kernel bytecode interpreter originally introduced to filter network packets
(tcpdump, ngrep).&lt;/p&gt;
&lt;p&gt;A BPF program is compiled to bytecode by the &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Just-in-time_compilation"&gt;JIT&lt;/a&gt; compiler, it becomes
a native CPU execution, as a consequence of that, the filter performance
increases a lot.&lt;/p&gt;
&lt;p&gt;BPF does not allow loops, so it is not Turing complete. A few years ago, an
extension to the original BPF was created: &lt;a class="reference external" href="http://www.brendangregg.com/blog/2015-05-15/ebpf-one-small-step.html"&gt;eBPF(Enhanced BPF)&lt;/a&gt; adding
new data structures (hashtables, arrays), tail calls, kernel hooks, etc...
Furthermore, nowadays BPF programs can be executed in multiple kernel hooks,
like networking, kprobes or system calls.&lt;/p&gt;
&lt;p&gt;If you want to deep more about how to load BPF programs in your kernel I
recommend &lt;a class="reference external" href="http://cilium.readthedocs.io/en/latest/bpf/"&gt;Cilium docs&lt;/a&gt;, &lt;a class="reference external" href="http://www.brendangregg.com/index.html#Videos"&gt;Brendan
Gregg talks&lt;/a&gt; and &lt;a class="reference external" href="https://www.iovisor.org/technology/bcc"&gt;bcc project&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="xdp"&gt;
&lt;h2&gt;XDP&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.iovisor.org/technology/xdp"&gt;XDP&lt;/a&gt; means Xpress Data Path; this
technology was introduced in the kernel to make the packet processing much
faster, so with XDP you can drop/pass packets very close to the network driver,
without getting the packet into the kernel userspace. This technology made
Facebook Load Balancers &lt;a class="reference external" href="https://twitter.com/tgraf__/status/854420210362851328"&gt;10x faster&lt;/a&gt; than IPVS
deployments.&lt;/p&gt;
&lt;p&gt;To have a simple vision of this technology, the following image from Cilium is
self-explanatory:&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
    &lt;iframe src="//www.slideshare.net/slideshow/embed_code/key/5uvwUxYy1RjMd8?startSlide=60" width="595" height="485" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen&gt; &lt;/iframe&gt; &lt;div style="margin-bottom:5px"&gt;&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;If you have doubts about Cilium, you should check &lt;a class="reference external" href="https://www.slideshare.net/ThomasGraf5"&gt;Thomas Graf presentations&lt;/a&gt;, where you can learn the kernel
technology on deep and how cilium implements it.&lt;/p&gt;
&lt;p&gt;If you want to try Cilium, in the &lt;a class="reference external" href="http://cilium.readthedocs.io/en/latest/gettingstarted/"&gt;usage documentation&lt;/a&gt; you have some
examples and a &lt;a class="reference external" href="http://cilium.readthedocs.io/en/latest/gettingstarted/#getting-started-using-docker"&gt;vagrant box&lt;/a&gt;
created for testing purpose. However, if you want to test it using Kubernetes,
things get a bit more complicated, you can use Minikube, but for testing
networking tunnels you need more nodes and minikube just provides one.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/eloycoto/k8s-cilium-terraform"&gt;I created a Terraform recipe&lt;/a&gt; where you can set-up a Kubernetes cluster with
Cilium-cni on Google Cloud Platform in a few minutes. To start playing with
that, you need to follow the process described in the Readme.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
            &lt;script type="text/javascript" src="https://asciinema.org/a/upgHBrafmBrKMMving98RQYAC.js" id="asciicast-upgHBrafmBrKMMving98RQYAC" data-speed="2" rows="10" data-theme="monokai" async&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;As soon that you login into the master node, you can see a few cilium daemon set
pods working. If you want to know the cilium status you can run the following
command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; cilium &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;kubectl -n kube-system get pods --selector&lt;span class="o"&gt;=&lt;/span&gt;k8s-app&lt;span class="o"&gt;=&lt;/span&gt;cilium --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;jsonpath&lt;/span&gt;&lt;span class="o"&gt;={&lt;/span&gt;.items..metadata.name&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===============&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cilium&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;===============&amp;quot;&lt;/span&gt;
        kubectl -n kube-system &lt;span class="nb"&gt;exec&lt;/span&gt; &lt;span class="nv"&gt;$cilium&lt;/span&gt; cilium status
        &lt;span class="k"&gt;return&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command iterate over all cilium-agents pods, after that, it executes
&lt;cite&gt;cilium status&lt;/cite&gt; comand to know the status of the daemon set. The sample output
is the following, where you can see the list of &lt;a class="reference external" href="http://cilium.readthedocs.io/en/latest/concepts/#endpoints"&gt;endpoints&lt;/a&gt; and the status
of all 3-party integrations.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;===============&lt;/span&gt;cilium-0m1gb&lt;span class="o"&gt;===============&lt;/span&gt;

This &lt;span class="nb"&gt;command&lt;/span&gt; iterate over all cilium-agent pods
Allocated IPv4 addresses:
 &lt;span class="m"&gt;10&lt;/span&gt;.2.28.238
 &lt;span class="m"&gt;10&lt;/span&gt;.2.42.252
 &lt;span class="m"&gt;10&lt;/span&gt;.2.247.232
Allocated IPv6 addresses:
 f00d::ac10:2:0:1
 f00d::ac10:2:0:ad
 f00d::ac10:2:0:8ad6
KVStore:            Ok   Etcd: http://172.16.0.2:9732 - &lt;span class="o"&gt;(&lt;/span&gt;Leader&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;.1.0
ContainerRuntime:   Ok
Kubernetes:         Ok   OK
Cilium:             Ok   OK
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This setup is using VXLAN, a network virtualization technology that
encapsulates Layer 2 frames within layer 4 UDP packets; Cilium also supports
Geneve (If you want to deep more, you can read &lt;a class="reference external" href="https://blog.russellbryant.net/2017/05/30/ovn-geneve-vs-vxlan-does-it-matter/"&gt;this post&lt;/a&gt;
by Russel Bryant).  To know the list of tunnels (The list of k8s nodes) that
cilium is using, you can use the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; cilium &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;kubectl -n kube-system get pods --selector&lt;span class="o"&gt;=&lt;/span&gt;k8s-app&lt;span class="o"&gt;=&lt;/span&gt;cilium --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;jsonpath&lt;/span&gt;&lt;span class="o"&gt;={&lt;/span&gt;.items..metadata.name&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===============&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cilium&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;===============&amp;quot;&lt;/span&gt;
        kubectl -n kube-system &lt;span class="nb"&gt;exec&lt;/span&gt; &lt;span class="nv"&gt;$cilium&lt;/span&gt; cilium bpf tunnel list
        &lt;span class="k"&gt;return&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command iterate over all cilium-agent pods, after that, it executes the
command &lt;cite&gt;cilium bpf tunnel list&lt;/cite&gt; where you can see the network assigned per each
node, and the IP address of the node. The correct output should be similar to
this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;===============&lt;/span&gt;cilium-0m1gb&lt;span class="o"&gt;===============&lt;/span&gt;
f00d::ac10:4:0:0     &lt;span class="m"&gt;172&lt;/span&gt;.16.0.4
&lt;span class="m"&gt;10&lt;/span&gt;.2.0.0             &lt;span class="m"&gt;172&lt;/span&gt;.16.0.2
f00d::ac10:5:0:0     &lt;span class="m"&gt;172&lt;/span&gt;.16.0.5
&lt;span class="m"&gt;10&lt;/span&gt;.5.0.0             &lt;span class="m"&gt;172&lt;/span&gt;.16.0.5
&lt;span class="m"&gt;10&lt;/span&gt;.4.0.0             &lt;span class="m"&gt;172&lt;/span&gt;.16.0.4
f00d::ac10:3:0:0     &lt;span class="m"&gt;172&lt;/span&gt;.16.0.3
&lt;span class="m"&gt;10&lt;/span&gt;.3.0.0             &lt;span class="m"&gt;172&lt;/span&gt;.16.0.3
f00d::ac10:2:0:0     &lt;span class="m"&gt;172&lt;/span&gt;.16.0.2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you try to schedule a new service, cilium will allocate a new IP to load
balance the traffic, the list of the Load Balancers can be checked using the
command &lt;cite&gt;cilium service list&lt;/cite&gt; on any cilium-agent pod, the sample command is
the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; cilium &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;kubectl -n kube-system get pods --selector&lt;span class="o"&gt;=&lt;/span&gt;k8s-app&lt;span class="o"&gt;=&lt;/span&gt;cilium --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;jsonpath&lt;/span&gt;&lt;span class="o"&gt;={&lt;/span&gt;.items..metadata.name&lt;span class="o"&gt;}&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;===============&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cilium&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;===============&amp;quot;&lt;/span&gt;
        kubectl -n kube-system &lt;span class="nb"&gt;exec&lt;/span&gt; &lt;span class="nv"&gt;$cilium&lt;/span&gt; cilium service list
        &lt;span class="k"&gt;return&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="o"&gt;===============&lt;/span&gt;cilium-0m1gb&lt;span class="o"&gt;===============&lt;/span&gt;
ID   Frontend            Backend
&lt;span class="m"&gt;1&lt;/span&gt;    &lt;span class="m"&gt;10&lt;/span&gt;.96.0.1:443       &lt;span class="nv"&gt;1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="m"&gt;172&lt;/span&gt;.16.0.2:6443
&lt;span class="m"&gt;2&lt;/span&gt;    &lt;span class="m"&gt;10&lt;/span&gt;.96.0.10:53       &lt;span class="nv"&gt;1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="m"&gt;10&lt;/span&gt;.2.42.252:53
&lt;span class="m"&gt;3&lt;/span&gt;    &lt;span class="m"&gt;10&lt;/span&gt;.109.204.101:80   &lt;span class="nv"&gt;1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="m"&gt;10&lt;/span&gt;.3.15.138:5000
                                                 &lt;span class="nv"&gt;2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="m"&gt;10&lt;/span&gt;.4.15.138:5000
                                                 &lt;span class="nv"&gt;3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="m"&gt;10&lt;/span&gt;.5.114.197:5000
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From here, you can follow the policy enforcement guide from the cilium docs. In
the coming months, I will share with you all the stuff I am learning.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="ubuntu"></category><category term="cilium"></category><category term="terraform"></category><category term="kubernetes"></category></entry><entry><title>España, o paraíso dos bocachanclas</title><link href="https://acalustra.com/espana-o-paraiso-dos-bocachanclas.html" rel="alternate"></link><published>2017-07-31T16:00:00+02:00</published><updated>2017-07-31T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-07-31:/espana-o-paraiso-dos-bocachanclas.html</id><summary type="html">&lt;p&gt;Sempre que escoito que en Galicia non contamos con talento, dánme ganas de
pegar, non por que sexa agresivo, se non por quen fala nunca se parou a
analizar os datos cun pouco de precisión, e van sacando as ganas a pouca xente
que as ten.&lt;/p&gt;
&lt;p&gt;Moitos dos que me …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Sempre que escoito que en Galicia non contamos con talento, dánme ganas de
pegar, non por que sexa agresivo, se non por quen fala nunca se parou a
analizar os datos cun pouco de precisión, e van sacando as ganas a pouca xente
que as ten.&lt;/p&gt;
&lt;p&gt;Moitos dos que me coñecen saben que eu sempre estiven vinculado aos rallyes, un
deporte que me namorou nos 90 no norte de Portugal, e que dende aquela nunca
puiden deixar. Pero este artigo falaba de bocachanclas, e nos rallyes temos
varios.&lt;/p&gt;
&lt;p&gt;Fai &lt;a class="reference external" href="http://toyotagazooracing.com/release/2016/wrc/0929-01.html"&gt;dous anos Toyota MotorSport anunciou&lt;/a&gt; un novo
programa dentro da máxima categoría dos Rallyes (WRC), esta nova infraestrutura
deixaba as instalacións de Toyota en Alemania, e movíase as instalacións de
Tommi Makinen Racing, en Finlandia. Todo o mundo dicía que era unha loucura,
ninguén confiaba nos enxeñeiros finlandeses, e dende a prensa española xa se
matou o proxecto antes de que arrancara. E mais, o ano pasado despois do Rally
Finlandia, Pipo Lopez (experto no mundo dos rallyes) &lt;a class="reference external" href="http://blogs.as.com/sexta-a-fondo/2016/08/memorias-de-jyv%C3%A4skyl%C3%A4.html"&gt;escribía o seguinte&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote class="epigraph"&gt;
&lt;p&gt;Un proyecto que ha perdido al director técnico, Michael Zotos, que ha tomado
las de Villadiego. Hay dos teorías: que ha dejado el equipo por desavenencias
con Makinen, y que lo ha hecho por cuestiones familiares, ya que para cualquier
extranjero vivir en Finlandia no resulta nada fácil. Cualquiera de los dos
motivos corrobora que no se están haciendo bien las cosas. Todos advertimos que
montar la sede en Finlandia era un error, logísticamente, porque están lejos de
los lugares de los test y de los proveedores, y a la hora de contratar gente,
porque pocos extranjeros quieren ir a vivir a Finlandia, un país precioso, pero
en el que la mitad del año es siempre de noche y está todo helado, la otra
mitad es siempre de día, y, por ejemplo, no hay colegios internacionales, por
lo que nadie con hijos quiere trasladarse allí (amén de su complicado idioma,
que no habla casi nadie).&lt;/p&gt;
&lt;p&gt;Los últimos rumores hablan de que los pilotos para el debut en 2017 serán Juho
Hanninen y Esapekka Lappi. Dos grandísimos pilotos, pero no de primer nivel.
Además, entiendo que el mercado finlandés no es el más importante para la
marca, y centrarlo todo en el país nórdico no va a ser muy rentable
comercialmente hablando. Y también cuentan que los tiempos de Makinen, que está
compartiendo las labores de piloto probador con Hanninen, son tres segundos por
kilómetro más lentos, con lo que poco puede aportar para el desarrollo del
coche. Lo que nos da pena a todos es que el regreso de Toyota es una gran
noticia para la familia del Mundial, y tal y como se están desarrollando las
cosas, parece que podrían estrellarse…y eso no es bueno para nadie. ¡Ojalá se
enderecen!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Pois xa me gustaría ter o nivel de fracaso de Toyota! O novo equipo tivo a
sorte de fichar a un dos mellores pilotos, e coa súa axuda e poucos retoques
conseguiron ter un coche moi competitivo, tanto que gañaron o segundo rally do
ano. Un ano despois, un piloto que non era de primeiro nivel, gañou o seu
primeiro rally do mundial, despois de soamente catro rallyes na máxima
categoría, e con tan só 26 anos. A verdade que a min xa me gustaría fracasar
así. Cabe salientar, que a día de hoxe, o equipo funciona moito mellor que o
equipo de Citroen, e tivo moito mellor arranque que o proxecto Alemán de
Hyundai ou do proxecto inglés de Mini.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
    &lt;blockquote class="twitter-tweet" data-lang="es"&gt;&lt;p lang="en" dir="ltr"&gt;To win in Finland requires not only incredible driving skills, but bravery too. &lt;a href="https://twitter.com/EsapekkaLappi"&gt;@EsapekkaLappi&lt;/a&gt;, congratulations! &lt;a href="https://twitter.com/hashtag/WRC?src=hash"&gt;#WRC&lt;/a&gt; &lt;a href="https://t.co/G5V5mKOpeB"&gt;pic.twitter.com/G5V5mKOpeB&lt;/a&gt;&lt;/p&gt;&amp;mdash; Evan Rothman (@Evan_Rothman) &lt;a href="https://twitter.com/Evan_Rothman/status/891939842724171777"&gt;31 de julio de 2017&lt;/a&gt;&lt;/blockquote&gt;
    &lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Quen me dera que Galicia tivera xente como Tommi Makinen&lt;/strong&gt;, un tipo con
ambición para exportar o seu traballo a todo o mundo, un proxecto que unha
persoa levou a unha zona “remota, pobre e sen talento”, pero que demostrou que
moitas veces fai mais falla fouteza, que estrelas. Teño claro que as estrelas
brillan de vez en cando, pero que o orgullo que representa para todo o equipo,
que dende a remota Finlandia poder estar de ti a ti, co equipo de Alemáns e moi
por riba dos parisinos vale moito mais que poder fichar a estrelas que igual
non son capaces de render ao 100%.&lt;/p&gt;
&lt;p&gt;Un bo amigo, sempre me di: &lt;em&gt;Eloy, que un proxecto que empeza en San Francisco ou
Galicia ten o mesmo punto de partida, o acceso a tecnoloxía e a información é o
mesmo, e non poñas esa desculpa por que non é válida&lt;/em&gt;. No mundo dos rallyes,
catro equipos disputan a máxima categoría, a min encántame ver que un equipo
esta situado nunha zona remota de Inglaterra, na que ningunha estrela quere
estar, outro equipo en Finlandia. Que pena me queda que un deses equipos non
este no Norte de Portugal, berce de moitos enxeñeiros destes equipos.&lt;/p&gt;
&lt;p&gt;Oxalá, Luis Moya encabezara un proxecto así en Galicia. Oxalá, un día Juan López
Frade, director de Suzuki, se embarcara nun proxecto de coche de rallyes
eléctrico, dirixido por Luis Moya e feito en ARVidal. Un proxecto que estimule
o potencial dos enxeñeiros galegos.&lt;/p&gt;
&lt;p&gt;Finalmente, se algo me queda claro e que este é un pais de bocachanclas en
todos os aspectos. Fai dous anos sentado nun despacho, propuxen que se lanzaran
contactos polo centro de innovación marítima de Roll’s Royce, a resposta foi
que Roll’s Royce era unha empresa en quebra, &lt;a class="reference external" href="http://www.helsinkitimes.fi/business/14596-rolls-royce-to-set-up-r-d-centre-in-turku-finland.html"&gt;poucos meses despois inverteron
230 millóns de euros en Finlandia&lt;/a&gt;. Levo meses falando de promover un sistema
que os contedores poidan ser descargados nas augas tranquilas das rías galegas,
sempre me din que é imposible, pero os &lt;a class="reference external" href="https://www.youtube.com/watch?v=5VBD7hVRhx0"&gt;escandinavos xa traballan niso&lt;/a&gt;. Por
outra parte carecemos de talento, pero este ano, todas as charlas de Vigolabs
foron unha explicación de toda a tecnoloxía dos coches de Tesla.&lt;/p&gt;
&lt;p&gt;Iso si, estou seguro que se Galicia fora un barrio de Madrid, ou unha rexión
alemá, todo se podería facer. Pero estamos no fin do mundo, e aquí o talento
non chega, grazas a deus, a conexión a internet, mal, pero algo chega.&lt;/p&gt;
&lt;p&gt;Quédome contento por ver como os finlandeses de Jyväskylä demostran que moitas
veces so fan falla vontade e bo facer, o resto ven só.&lt;/p&gt;
</content><category term="blog"></category><category term="rally"></category><category term="galicia"></category></entry><entry><title>PyDay Galicia 2017: How to write better logs.</title><link href="https://acalustra.com/pyday-galicia-2017-how-to-write-better-logs.html" rel="alternate"></link><published>2017-06-29T12:00:00+02:00</published><updated>2017-06-29T12:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-06-29:/pyday-galicia-2017-how-to-write-better-logs.html</id><summary type="html">&lt;p&gt;Last Jun we had an excellent conference in Vigo Galicia. More than 180 python
devs meet in the PyDay Galicia 2017. The conference was awesome; I learnt a lot
of things related to Machine Learning, and I can catch up with some old friends
like Ismael Hasan, who is now …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last Jun we had an excellent conference in Vigo Galicia. More than 180 python
devs meet in the PyDay Galicia 2017. The conference was awesome; I learnt a lot
of things related to Machine Learning, and I can catch up with some old friends
like Ismael Hasan, who is now working in Elastic.&lt;/p&gt;
&lt;p&gt;I gave a lighting talk related to logging. I want to explain the rules that I
use to follow to write logs. Here you have the slides.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
            &lt;script async class="speakerdeck-embed"
                    data-id="54babce1fc51430ebdb88c2d4383458c"
                    data-ratio="1.77777777777778"
                    src="//speakerdeck.com/assets/embed.js"&gt;
            &lt;/script&gt;
&lt;/div&gt;&lt;p&gt;And many thanks to &lt;a class="reference external" href="https://twitter.com/alexhermida"&gt;&amp;#64;alexhermida&lt;/a&gt; and all &lt;a class="reference external" href="https://twitter.com/python_vigo"&gt;&amp;#64;python_vigo&lt;/a&gt; for organising it.&lt;/p&gt;
</content><category term="blog"></category><category term="python"></category><category term="vigo"></category><category term="pyday"></category><category term="talks"></category></entry><entry><title>How Vigo Council migrate to Linux</title><link href="https://acalustra.com/how-vigo-council-migrate-to-linux.html" rel="alternate"></link><published>2017-06-19T12:00:00+02:00</published><updated>2017-06-19T12:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-06-19:/how-vigo-council-migrate-to-linux.html</id><summary type="html">&lt;p&gt;Last May I went to one of the most awesome meetups that were given in &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Vigo"&gt;Vigo&lt;/a&gt;.  Hugo, from Vigo council IT department,
explained the process of how they migrated more than 800 workstations to Linux,
a process that was started on 2007. I am sharing some notes about his
presentation …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last May I went to one of the most awesome meetups that were given in &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Vigo"&gt;Vigo&lt;/a&gt;.  Hugo, from Vigo council IT department,
explained the process of how they migrated more than 800 workstations to Linux,
a process that was started on 2007. I am sharing some notes about his
presentation because I think it could be really useful and interesting for you
to know how they made it.&lt;/p&gt;
&lt;img alt="Vigo council HQ" class="align-center" src="img/concello.jpg" /&gt;
&lt;p&gt;Firstly, let me introduce the IT part of the Vigo council. They have close to
1000 workstations, and they need to help all the citizen (around 300K).  All
the people that work in the council are public employees, so sometimes they are
not that proactive, something hey made Hugo's team be aware from the beginning
that the change would be difficult.&lt;/p&gt;
&lt;p&gt;Over 2007, the IT department had multiple problems, all the workstations were
pretty old, all the OS has self-login activated without any central credentials
manager, workstations stored all the data, and sometimes user lost work.
Besides, the council did not have much money (Spanish financial crisis had just
started), and invest in IT was not a priority.&lt;/p&gt;
&lt;p&gt;Due to budget problems, the first idea that they had was to start to use
OpenOffice, so that they can save money from Microsoft Office licenses. Over
three months one guy provided support around custom macros and other issues.
After these months all the people were using the OpenOffice suite. To avoid
problems they have some Workstations with Microsoft office to deal with
non-compatible files, but the small migration was made without much trouble.&lt;/p&gt;
&lt;p&gt;The next problem was to renew around 600 workstations, with the money that they
had at that time they could only achieve 30 workstations using Windows so that
the update will take too long. After a deep thinking, they made a proof of
concept with custom workstations and Linux, with this approach they could
upgrade around 100 workstations per year. Finally, they chose the risky
solution, What brave people they are! &amp;quot;Afouteza&amp;quot; is called in Galicia :-)&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;Vigo
council have more than 800 users running on &lt;a
href="https://twitter.com/ubuntu"&gt;@ubuntu&lt;/a&gt; 👏👏👏👏 &lt;a
href="https://t.co/InxGR9ujFJ"&gt;pic.twitter.com/InxGR9ujFJ&lt;/a&gt;&lt;/p&gt;&amp;mdash; Eloy
Coto 🐠 (@eloycoto) &lt;a
href="https://twitter.com/eloycoto/status/860181098420207616"&gt;May 4,
2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Consequently to this change, they knew that this migration would be hard, and
people will complain, so they focused on providing more much value on Linux
than Windows, their main idea was to seduce employees to request Linux, to
achieve that, they made the following things before start:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;They created a new LDAP schema, this allows to all new users to login in any
Linux workstations and always use the same credentials.&lt;/li&gt;
&lt;li&gt;All the migrated users will have a new email server, so they can use IMAP,
with the LDAP login and Thunderbird as a client.&lt;/li&gt;
&lt;li&gt;They added some feature switches on the internal applications that made the
Linux version more productive than the Windows version, as a consequence, users
can finish their work faster on Linux.&lt;/li&gt;
&lt;li&gt;Login in the shared folders with the LDAP credentials.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The decision was made, all the IT department agreed, so the next step was to
start the migration with the less possible trouble. The process began with the
smallest teams; firstly,  they provided all the peripherals that were Linux
compatible (one of the hardest points at that time). Next, they got all the
users in that department and showed them the basic use (one-day training),
afterwards, they took the most proactive user in that department and gave him
three days training so that user was the mentor for the team. The following two
weeks after the migration, one member of the IT team was sitting close to them,
so if they had any question they can ask directly, also they had a proper
feedback from the users.&lt;/p&gt;
&lt;p&gt;One of the hardest point to fix was when they users migrated to Linux; they
forgot that the things in Windows sometimes fail too, consequently, the IT
received many calls blaming Linux, but the issue was present in Windows too.
Instead of lost hope, they only fixed problems in Linux using feature switches,
but they did not found a good solution for this problem.&lt;/p&gt;
&lt;p&gt;The first year was rough, a lot of new issues, making more mental training than
software changes but the users after a while were happy, the next five years
have continued without to much trouble. In the early months, to increase the
success rate, they need to create an audience for all employees. To begin with,
they started to write a blog in the council intranet, every month they shared
something to make the work faster using Linux, in the second year a big
percentage of the employees requested a new computer with Linux installed, they
only see good things in the Linux workstations!&lt;/p&gt;
&lt;p&gt;Apart from user's side, they had more challenges ahead: the hardware one was
hard, at that time many scanners, printers and barcode scans were not Linux
compatible, so when they bought a new peripheral, they sent that to the next
department to migrate, so the problem was fixed.&lt;/p&gt;
&lt;p&gt;Another fun history is around software! They started using Fedora 7, and they
were happy until the day that they need to upgrade to a new version. When they
tried, the update broke some packages, and they could not update with a simple
shell script. After a few tries, they needed something that they can update
without much trouble, at that time, Ubuntu was starting to make it famous, many
users began to use it, they gave a try, and finally, Ubuntu 10.04 was the OS
flavour for all users.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;We
started using Fedora 8, but the updates were painful. With Ubuntu 10.04 we can
update versions without problems. &lt;a
href="https://twitter.com/hashtag/vigotech?src=hash"&gt;#vigotech&lt;/a&gt;&lt;/p&gt;&amp;mdash;
Eloy Coto 🐠 (@eloycoto) &lt;a
href="https://twitter.com/eloycoto/status/860190636158353411"&gt;May 4,
2017&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;The biggest problem that they found behind Ubuntu was the desktop environment,
so they started using Gnome 2, but after a while, Ubuntu chose to move to
Unity.  Furthermore, Gnome 3 was a big change from the previous version. They
made a proof of concept with Gnome 3, and users were lost, so they decided to
switch to Ubuntu Mate, that it is the default flavour that they are using now.&lt;/p&gt;
&lt;p&gt;What about the OS updates? With more than 800 workstations they will be fun,
isn’t it? How they made updates? How do they know that all will work when the
update was applied? They created an excellent workflow, every day all the OS
checked security’s issues, but an internal software controls the software
updates/upgrades. Every day, ten workstations (from different departments) will
be updated in non-working hours, if something fails, they only had ten
co-workers with problems, this is slow, but they prevent to get a massive
outage on the council. So, each computer gets two significant updates per year.&lt;/p&gt;
&lt;p&gt;At the moment, the council only have the minimum computers running on Windows,
due to some special requirements like CAD applications, or something similar.
However, the root is based all on Linux OS.&lt;/p&gt;
&lt;p&gt;I am sure that one question that you have is how many people are currently
working on this, nowadays only one guy, who provide first line support to all
users, and he is the person in charge to make updates and new features. He
already mentions that they are collecting all the cultivated in the past, so
nowadays add a new feature meant to add a few lines of code in their
orchestration tool.&lt;/p&gt;
&lt;p&gt;I learnt a lot on this meetup; I am glad to met these IT guys a few years ago,
I have learnt a lot from them! They shared that sometimes you need to deal with
persons instead computers, they made an excellent point, that when you make a
change, you need to create an audience first, and gave to the proactive people
what they want and they will pull their closer people to the success.&lt;/p&gt;
&lt;p&gt;I am glad to share this history with you; I Hope you enjoyed it!&lt;/p&gt;
</content><category term="blog"></category><category term="ubuntu"></category><category term="council"></category><category term="vigo"></category></entry><entry><title>Fosdem 2017 review</title><link href="https://acalustra.com/fosdem-2017-review.html" rel="alternate"></link><published>2017-02-09T16:00:00+01:00</published><updated>2017-02-09T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-02-09:/fosdem-2017-review.html</id><summary type="html">&lt;p&gt;My third &lt;a class="reference external" href="https://fosdem.org/2017/"&gt;FOSDEM&lt;/a&gt; is over, this year there was a
&lt;a class="reference external" href="https://fosdem.org/2017/schedule/track/real_time_communications/"&gt;Real Time Comms dev room&lt;/a&gt; in place,
one of the best places to keep up to date with all VoIP technologies.
Furthermore, in this conference, you can just jump into another track and learn
from them, this helps you to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;My third &lt;a class="reference external" href="https://fosdem.org/2017/"&gt;FOSDEM&lt;/a&gt; is over, this year there was a
&lt;a class="reference external" href="https://fosdem.org/2017/schedule/track/real_time_communications/"&gt;Real Time Comms dev room&lt;/a&gt; in place,
one of the best places to keep up to date with all VoIP technologies.
Furthermore, in this conference, you can just jump into another track and learn
from them, this helps you to be out of your comfort zone. I am so glad to be
there and have the chance to have a chat with all open-source community.&lt;/p&gt;
&lt;p&gt;First I want to start thanking the RTC track organisers, &lt;a class="reference external" href="https://twitter.com/saghul"&gt;Saúl Ibarra&lt;/a&gt; and &lt;a class="reference external" href="https://twitter.com/miconda"&gt;Daniel-Constantin Mierla&lt;/a&gt;, organise this type of events is a tremendous
amount of work.&lt;/p&gt;
&lt;p&gt;The day started with an excellent WebRTC introduction, I got in touch with
&lt;a class="reference external" href="https://github.com/webrtc/adapter"&gt;Adapter.js&lt;/a&gt; library, Steven advised us to
limit the endpoints if we can, and he shared that sometimes you should guess
where is the media problem instead find it. The second talk, by &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/martin_lagrange/"&gt;Martin&lt;/a&gt;, was about
real-time protocols and he made a splendid introduction about few tools.
&lt;a class="reference external" href="https://telepathy.freedesktop.org/"&gt;Telepathy&lt;/a&gt; talk was quite sweet, it is
nice to know that all this software still works and new ideas are on the
roadmap. IoT XMPP by &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/daniel_wisnewski/"&gt;Daniel&lt;/a&gt; was great; I
have some doubts about XMPP on the IoT world related to power consumption and
bandwidth, but the idea behind &lt;a class="reference external" href="http://xmpp.org/extensions/xep-0323.html"&gt;XEP-0323&lt;/a&gt; is excellent.&lt;/p&gt;
&lt;p&gt;The best VoIP talk, from my point of view, was from &lt;a class="reference external" href="https://twitter.com/mattcjordan"&gt;Matt Jordan&lt;/a&gt; about Asterisk scalability. The concept is
the same that Matt argued few times in the past conferences. It was awesome to
see new &lt;a class="reference external" href="https://wiki.asterisk.org/wiki/display/AST/Asterisk+14+Recordings+REST+API#Asterisk14RecordingsRESTAPI-getStoredFile"&gt;ARI methods for recordings&lt;/a&gt;,
the &lt;a class="reference external" href="https://blogs.asterisk.org/2016/09/21/asterisk-14-publishing-extension-state/"&gt;publish-subscribe interface&lt;/a&gt;
(I did not have an idea about that and it fixes many problems). Following Matt,
the Basque VoIP mafia took action, Saúl made an introduction to &lt;a class="reference external" href="https://meet.jit.si"&gt;Jitsi WebRTC
solutions&lt;/a&gt;, &lt;a class="reference external" href="https://github.com/jmillan"&gt;Jose Luis Millán&lt;/a&gt; about &lt;a class="reference external" href="http://www.jssip.net/"&gt;JsSIP&lt;/a&gt;, and
&lt;a class="reference external" href="https://github.com/ibc/mediasoup"&gt;Mediasoup&lt;/a&gt; was explained by &lt;a class="reference external" href="https://twitter.com/ibc_tw"&gt;Iñaki Baz&lt;/a&gt;. I recommend you to view those talks online if
you weren't there.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://fosdem.org/2017/schedule/event/ring_opendht/"&gt;Ring's presentation&lt;/a&gt;
was great to be out of my comfort zone and to see how other projects solve
their problems. Next talk was by the energetic Olle; he showed a very clear
state of the art why &lt;a class="reference external" href="https://fosdem.org/2017/schedule/event/dualstack/"&gt;IPv6 implementation is failing&lt;/a&gt;. It was good to hear from
first-hand info about new &lt;a class="reference external" href="https://fosdem.org/2017/schedule/event/opensips/"&gt;OpenSips&lt;/a&gt;; new release looks
promising based on Event Routes, plus the CGRates module or RabbitMQ
integration. On the other hand, &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/giovanni_maruzzelli_gmaruzz/"&gt;Giovanni&lt;/a&gt; from
OpenTelecoms made an excellent explanation about Freeswich scalability methods
and explained very well the distribution and partition methods. After lunch,
&lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/lorenzo_mangani/"&gt;Lorenzo&lt;/a&gt; gave a
talk about Hormer; I got a lot of new ideas, and things like &lt;a class="reference external" href="https://siren.solutions/kibi-a-kibana-fork-for-data-intelligence/"&gt;Kibi&lt;/a&gt; were mind
blowing for me. I thoroughly recommend to follow &lt;a class="reference external" href="https://github.com/lmangani"&gt;Lorenzo on Twitter and GitHub&lt;/a&gt;; he is full of common-sense with innovative
ideas. The last VoIP talk that I attend was given by Daniel about &lt;a class="reference external" href="https://www.kamailio.org/w/2016/05/sip-routing-in-lua-or-python/"&gt;Kemi&lt;/a&gt;, I need to
say that he introduced something awesome in the next Kamailio version, this
interface is going to be essential in the near future.&lt;/p&gt;
&lt;img alt="Miconda about kemi" class="align-center" src="img/fosdem-1.jpg" /&gt;
&lt;p&gt;After my RTC update, my idea for Fosdem was to taste Belgium beers and extend
my knowledge of my second skills like DevOps, Python and Postgresql.&lt;/p&gt;
&lt;p&gt;I started with &lt;a class="reference external" href="https://fosdem.org/2017/schedule/event/grpc101/"&gt;GRPC&lt;/a&gt;; it is
a high-performance RPC framework. I use to work with that on CGRates. It was
good to know that Google is using GPRC over HTTP2, so it is much faster and
bi-directional streaming can be used.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://joshix.com/"&gt;CoreOS DocOps&lt;/a&gt; introduced &lt;a class="reference external" href="https://github.com/coreos/prometheus-operator"&gt;Kubernetes
Operators&lt;/a&gt;. From my point of
view, all containers/microservers miss the point about the state, with
Kubernetes operators this state can be dry or handled. This feature is
game-changing in the world of the containers, plus some examples shown during
the talk helped the audience to get it. This technology fixes something that I
usually work around using Hashicorp tools, in the following months I am going
to check k8s operators and deploy.&lt;/p&gt;
&lt;p&gt;Finally, I tried to be in a Testing dev room, but it had a massive queue, so I
moved into the Postgresql track. &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/jimmy_angelakos/"&gt;Jimmy&lt;/a&gt; introduced RDF
(Resource Description Framework). He provided some examples, and I think that I
would use that in the future. Need to say that I learn something awesome
Sqlalchemy stream_results.  After that, &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/gulcin_yildirim/"&gt;Gülçin&lt;/a&gt; from 2ndquadrant
explained all the replication process for fault tolerance; she explained in
cleartext the different wal level settings, something that I did not understand
at all, but she made an awesome explanation, you should check the video. The
last Postgres talk by &lt;a class="reference external" href="https://fosdem.org/2017/schedule/speaker/gunnar_bluth_nick/"&gt;Gunnar Bluth&lt;/a&gt;, introduced to
me, two new concepts:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;em&gt;RTO(recovery time objective)&lt;/em&gt;: How long took to recover from an incident&lt;/li&gt;
&lt;li&gt;&lt;em&gt;RPO(Recovery point objective)&lt;/em&gt;: How many lost are you going to have from an incident.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I knew all the technical details of this talk, but need to say that this
presentation changed how I am going to think about redundancy in the future, I
always looking for issues, but never think about RTO or RPO and never how to
measure it.&lt;/p&gt;
&lt;p&gt;Fosdem is over. This year I shared this travel with some friends from Vigo,
which made myself happy during all the trip. I learnt a lot from them too; &lt;strong&gt;I
am so glad&lt;/strong&gt; to share these days with a few python and ruby hackers, a &lt;a class="reference external" href="https://twitter.com/diepg"&gt;Webkit
committer&lt;/a&gt; and the &lt;a class="reference external" href="http://twitter.com/felixgomezlopez"&gt;Main dev&lt;/a&gt; of one of the &lt;a class="reference external" href="https://www.meneame.net/"&gt;largest Spain websites&lt;/a&gt;. Thanks to you all! Besides it was good to see in
person some people from the VoIP community, and meet some people that I didn't
meet &lt;a class="reference external" href="https://twitter.com/hellc2/status/827878864743518208"&gt;before&lt;/a&gt;.&lt;/p&gt;
&lt;img alt="Vigo dev community on fosdem 2017" class="align-center" src="img/fosdem-2.jpg" /&gt;
&lt;p&gt;Finally, some people have problems with the Fosdem Agenda. I need to say that I
did not have these problems, but a few weeks ago before Fosdem, I made my plan.
Sometimes in this conference is better to see fewer talks but be at the door 10
min before, and not leave some talks in the middle (that it is very
unrespectful) or see the agenda in the laptops and check the content of the
next speaker. This type of conference should be prepared in advance, if not you
are going to be frustrated in the queues.&lt;/p&gt;
&lt;p&gt;Thanks to all, and see you next year!&lt;/p&gt;
</content><category term="blog"></category><category term="fosdem"></category><category term="kamailio"></category><category term="conferences"></category></entry><entry><title>Postgresql Talk in the PHPVigo meetup</title><link href="https://acalustra.com/postgresql-talk-in-the-phpvigo-meetup.html" rel="alternate"></link><published>2017-01-25T16:00:00+01:00</published><updated>2017-01-25T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2017-01-25:/postgresql-talk-in-the-phpvigo-meetup.html</id><content type="html">&lt;p&gt;I had the luck to gave a talk at  the &lt;a class="reference external" href="https://www.meetup.com/es-ES/PHPVigo/"&gt;PHPVigo Meetup&lt;/a&gt;. It was a postgresql introduction to
all php community.&lt;/p&gt;
&lt;div style="width: 70%;" class="align-center" align="center"&gt;
&lt;script async class="speakerdeck-embed"
data-id="0909c5cdb8224c25a3f88ef113968609" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Thanks to &lt;a class="reference external" href="https://twitter.com/felixgomezlopez"&gt;Félix&lt;/a&gt; and &lt;a class="reference external" href="https://twitter.com/sergiocarracedo?lang=en"&gt;Sergio&lt;/a&gt; for organising this &lt;strong&gt;awesome&lt;/strong&gt;
meetup.&lt;/p&gt;
&lt;p&gt;Happy code!&lt;/p&gt;
</content><category term="blog"></category><category term="postgresql"></category><category term="phpvigo"></category><category term="talks"></category></entry><entry><title>O fracaso do MediaLab "A Industriosa"</title><link href="https://acalustra.com/o-fracaso-do-medialab-a-industriosa.html" rel="alternate"></link><published>2016-12-29T10:00:00+01:00</published><updated>2016-12-29T10:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-12-29:/o-fracaso-do-medialab-a-industriosa.html</id><summary type="html">&lt;p&gt;Poucas veces escribín con tanta tristeza, hoxe, pra finalizar con este 2016 vou
documentar o fracaso de levar a cabo o &lt;strong&gt;MediaLab A industriosa&lt;/strong&gt;, un proxecto
no que empecei a traballar aos inicios do ano, pra así promover unha necesidade
que ten a cidade, ademais de facer e ese necesario …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Poucas veces escribín con tanta tristeza, hoxe, pra finalizar con este 2016 vou
documentar o fracaso de levar a cabo o &lt;strong&gt;MediaLab A industriosa&lt;/strong&gt;, un proxecto
no que empecei a traballar aos inicios do ano, pra así promover unha necesidade
que ten a cidade, ademais de facer e ese necesario &lt;a class="reference external" href="https://vigopedia.com/biografias-antonio-sanjurjo-badia/"&gt;homenaxe a Sanjurjo Badía&lt;/a&gt;.  Este proxecto,
esta documentado na seguinte presentación:&lt;/p&gt;
&lt;div style="width: 70%;" class="align-center" align="center"&gt;
            &lt;script async style="witdth: 70%" class="speakerdeck-embed" data-id="d65d319f72324a50b554f9b88311b352" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
    &lt;/div&gt;&lt;p&gt;Cando expuxemos este proxecto, tiñamos pensando arranxar os seguintes
problemas:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Os universitarios terían un espazo onde coñecer xente que esta traballando en
empresas de I+D locais. Estes poderían recibir consellos de xente que traballa,
para así preparase mellor sobre as necesidades do futuro. Ao existir este fío
condutor, moitas empresas contratarían directamente a xente que estivera
presente no medialab.&lt;/li&gt;
&lt;li&gt;Os traballadores que teñan ideas terían un sitio onde encontrar validación ou
posibles solucións, polo que se conseguirían promover sinerxias en diferentes
proxectos nun nivel técnico. Como pasa en menor media cas meetups de Vigolabs.&lt;/li&gt;
&lt;li&gt;Sería un sitio de prototipado, polo que os asistentes a programas de
aceleración de empresas poderían usalos. Sería un sitio perfecto pra facer
xerminar produtos, cun custe so en tempo de traballo, non en ferramenta.&lt;/li&gt;
&lt;li&gt;O espazo é idóneo para proxectos como UVigo Motorsport, hackahtons, etc..  e
facer unha vinculación activa entre proxectos lúdicos  e a empresa. Proxectos
que teñen unha gran repercusión noutros países, e aquí case non se aprecia o
gran potencial que teñen.&lt;/li&gt;
&lt;li&gt;Sería a porta de entrada pra que a industria do mar, viñera e propuxera
proxectos ou ideas a un sector tecnolóxico. Como xa pasou no Hackathon Sanjurjo
Badía.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As bases económicas deste proxecto son relativamente grandes para un
traballador, pero relativamente pequenas para as administracións, sendo o custo
o seguinte:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;Laborais&lt;/strong&gt;: serían un traballador, cun custo total en torno aos 35.000€. Esta
persoa encargaríase dos socios, mantemento, promoción e abrir o espazo.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo electrónica&lt;/strong&gt;: Isto suporía  en torno aos 5000€, debido a que o
material é mínimo.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo prototipado&lt;/strong&gt;: Isto sería un dos mais custosos, 8000€. Que constaría
dun par de impresoras 3D, cortadora laser, etc..&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo madeira/fibra&lt;/strong&gt;: pantoroutes, fresadoras, etc.. Isto serían en torno
aos 5000€.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo matricería&lt;/strong&gt;: Torno e fresadoras manuais pra facer pequenas cousas en
ferro. Isto supón un custo en torno aos 9.000€, pero podería comprarse no
segundo ano ou conseguir algunha doazón de segunda man.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo eventos&lt;/strong&gt;: Cadeiras, mesas, proxector, estantes, iluminación etc..
isto suporía uns 4.000€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Temas legais&lt;/strong&gt;: Asesoría, Avogados, prevención de riscos laborais,
extintores, etc.. isto sería o mais compricado, 10000€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Espazo e gastos correntes&lt;/strong&gt;: Sen definir o espazo é compricado poder dar unha
cifra sobre isto.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Contando, que moita xente, axudaría e abriría en horas non laborais. O espazo
tería unha vida propia por moita xente da comunidade ao mais puro estilo
asociación veciñal. En canto ao presuposto, e grande no inicio, pero reduciríase
aos 80.000 euros anuais a partir do segundo ano(Laboral/Legais/Gastos
correntes).  Sendo un presuposto minúsculo en relación cos presupostos das
administracións localizadas en Vigo: Concello(230M€), Zona Franca (55M€),
Autoridade Portuaria (25M€), Deputación de Pontevedra (150M), Eixo Atlántico
(3M€), Xunta (9.000M€)&lt;/p&gt;
&lt;img alt="Hackahton Sanjurjo Badía participantes" class="align-center" src="img/hackathon-supertramp.jpg" /&gt;
&lt;p&gt;O espazo, que fala de aceleradoras, falase das existentes. En canto a empresa
tractoras, eu ofrecín os meus contactos, entre os  que estaban: Intel, IBM,
Udoo, Rolls&amp;amp;Royce, ademais de moitas empresas locais que querían ser padriños
deste espazo.&lt;/p&gt;
&lt;p&gt;O proxecto presentouse no Concello de Vigo inmediatamente despois do Hackathon
Sanjurjo Badía. E presentouse en Zona Franca a inicios de Outubro. Ambas
administracións, en maior ou menor media, amosaron a súa implicación no
proxecto, polo menos escoitaron, o que xa significaba un triunfo.&lt;/p&gt;
&lt;p&gt;Ca Autoridade portuaria de Vigo por desgraza, en ano e medio, non conseguimos ter
unha reunión con eles. Intentamos contactar con eles antes da &lt;a class="reference external" href="http://hacksb.vigolabs.gal/"&gt;Hackathon
Sanjurjo Badía&lt;/a&gt;, sendo imposible. Despois desta,
foi imposible cadrar axenda para ter unha reunión. Debido a nula comunicación,
temos que matar o proxecto. Non ten sentido facer un proxecto de &lt;a class="reference external" href="http://praza.gal/opinion/3527/vigo-capital-global-da-tecnoloxia-maritima/"&gt;Vigo cidade
tecnolóxica do mar&lt;/a&gt;,
sen a colaboración do Porto. Ademais nunca conseguimos, que se falara dun
proxecto en conxunto das administracións, pra fomentar isto como marca de
Vigo/Galicia.&lt;/p&gt;
&lt;img alt="https://www.flickr.com/photos/argonavigo/15943434738/in/photolist-qhSgFQ-8daG5x-7zivjp-pfJNgA-pfuhya-8o2Zav-9jAB6V-ehAaFM-FC8XAJ-yKkQ8e-BUkJnp-7KDW4e-i6tfa7-eHjmUQ-auhgxn-6kPgUy-i8pskM-nmhQ8B-7VN7ou-7FkDRJ-e5znoR-EZosUz-rfGD49-8rqdYg-aB5DMP-Cqxv5q-pQKmWQ-AUdqDW-DuuYRf-8zqpdQ-52svDK-8qPv7n-6QM9pD-6mihKF-6F1L5P-5hesZt-fekEQf-5Px7nm-61SbbG-aibNxw-FSqudV-xPCzJn-bufpWr-CkuJXS-o6AAep-5CK8UX-6sm6dS-A2nXBS-agyJKm-8LaPMa" class="align-center" src="img/vigo_ship.jpg" /&gt;
&lt;p&gt;Por desgraza no Gran Vigo somos soamente 600.000 persoas, Galicia ten menos de
3 millóns. É incrible que esteamos pelexados sur con norte, azuis con roxos,
fulanito con venganito, somos catro gatos e inda por riba non podemos poñer as
raíces para un proxecto de futuro. Se de verdade queremos que os nosos fillos
poidan vivir aquí teremos que entendernos, se non pasará como con pobos como
Mondariz ou Tui, que de ser grandes pobos fai un par de séculos, hoxe en día
quedaron reducidos a pequenos concellos. A globalización viu pra quedarse, e
vives con ela, ou cómete. Vigo e Galicia, dende o meu punto de vista, vai ser
comida, poñendo como exemplo a Detroit.&lt;/p&gt;
&lt;p&gt;Para mais INRI, o porto de Rotterdam, a través dun patrocinador da Hackathon,
mirou en internet o resultado da Hackathon Sanjurjo Badía. A raíz de un par de
correos eles ofrecéronnos traballo para incorporarnos no seu &lt;a class="reference external" href="https://www.portofrotterdam.com/en/events/opening-ramlab"&gt;proxecto de
promoción de empresas tecnolóxicas do mar&lt;/a&gt;. Temos envexa,
que a Autoridade Portuaria de Rotterdam leva cinco edicións da súa &lt;a class="reference external" href="http://worldporthackathon.com/"&gt;Hackathon&lt;/a&gt;, chamada World, pelexando co Mundo, non con
Marín ou Leixoes, e repartindo premios de 15.000€ aos asistentes. Mentres que a
propia Autoridade portuaria dotou o seu MediaLab das últimas novidades de
&lt;a class="reference external" href="https://www.portofrotterdam.com/en/news-and-press-releases/ramlab-opens-at-rdm-rotterdam"&gt;Impresión 3D en metal&lt;/a&gt;.
É unha pena que estas iniciativas en Vigo teñan que vir da man de persoas
alleas ao entorno marítimo, e que teñan que apostar o seu tempo e cartos en
facer algo que debería facer a administración pública.&lt;/p&gt;
&lt;p&gt;Todo parece indicar que o futuro de Vigo é &lt;a class="reference external" href="http://www.economiadigital.es/gles/notices/2016/12/crisis-galicia-industrias-77482.php"&gt;un destino turístico&lt;/a&gt;.
Acabando con todo iso que nos gustaba os de aquí, ir a praia e poder respirar,
ver as noticias de grandes barcos construídos, ou ir ao centro de Vigo e poder
non sentirte un guiri. Moitos galegos escapamos da vida onde hai turistas, e
&lt;strong&gt;Galicia estase convertendo nunha fulana barata do turismo&lt;/strong&gt;, e como
consecuencia, perdendo parte do seu encanto.&lt;/p&gt;
&lt;p&gt;Darlle, dende aquí, os meus parabéns aos proxectos de &lt;a class="reference external" href="http://www.matadoirocompostela.com/"&gt;Matadoiro (Compostela)&lt;/a&gt; e &lt;a class="reference external" href="http://colab.coruna.gal/es/"&gt;CoLab(A Coruña)&lt;/a&gt;, ambos proxectos de aprendizaxe aberto cun
gran recorrido en ambas cidades. Tamén recordarlle que o realmente importante é
buscarlle contexto local a eses espazos, e servir de utilidade a economía
local, para que esta poda tirar do espazo. Un sitio onde se xeran ideas de casa
intelixente non é sitio do que as economías locais poidan tirar, o contexto
nestes espazos é todo.&lt;/p&gt;
&lt;p&gt;Este artigo non significa unha despedida, significa que Vigolabs, vai dar un
bandazo, que non pivotar, adicándose mais a electrónica e facendo mais
tecnoloxía pura, sen estar enfocada ao mar. Abrindo o abanico de empresas que
non sexan puramente marítimas e enfocarse mais o entorno industrial,
automoción, e o mundo Maker, para así, ser de utilidade as empresas locais.&lt;/p&gt;
&lt;p&gt;Tamén teño que facer autocrítica. Sei que fixen moitas cousas mal. Esa
presentación chegou tarde (Xuño), o que eu ofrecía era algo moi innovador nunha
sociedade pouco innovadora, estou seguro, que se o medialab fora enfocado a
automoción tería moita mais tracción a curto prazo. Un dos errores mais grandes
foi que ese presentación non poñía onde cazar diñeiro de subvencións europeas,
algo que por desgraza era necesario. Ademais o meu artigo sobre empresas
tecnolóxicas marítimas tiña que ser a base de traballo, e non a última rabexada
da morte do proxecto.&lt;/p&gt;
&lt;p&gt;Finalizo así, un ano nefasto, que non conseguín levar a cabo un proxecto dos
que mais ilusión me fixo na miña vida. E moita xente terá envexa do que
conseguín, este ano puiden &lt;a class="reference external" href="https://twitter.com/eloycoto/status/788065364370423812"&gt;coñecer a Bruce Springsteen&lt;/a&gt;, gozar dun test
privado co &lt;a class="reference external" href="https://twitter.com/eloycoto/status/730831190350036992"&gt;4 veces campión do mundo de rallyes&lt;/a&gt;, estar presente na
inauguración da expo de &lt;a class="reference external" href="https://twitter.com/eloycoto/status/776131854046994432"&gt;50 anos de Volkswagen en competición&lt;/a&gt; en Berlin, ademais
de varios éxitos profesionais. Pero non conseguín que xente da cidade
escoitara, o que para min era o mais importante. Ademais, tamén levou a
desilusión a un grupo de excelentes enxeñeiros, que con isto, tamén estaban
ilusionados. Eles miraron que fallei, pedirlle as miñas desculpas a todos eles.&lt;/p&gt;
&lt;p&gt;Este post recórdame que meu apelido é Coto, que son a cuarta xeración que
emigra. En 1927, no Barco Almanzora, meu bisavó despediuse dende o peirao de
Vigo dirección Bos Aires. Meus avós acabaron en Amsterdam, meu pai volveu
despois de 20 anos. O 1 de Setembro do 2012 quedaron a chorar no aeroporto por
ver marchar o seu fillo. Este o 2016, foi o primeiro ano que mirei a miña avoa
dúas veces no mesmo ano, fíxome recordar que a emigración estragoume parte da
miña infancia. O nadal, pra min, xa non é estar ca familia, e estar cos amigos
que volven. Así de triste é a sociedade que lle deixamos aos futuros rapaces
galegos.&lt;/p&gt;
&lt;p&gt;Eu mentres seguirei collendo avións, e recordando, que en Galicia somos
incapaces de ver vinte metros mais aló, que seguimos sen coñecer a nosa
historia. Entrementres seguiremos discutindo  que o marco moveuse dous
centímetros, fraternité que din os franceses.&lt;/p&gt;
&lt;p&gt;Feliz ano novo.&lt;/p&gt;
&lt;div style="width: 100%;" class="align-center" align="center"&gt;
            &lt;iframe src="https://embed.spotify.com/?uri=spotify%3Atrack%3A2KQq1pn2eUDEFitdQ4WzzZ"  height="80" frameborder="0" width="60%"&gt;&lt;/iframe&gt;
    &lt;/div&gt;</content><category term="blog"></category><category term="tecnoloxía"></category><category term="vigo"></category><category term="mar"></category></entry><entry><title>Estase a converter Vigo nunha potencia tecnolóxica do mar?</title><link href="https://acalustra.com/estase-a-converter-vigo-nunha-potencia-tecnoloxica-do-mar.html" rel="alternate"></link><published>2016-12-12T10:00:00+01:00</published><updated>2016-12-12T10:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-12-12:/estase-a-converter-vigo-nunha-potencia-tecnoloxica-do-mar.html</id><summary type="html">&lt;p&gt;Quen me coñece sabe que ultimamente so falo de tecnoloxía orientada ao mar. Xa
escribín os motivos neste artigo de &lt;a class="reference external" href="http://praza.gal/opinion/3527/vigo-capital-global-da-tecnoloxia-maritima/"&gt;praza.gal&lt;/a&gt;. Aproveitando o final de ano
fixen unha nova revisión de empresas tecnolóxicas galegas orientadas a
tecnoloxía no mar. Un traballo que fixera o ano pasado pra preparar a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Quen me coñece sabe que ultimamente so falo de tecnoloxía orientada ao mar. Xa
escribín os motivos neste artigo de &lt;a class="reference external" href="http://praza.gal/opinion/3527/vigo-capital-global-da-tecnoloxia-maritima/"&gt;praza.gal&lt;/a&gt;. Aproveitando o final de ano
fixen unha nova revisión de empresas tecnolóxicas galegas orientadas a
tecnoloxía no mar. Un traballo que fixera o ano pasado pra preparar a
&lt;a class="reference external" href="http://hacksb.vigolabs.gal/"&gt;Hackathon Sanjurjo Badía&lt;/a&gt; e que cría conveniente
volver a revisar. Os datos, dende o meu punto de vista, creo que son &lt;em&gt;mellores e
esperanzadores&lt;/em&gt;. Ademais, gustaríame que este artigo dera visión deste tipo de
empresas, moitas veces, descoñecidas.&lt;/p&gt;
&lt;p&gt;A punta de lanza, sen ningunha dúbida, segue sendo &lt;a class="reference external" href="http://www.marineinstruments.es/"&gt;Marine Instruments&lt;/a&gt;. Cunha facturación cércana aos &lt;strong&gt;40 millóns
de euros&lt;/strong&gt;, e mais de un centenar traballadores, están en pleno proceso de
diversificación, con proxectos de tanto interesante como &lt;a class="reference external" href="http://www.marineinstruments.es/marine-instruments-on-the-press/?lang=en"&gt;o dron&lt;/a&gt;
pra detectar bancos de atúns ou o unha &lt;a class="reference external" href="http://www.marineinstruments.es/monitoring-systems/electronic-eye-plus/?lang=en"&gt;cámara&lt;/a&gt;
pra contribuír a pesca sostible. Un dez pra eles! Son un unicornio galego en
tecnoloxía, e dende o meu punto de vista, unha das empresas con mais futuro da
cidade.&lt;/p&gt;
&lt;div align="center" class="align-center"&gt;
    &lt;iframe width="560" height="315" src="https://www.youtube.com/embed/46vB4zRS6Nk"
    frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;
&lt;/div&gt;&lt;p&gt;Seguindo co peixe, temos que destacar a empresa &lt;a class="reference external" href="http://www.marexi.com/MUSE/index.html"&gt;MarexiTech&lt;/a&gt;. A viguesa esta usando tecnoloxía
punta pra varios dos seus produtos. O seu último produto baséase na loita contra
o Anisakis, aportando unha solución moi interesante pra varios puntos da cadena
alimentaria, cómpre destacar este &lt;a class="reference external" href="http://elcomidista.elpais.com/elcomidista/2016/07/15/articulo/1468600066_893151.html"&gt;artigo&lt;/a&gt;
do periódico &lt;em&gt;El Pais&lt;/em&gt;. En Nigrán, tamén esta a empresa &lt;a class="reference external" href="http://oceanvisiongroup.com/"&gt;Ocean Vision&lt;/a&gt;, que subministra solucións pra a mellora
continua nas granxas acuicolas, un sector, case non exprotado na Galicia, pero
que pode ser un piar moi forte pra economía Galega na próxima década.&lt;/p&gt;
&lt;p&gt;Nos inicios de decembro, botouse, o que pra mín, &lt;strong&gt;é un dos proxectos mais
innovadores deste 2016&lt;/strong&gt;. A viguesa &lt;a class="reference external" href="http://ferri-sa.es/gl/"&gt;Industrias Ferri&lt;/a&gt;, fabricou o &lt;a class="reference external" href="http://www.farodevigo.es/economia/2016/12/02/ferri-espera-cliente-pronto-dron/1580908.html"&gt;dron mais grande de Europa&lt;/a&gt;
pra o rescate rápido, e vixilancia marítima. Este é un enorme caso de éxito!
Primeiro: demostra como unha empresa metalúrxica pode ser moi innovadora da man
da tecnoloxía e a universidade, pra continuar, este dron pon en releve a
transversalidade de sistemas usados na automoción ou aviación no sector
marítimo.&lt;/p&gt;
&lt;div align="center" class="align-center"&gt;
            &lt;blockquote class="twitter-tweet" data-lang="es"&gt;&lt;p lang="es" dir="ltr"&gt;Llegó el día! Hoy botamos el primer no tripulado marino!! &lt;a href="https://t.co/hdJ1cTMCrA"&gt;pic.twitter.com/hdJ1cTMCrA&lt;/a&gt;&lt;/p&gt;&amp;mdash; Industrias FERRI (@IndustriasFERRI) &lt;a href="https://twitter.com/IndustriasFERRI/status/804199544313540608"&gt;1 de diciembre de 2016&lt;/a&gt;&lt;/blockquote&gt;
            &lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;En termos de enerxías renovables tamén se pode falar de melloría. Ademais do
proxecto moi avanzado de &lt;a class="reference external" href="http://www.magallanesrenovables.com/es/proyecto"&gt;Magallanes Renovables&lt;/a&gt;, neste ano tamén se iniciou
un proxecto dende a Universidade de Vigo, &lt;a class="reference external" href="http://www.life-demowave.eu/en/"&gt;life-demowave&lt;/a&gt;, pra aproveitar a enerxía das correntes
mariñas. Este proxecto será finalizado no 2018, e temos que poñer en relevancia
que existen varias empresas privadas involucradas (ACSM, Grupo Josmar). En canto
ao futuro deste tipo de enerxía, teño o presentimento de que crecerá dunha forma
exponencial, despois do paquete de 110 Billóns de euros promovidos por parte da
&lt;a class="reference external" href="http://europa.eu/rapid/press-release_IP-16-4009_en.htm"&gt;comunidade europea ata o 2021&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;No ámbito portuario, os puntos de innovación son mais versátiles, dado a que se
involucra opcións terrestres. A axencia Portuaria de Vigo esta levando a cabo un
conxunto de proxectos de innovación chamado &lt;a class="reference external" href="http://bluegrowthvigo.eu/en/"&gt;Blue-growth&lt;/a&gt;. Este plan implica a mellora da eficiencia en
varias áreas. Neste último ano tamen se  poden salientar os últimos proxectos de
I+D da empresa tecnolóxica &lt;a class="reference external" href="https://www.imatia.com/"&gt;Imatia&lt;/a&gt;, eles actualmente
contan cun equipo adicado a un &lt;a class="reference external" href="https://www.imatia.com/autoport-automated-vehicles-for-seaports/"&gt;proxecto de vehículos autónomos&lt;/a&gt; pra a
carga e descarga en terminais RO-RO.  Por outra parte, a viguesa &lt;a class="reference external" href="http://www.ibercisa.es/"&gt;Ibercisa&lt;/a&gt; despregou un sistema revolucionario de atraque pra
condicións adversas nun dos maiores portos de &lt;a class="reference external" href="http://www.farodevigo.es/economia/2016/07/31/ibercisa-entrega-26-maquinillas-amarre/1507610.html"&gt;Latinoamérica&lt;/a&gt;,
actualmente encontrase en negociacións de imprementalo en mais portos. Pra
rematar, nos temas portuarios, &lt;a class="reference external" href="http://www.kaleidologistics.com/"&gt;Kaleido Logistics&lt;/a&gt;, que inda que é unha empresa loxística,
esta levando a cabo unha &lt;a class="reference external" href="http://info.rocketspace.com/logistics-tech-accelerator"&gt;aceleración de startups, con moita base tecnolóxica,&lt;/a&gt; que favorece a este
ecosistema. Ademais, eles mesmos, están impremtando tecnoloxía blockchain, neste
caso, pra os seus procesos internos.&lt;/p&gt;
&lt;div class="align-center" align="center"&gt;
&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="es" dir="ltr"&gt;Grande
como siempre Xoan Martinez de &lt;a
href="https://twitter.com/KALEIDOLogistic"&gt;@KALEIDOLogistic&lt;/a&gt; contando en &lt;a
href="https://twitter.com/circulogalicia"&gt;@circulogalicia&lt;/a&gt; su experiencia con
&lt;a href="https://twitter.com/hashtag/Blockchain?src=hash"&gt;#Blockchain&lt;/a&gt;
aplicado en la &lt;a
href="https://twitter.com/hashtag/log%C3%ADstica?src=hash"&gt;#logística&lt;/a&gt; &lt;a
href="https://t.co/oxoSoMVwEI"&gt;pic.twitter.com/oxoSoMVwEI&lt;/a&gt;&lt;/p&gt;&amp;mdash; Roberto
P. Marijuán (@robervigo) &lt;a
href="https://twitter.com/robervigo/status/804290750498406400"&gt;December 1,
2016&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;O futuro, a curto prazo, parece que será mellor. Todo indica que o Porto de Vigo
vai lanzar unha aceleradora de startups no 2017, seguindo o modelo de &lt;a class="reference external" href="http://www.zfv.es/viavigo/index.php?option=com_content&amp;amp;task=view&amp;amp;id=72&amp;amp;Itemid=36&amp;amp;idth5=117"&gt;ViaVigo&lt;/a&gt;
e &lt;a class="reference external" href="http://www.bfauto.es/gl/"&gt;BFAuto&lt;/a&gt;.  &lt;a class="reference external" href="http://www.astilleroscardama.com/en/"&gt;Astilleros Cardama&lt;/a&gt; esta traballando en varios proxectos de
I+D con moita base tecnolóxica. Por outra parte o &lt;a class="reference external" href="http://www.cetmar.org/?lang=en"&gt;CETMAR&lt;/a&gt; (Centro tecnolóxico Mariño) segue sendo ese
partner perfecto pra todos estas startups que empezan neste mundo.&lt;/p&gt;
&lt;p&gt;O número de empresas locais con base tecnolóxica marítima esta crecendo. Estou
seguro que falta algunha, que non coñezo, e non están aquí citadas. Creo que é
hora de que os case 8.000 millóns de euros que xera o Mar en Galicia (Informe
Ardan 2016) se poidan &lt;strong&gt;investir en innovación galega&lt;/strong&gt;. Igual é o momento de que
dende as instucións teñan un plan de promoción de &lt;strong&gt;&amp;quot;Vigo/Galicia capital
tecnolóxica do mar&amp;quot;&lt;/strong&gt;, que dende o meu punto de vista, debería consistir nos
seguintes temas:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Unha plan estratéxico pra fomentar a marca internacionalmente.&lt;/li&gt;
&lt;li&gt;Unha universidade que xere mais proxectos coas carreiras de
Industrias(Materiais), TI (Electrónica e comunicacións) e Bioloxía &amp;amp; campus do
mar.E fomentar a creación de equipos multi-disciplinares pra fomentar novas ideas.&lt;/li&gt;
&lt;li&gt;A promoción dun Medialab urbano pra a promoción de proxectos e que sirva
pra prototipar proxectos de forma transversal. E ao mesmo tempo dar cabida a
proxectos como &lt;a class="reference external" href="http://www.gciencia.com/ciencia-en-vivo/pole-position-uvigo-motorsport/"&gt;UVigo Motorsport&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Plan de promoción pra que estas empresas estean presentes en &lt;a class="reference external" href="http://www.navalia.es/en/"&gt;Navalia&lt;/a&gt; e &lt;a class="reference external" href="http://www.conxemar.com/v_portal/apartados/apartado.asp"&gt;Conxemar&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Crear un Máster Universitario relacionado ca tecnoloxía do mar pra reter e
atraer talento.&lt;/li&gt;
&lt;li&gt;Empezar o estudo pra traer a Vigo a
&lt;a class="reference external" href="http://www.oceanologyinternational.com/"&gt;Oceanology&lt;/a&gt; (Feira tecnolóxica do
mar) nun futuro proximo.&lt;/li&gt;
&lt;li&gt;Facer unha conferencia adicada aos técnicos sobre a tecnoloxía aplicable ao
mar (Sonars, comunicacións satélites, conexións de radio, acústica, materiais,
deseño).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Esta é o meu resume do 2016. Oxalá poida publicar un novo artigo no 2017, no que
poida por en valor novos proxectos, novas ideas. Que o MediaLab se faga
realidade, poder escribir que a universidade colabora estreitamente cas
asociacións tecnolóxicas de Vigo (&lt;a class="reference external" href="http://phpvigo.com/"&gt;PhpVigo&lt;/a&gt;, &lt;a class="reference external" href="https://www.python-vigo.es/"&gt;Python Vigo&lt;/a&gt;, &lt;a class="reference external" href="http://vigolabs.gal/"&gt;Vigolabs&lt;/a&gt;, &lt;a class="reference external" href="https://plus.google.com/u/0/communities/104458805154699272096"&gt;GDG Vigo&lt;/a&gt;,etc..), poder
resaltar a colaboración da axencia portuaria con Vigolabs, que axude a educar
sobre o mar a todos eses técnicos. E en definitiva, &lt;strong&gt;que o 2017 poda escribir
que moitos dos galegos volveron por un proxecto ilusiónante, que é converter
Galicia en capital tecnolóxica do mar.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Tamén me gustaría poder escribir sobre a finalización do minifundismo
empresarial Galego. Por desgraza, existen moitas empresas galegas con menos de
10 traballadores. É esencial que estas empresas crezan por enriba da media
centea, pra de verdade poderse adicar a innovación e reducir a competencia entre
nós. En galicia, temos demasiados medos as unións, xa se esas unións foran entre
empresas tecnolóxicas e metalúrxicas; &lt;strong&gt;sería unha detonación enorme que levaría
a cidade a un éxito rotundo.&lt;/strong&gt;&lt;/p&gt;
</content><category term="blog"></category><category term="tecnoloxía"></category><category term="vigo"></category><category term="mar"></category></entry><entry><title>Pycon Galicia 2016 talk</title><link href="https://acalustra.com/pycon-galicia-2016-talk.html" rel="alternate"></link><published>2016-09-17T16:00:00+02:00</published><updated>2016-09-17T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-09-17:/pycon-galicia-2016-talk.html</id><content type="html">&lt;p&gt;I had the luck to gave a talk at &lt;a class="reference external" href="http://https://python-vigo.github.io/pyday-2016//"&gt;PyCon Galicia 2016&lt;/a&gt;.The topic was about the
future of developement from my POV.&lt;/p&gt;
&lt;div style="width: 70%;" class="align-center" align="center"&gt;
&lt;script async class="speakerdeck-embed"
data-id="aa586cf790a24bbc84707189435e2c42" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Thanks to &lt;a class="reference external" href="https://twitter.com/python_vigo"&gt;Python Vigo&lt;/a&gt; and big thanks to
&lt;a class="reference external" href="https://twitter.com/alexhermida"&gt;Alex Hermida&lt;/a&gt; and &lt;a class="reference external" href="https://twitter.com/fpuga"&gt;Fran Puga&lt;/a&gt; to organize it.&lt;/p&gt;
&lt;p&gt;Happy code!&lt;/p&gt;
</content><category term="blog"></category><category term="gordon"></category><category term="python"></category><category term="pycon galicia"></category><category term="pyvigo"></category><category term="lamdba"></category><category term="talks"></category></entry><entry><title>Why Tesla should build the European factory in Vigo?</title><link href="https://acalustra.com/why-tesla-should-build-the-european-factory-in-vigo.html" rel="alternate"></link><published>2016-07-26T16:00:00+02:00</published><updated>2016-07-26T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-07-26:/why-tesla-should-build-the-european-factory-in-vigo.html</id><summary type="html">&lt;p&gt;Let me introduce you into &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Galicia_(Spain)"&gt;Galicia&lt;/a&gt;. Galicia is in the north-west
of Spain and up-north of Portugal. Galicia is a historic state that is part of
Spain since hundred of years ago. The primary industries of Galicia are fishing,
automotive, farming and textile. In the last years is know as …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Let me introduce you into &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Galicia_(Spain)"&gt;Galicia&lt;/a&gt;. Galicia is in the north-west
of Spain and up-north of Portugal. Galicia is a historic state that is part of
Spain since hundred of years ago. The primary industries of Galicia are fishing,
automotive, farming and textile. In the last years is know as &lt;strong&gt;Galifornia&lt;/strong&gt;,
you can read &lt;a class="reference external" href="https://www.quobis.com/2013/08/09/come-to-galifornia-galician-california/"&gt;here&lt;/a&gt;
more about it.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;a class="reference external image-reference" href="https://www.flickr.com/photos/dfvergara/15433431851/in/photolist-pvNnAB-mwxFnv-F4nP3t-qNnT1A-8qjxqR-qNnT1W-nHaWPs-sckuDw-c1SsT9-cP6RUy-ayECzA-gTCkRb-pmh4Do-sckuCQ-6B5kaS-gissgj-aKVQNt-pv4eWe-oUxx8U-sckuDb-b6jNGn-bf38c4-oYVCYj-63ZfVW-qoWYbe-5HHWxF-5BgYsR-d9Xeo6-ptYGLM-pq22XU-rTps4i-pvFiNa-ugHU2p-byqTcS-bDHqv2-bwAMjn-cTAFVf-fjMCXw-7kVNe9-8gvoDT-rtwTLB-qUKBGj-5vHYgH-dWZdh5-iMobvy-rVhy3M-byBYyF-4y7vad-dNJ336-q9gmq4"&gt;&lt;img alt="class" src="img/tesla/vigo_ria.jpg" /&gt;&lt;/a&gt;
&lt;p class="caption"&gt;Vigo landscape&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;But without being boring, let me introduce you why next Tesla factory should be
in &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Vigo"&gt;Vigo-Galicia&lt;/a&gt;.&lt;/p&gt;
&lt;div class="section" id="plenty-of-cheap-lands-to-set-up-a-factory"&gt;
&lt;h2&gt;Plenty of cheap lands to set up a factory&lt;/h2&gt;
&lt;p&gt;From early 1940 &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Vigo"&gt;Vigo&lt;/a&gt; has grown a lot,
from 20K people to 300K, it was caused by the industrial sector and led by
&lt;a class="reference external" href="https://www.google.es/search?q=citroen+Vigo&amp;amp;client=firefox-b&amp;amp;source=lnms&amp;amp;tbm=isch&amp;amp;sa=X&amp;amp;ved=0ahUKEwjwwPexw4fOAhWH7xQKHXBTBLUQ_AUICCgB&amp;amp;biw=1920&amp;amp;bih=995#imgrc=gj4X5UCQAMnUgM%3A"&gt;Citroen car factory&lt;/a&gt;.
Since then a lot of factories have moved their manufacturing to Vigo Area. At
the moment Vigo is the biggest city in population in Galicia and 9th in Spain.&lt;/p&gt;
&lt;p&gt;Industrial is a hight priority of the council and the government, so they use to
anticipate to the companies and new plans to accommodate more factories are
designed continuously. In early 2012, a new &lt;a class="reference external" href="http://www.zonafrancavigo.com/red/index.php?id=642&amp;amp;option=com_content&amp;amp;task=view&amp;amp;idth1=7&amp;amp;Itemid=262&amp;amp;idioma=en"&gt;3M square meters area was developed
with all services&lt;/a&gt;
(highway, train, high-speed Internet connection) and it's ready for all the
facilities for company's employees (residential areas, public transport, hotels,
restaurants, etc.. )&lt;/p&gt;
&lt;p&gt;This space was developed in 2005, and the idea was to host the first Mitsubishi
Batteries factory in Europe. However the Tsunami in Japan and its consequences
resulted in a cancellation of the project, so now that space is ready to be
taken by another company.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="good-logistics-port-airport-train-ave"&gt;
&lt;h2&gt;Good Logistics: port, airport, train, AVE&lt;/h2&gt;
&lt;p&gt;Automotive factories and heavy industry have a problem that it’s not easy to
solve, distribution. Vigo hosts one of the most productive PSA group factory
per-square-meter in the world, so the city has learnt a lot from the last fifty
years about logistics.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://puertodevigo.com/category/portada/"&gt;Vigo Port&lt;/a&gt; is one of the biggest
Europe ports. At the moment council and government are working to extend it a
bit more. Last May the council started a project to provide service to the new
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/Roll-on/roll-off"&gt;RO-RO&lt;/a&gt; ships with two access
ramps. In terms of shipping lines, Vigo counts with more than 50 shipping lines
as you can see in the following map.&lt;/p&gt;
&lt;iframe width="100%" height="520" frameborder="0" src="https://eloycoto.carto.com/viz/2156f488-4d80-11e6-aa0f-0ee66e2c9693/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen&gt;&lt;/iframe&gt;&lt;p&gt;Concerning Iberia distribution can be done using the train. It has gotten
improved in the last years, and all Iberia and France will be connected using
the high-speed train. This high-speed train is under development and in the
following years a lot of new routes will be opened.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/tesla/bouzas.jpg" /&gt;
&lt;p class="caption"&gt;Ro-Ro terminal, 900K square meters and nine ramps&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I spoke about the car’s movement, but logistics is not only about cars. In
Galicia(A Coruña) is located Inditex (Zara) headquarters, one of the TOP-25
companies in Europe. Zara has a good compromise with the quality and all batch
of clothes are checked in Galicia offices, so container logistic is well
structured over Galicia.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/tesla/fly_to_vigo.jpg" /&gt;
&lt;p class="caption"&gt;Current Vigo aiport direct connections to the main EU airports&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;It’s important to mention a few companies that are making some innovations in
logistics. Our flagship, &lt;a class="reference external" href="http://www.kaleidologistics.com/"&gt;Kaleido Logistic&lt;/a&gt;, is one of the most innovative logistics
enterprises in europe, for example, &lt;a class="reference external" href="http://info.rocketspace.com/logistics-tech-accelerator"&gt;last March they announced a new startup
accelerator&lt;/a&gt; with the
San Francisco based RockSpace.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="hundreds-of-well-educated-engineers-and-scientists"&gt;
&lt;h2&gt;Hundreds of well-educated engineers and scientists&lt;/h2&gt;
&lt;p&gt;So as you see the government quite focuses in the well-equipped space to do
business and make companies life easier. But it'll be difficult to be located
here if you don’t have a good workforce. So the three universities are the key
of our successful histories. Vigo University is quite young (~25 years), the
main topics are industrial, electronics and telecommunications. A second branch
is under development with BioTechnologies and Sea (is the second main industry
in the city).&lt;/p&gt;
&lt;p&gt;Spanish university, in general, improved a lot in the last years and keeps
growing each year. These well-educated students are providing results now, for
example, tech companies like &lt;a class="reference external" href="http://quobis.com"&gt;Quobis&lt;/a&gt; (World leader in
WebRTC solutions), &lt;a class="reference external" href="https://www.televes.com/en/eng/home"&gt;Televes&lt;/a&gt; (World
leader in TV communications), &lt;a class="reference external" href="http://www.marineinstruments.es/?lang=en"&gt;Marine Instruments&lt;/a&gt; (World Leader in buoys for
fishing). These companies were founded by local students.&lt;/p&gt;
&lt;p&gt;But these students are part of multiple foreign companies that are based here
and they provide quite successful products. For example, all the robots that
Citroen are using in Vigo factory were made by local workforce; I need to say
that the CNC expertise in Vigo is quite valueable.&lt;/p&gt;
&lt;p&gt;As each city, we have a startup movement; a few entrepreneur try to build their
companies. There is a gap between Galicia and startup ecosystem; VC capital is
too small. In the last year, some R&amp;amp;D projects died during cash-flow problems.
There were some real projects: like Satelite launch and some Electric car
charger; both died caused by cash.&lt;/p&gt;
&lt;p&gt;In 2008 Spain had a big bank crisis, so getting foreign investment were too
difficult. Meanwhile, all the hundred well-educated students finish their
studies, and they can't get work. The result of this equation was that a lot of
young people move to work abroad (Me included). Nowadays thousands of Vigo
students moved to UK, France, Germany, etc... Linkedin says that more than 1000
engineers from the University of Vigo are in London, more than 300 in France,
and more than 500 in Germany. These are only from Vigo University, in Galicia,
we had three different Universities. These engineers want to be in their
hometown with their families so a new Tesla Factory will be an excellent option
to come back to home.&lt;/p&gt;
&lt;p&gt;On the other hand, a recent study made by &lt;a class="reference external" href="http://www.elconfidencial.com/"&gt;&amp;quot;El
Confidencial&amp;quot;&lt;/a&gt; reported that &lt;a class="reference external" href="https://translate.google.com/translate?hl=en&amp;amp;sl=es&amp;amp;tl=en&amp;amp;u=www.elconfidencial.com%2Fespana%2Fgalicia%2F2016-07-25%2Fgalicia-morrina-emigracion-argentina-europa_1237613%2F"&gt;20% of the total
Spain immigration is from
Galicia&lt;/a&gt;.
In 2015 Galicia represented around 5.5% of the Spanish population.&lt;/p&gt;
&lt;iframe width="100%" height="520" frameborder="0" src="https://manuelvarfar.carto.com/viz/704e1a5c-442b-11e6-a868-0e787de82d45/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen&gt;&lt;/iframe&gt;&lt;/div&gt;
&lt;div class="section" id="public-support"&gt;
&lt;h2&gt;Public support&lt;/h2&gt;
&lt;p&gt;As you read, the government is pretty involved with the private company's
success. Being part of Vigo means that a new factory like Tesla can use the Duty
Free area, where goods that are meant to be reshipped to another country don’t
need to pay duties. This will be useful for Tesla logistics in Europe.&lt;/p&gt;
&lt;p&gt;In the other hand, nowadays Galicia government has a financial plan called
&lt;a class="reference external" href="http://www.igape.es/es/ser-mais-competitivo/galiciaindustria4-0"&gt;Industry 4.0&lt;/a&gt;. This
program is based to help private companies with grants up to 40% of the private
investment in the automatization of the process, without limit in the top, so
for each $1M that Tesla invest in innovation, Galicia government will return
$400K (This have some constraints, but that is the main idea)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="automotive-cluster-in-the-region"&gt;
&lt;h2&gt;Automotive cluster in the region&lt;/h2&gt;
&lt;p&gt;As I started before, Vigo is pretty involved in the automotive sector. The Citroen
Factory building was a boost for the city in 1960, and nowadays we have a
high-quality network of automotive providers in the area.&lt;/p&gt;
&lt;p&gt;In the early 2000s, which were good years to all of these vendors, some of them
started to work with different brands, so nowadays all the auxiliary providers
had experience with more vendors, they are not locked with Citroen. This network
built a few years ago a new association of companies to set waypoints for the
near future about the common benefits.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/tesla/valladares.jpg" /&gt;
&lt;/div&gt;
&lt;p&gt;Close to this cluster of providers and related to provide solutions to this
companies, the government launched innovation centers to provide high-tech
solutions to local factories. &lt;a class="reference external" href="http://ctag.com/"&gt;CTAG&lt;/a&gt; is the flagship for
innovation in cars; this 500 people company provides crash tech services, sounds
experience and all kind of technology related to automobiles. Another technology
center that needs to be mention is &lt;a class="reference external" href="http://www.aimen.es/index.php?option=com_content&amp;amp;task=view&amp;amp;id=13&amp;amp;Itemid=59"&gt;Aimen&lt;/a&gt;,
it is focussed on the material resistance, durability, and automatic cutting
process.&lt;/p&gt;
&lt;div style="text-align: center;"&gt;&lt;iframe src="https://player.vimeo.com/video/120029828?title=0&amp;byline=0" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;a href="https://vimeo.com/120029828"&gt;CTAG - Automotive Techonology Centre of Galicia&lt;/a&gt; from &lt;a href="https://vimeo.com/user25279529"&gt;CTAG&lt;/a&gt; on &lt;a href="https://vimeo.com"&gt;Vimeo&lt;/a&gt;.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;It’s quite remarkable that this is not new, this is a historical, in 1950 in
Ourense we had the luck to have one of the biggest creators of the century:
&lt;a class="reference external" href="http://yale.universitypressscholarship.com/view/10.12987/yale/9780300121094.001.0001/upso-9780300121094"&gt;Eduardo
Barreiros&lt;/a&gt;,
this guy built a company that converts petrol truck engines to diesel. Bussines
was very successful and in 1959 it was acquired by Chrysler.&lt;/p&gt;
&lt;p&gt;Around all car manufacturing and the provider network, Galicia can be proud to
host some automotive companies. For example, &lt;a class="reference external" href="http://www.urovesa.com/en/vehiculos.php"&gt;Urovesa&lt;/a&gt; provides car/trucks solutions to
military and firefighters, that is used by almost all European armies. About
trucks, Ourense based &lt;a class="reference external" href="http://www.unvibus.com/en/"&gt;UNVI&lt;/a&gt; build thousands of
trucks and buses to all Europe. Related to the innovation, we need to mention a
small company that produces &lt;a class="reference external" href="http://little-cars.es/"&gt;thousands of electric recreational cars per year&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="good-standard-of-life-for-the-employees"&gt;
&lt;h2&gt;Good standard of life for the employees&lt;/h2&gt;
&lt;p&gt;One of the things that I’m too proud to be in Galicia is the level of the
living here. Galicia is a place that you can buy a home for €200.000, take a
beer for €1.5 and dinner outside for €14. In the other hand, in Spain all the
university/scholarship are nearly free, all the National Insurance Services is
running by the local state so no one should be worried about nothing less than
their work.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;a class="reference external image-reference" href="https://www.flickr.com/photos/laspatatastienenojos/13693274414/in/photolist-mS2Bqb-2UykCx-76mE3e-2UymBH-FyeWR-76mE2R-76mgU6-Fydab-b4bnJx-56ftrw-56ftpJ-3LBRhv-4KTJzG-7VvFnv-4KPtUT-2UCBJw-4KTJaE-76mE34-4KPtSx-2UCJgm-2Uyi3P-2UykSn-4KTJ6s-4KPsJx-7VvWUt-4KPtuT-2UyiwK-4KPsEk-2UCKZE-i17rgY-4KPtkv-3Mb74p-4KPu9F-4KPtdv-5FncpS-bMUkJc-qBTRwM-9EFppY-9EFm9N-9EFiwQ-FydfE-9BoNEu-9BoUJd-9BkFsa-9BkfcF-9Bosx5-9Boy3Q-9BojkN-9BoCRj-9BoJgL"&gt;&lt;img alt="class" src="img/tesla/baiona.jpg" /&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;Regarding of living here, you can go to one of the &lt;a class="reference external" href="https://www.theguardian.com/travel/2007/feb/16/beach.top10"&gt;best beaches&lt;/a&gt; in the world
(Guardian said that), you can go to the top of the mountains and enjoy the
&lt;a class="reference external" href="http://www.mirror.co.uk/lifestyle/travel/europe-short-haul/spains-galicia-region-gold-star-7085073"&gt;Galician lifestyle.&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="renewables-energy-ecosystem"&gt;
&lt;h2&gt;Renewables energy ecosystem&lt;/h2&gt;
&lt;p&gt;Renewables energy means a lot for a company like Tesla, a lot of us want the
world more sustainable, but for that, we need to work together. Galicia is too
green, and we want to keep at it is, for that in 2006-2008 the government made
a plan to be 100% sustainable using renewable energy. In 2008, Spain fall into
the crisis and this plan can’t be executed at all, but we have a good
renewables bases.&lt;/p&gt;
&lt;p&gt;Nowadays the 30% of the total energy is generated by wind power. On the other
hand, the hydropower represents another 40%. In few years I’m sure that Galicia
will be 100% green.&lt;/p&gt;
&lt;p&gt;Related with the companies working in the renewables energy? Yes! &lt;a class="reference external" href="http://www.ganomagoga.es/en/"&gt;Gamonagoga&lt;/a&gt; and &lt;a class="reference external" href="http://www.gestampren.com/"&gt;Gestamp&lt;/a&gt;
are one of our biggest companies around the wind power; they can build all
aerogenerator pieces. But our experience in ship building industry create third
party companies like &lt;a class="reference external" href="http://ferri-sa.es/en/"&gt;Industrias Ferri&lt;/a&gt;; they make
cranes to Ocean Wind Power farms. This shipbuilding expertise help to innovate
on tidal energy, at the moment three different companies are working in
validation this technology. &lt;a class="reference external" href="http://ecoforest.es/en/"&gt;Ecoforest&lt;/a&gt; can’t be
forgotten, one of the first enterprises that think in pellet boilers, and
nowadays they are pretty big for the country.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;a class="reference external image-reference" href="http://www.lavozdegalicia.es/noticia/empresas/2015/10/30/cardama-bota-trimaran-magallanes/0003_201510V30C5993.htm"&gt;&lt;img alt="Cardama's Shipyard Tidal energy factory" src="img/tesla/cardama.jpg" /&gt;&lt;/a&gt;
&lt;p class="caption"&gt;Cardama Shipyard Tidal energy generator prototype launched last year&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I need to mention the bad parts, two years ago Spanish government added a
penalty to the sun energy, so in the last few years, this generated a lot of
controversial issues about that. I hope that this bill will be removed and keep
Spain as green as all Spanish people want!&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="industrial-ecosystem"&gt;
&lt;h2&gt;Industrial ecosystem&lt;/h2&gt;
&lt;p&gt;A lot of things related to cars manufacturing, but what about the industrial
ecosystem?. The Industrial Revolution was not too big in Vigo, &lt;a class="reference external" href="https://es.wikipedia.org/wiki/Antonio_Sanjurjo"&gt;Sanjurjo Badía&lt;/a&gt; led this revolution, he was
one of the first businessmen that created the first factories and shipyards in
the city, it’s nice to see that in early &lt;a class="reference external" href="http://www.vigoenfotos.com/es/vigo/museo/mar-galicia/submarino-sanjurjo"&gt;1900 he built a submarine.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Speaking about Galicia is too important to mention the shipyards, more than then
thousand employees are working directly in the shipyards. Moreover, Galicia is
the first door of the Atlantic Ocean means that it has one of the biggest
fishing ports in Europe, and it’s the central point of freezing fish in Europe.
I can’t found a real statistics of how many people is working related with the
sea, but it’ll close to 50.000 people.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Vigo Shipyards" src="img/tesla/vigo_shipyards.jpg" /&gt;
&lt;p class="caption"&gt;Barreras shipyards. Offshore support vessel&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Related with metal/aluminium there are some top companies in the area, as an
example, &lt;a class="reference external" href="https://www.cortizo.com/"&gt;Cortizo&lt;/a&gt; is one of the biggest companies
associated with aluminum.&lt;/p&gt;
&lt;p&gt;And Inditex(Zara) can’t be forgotten in this section; the company has their
&lt;a class="reference external" href="https://www.inditex.com/en/media/multimedia_gallery/video/arteixo"&gt;headquarters in A coruña&lt;/a&gt; and all
concerned with their new stores, design, tools, etc… Is built/managed mainly
from Galicia. So it have been a boost for our industrial ecosystem.&lt;/p&gt;
&lt;p&gt;I don’t have more reasons why Tesla must build their next factory in Galicia. In
the last years I took more than 200 flights; saw a lot of cities and I were on a
few continents, I’m in love with the city where I was born! There are some
problems in Galicia, but in the last years, I also learnt that there are
problems everywhere, and Galicia is too awesome as it appears.&lt;/p&gt;
&lt;p&gt;I invite to Tesla managers to meet Vigo; it’s an awesome city! It has &lt;strong&gt;a lot of
resources&lt;/strong&gt; and with &lt;strong&gt;a lot of people with the can be done aptitude&lt;/strong&gt;, with a
green mentality and with thousands and thousands of wonderful people around.&lt;/p&gt;
&lt;p&gt;So the only thing that I can say, if any Tesla Managers read this post and you
want to visit Vigo, I’ll pay your flight, I will love that you come to here, I
know that when you arrive, you don’t want to leave!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="tesla"></category><category term="vigo"></category><category term="galicia"></category></entry><entry><title>Using Jenkins Pipelines to deploy terraform</title><link href="https://acalustra.com/using-jenkins-pipelines-to-deploy-terraform.html" rel="alternate"></link><published>2016-07-05T10:00:00+02:00</published><updated>2016-07-05T10:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-07-05:/using-jenkins-pipelines-to-deploy-terraform.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="https://jenkins.io/2.0/"&gt;Jenkins 2.0&lt;/a&gt; was released a few weeks ago. One of
the main problems that I use to had in Jenkins was multi-stages jobs, there was
a plugin from Cloudbees but it was difficult to use. This new version
&lt;a class="reference external" href="https://jenkins.io/doc/pipeline/jenkinsfile/"&gt;implements pipelines based on a Jenkinsfile&lt;/a&gt; in the root of the …&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="https://jenkins.io/2.0/"&gt;Jenkins 2.0&lt;/a&gt; was released a few weeks ago. One of
the main problems that I use to had in Jenkins was multi-stages jobs, there was
a plugin from Cloudbees but it was difficult to use. This new version
&lt;a class="reference external" href="https://jenkins.io/doc/pipeline/jenkinsfile/"&gt;implements pipelines based on a Jenkinsfile&lt;/a&gt; in the root of the project.
This is easier, quicker and in one word: &lt;strong&gt;awesome&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;So, in jenkins 2.0 &amp;quot;stages&amp;quot; can be described in the Jenkinsfile. Stage can be
explained as the different status that a job need to have. In a typical web
application the stages will be the following:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;strong&gt;test&lt;/strong&gt;: Run in parallel unittest and integration test.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;artifact&lt;/strong&gt;: Compile the source&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Staging&lt;/strong&gt;: to update your staging platform&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Prod&lt;/strong&gt;: Update your prod infraestructure.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A very simple multi-stage Jenkinsfile looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;node &lt;span class="o"&gt;{&lt;/span&gt;
    stage &lt;span class="s1"&gt;&amp;#39;Stage 1&amp;#39;&lt;/span&gt;
       &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Hello World 1&amp;#39;&lt;/span&gt;
    stage &lt;span class="s1"&gt;&amp;#39;Stage 2&amp;#39;&lt;/span&gt;
       &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Hello World 2&amp;#39;&lt;/span&gt;
    stage &lt;span class="s1"&gt;&amp;#39;Stage 3&amp;#39;&lt;/span&gt;
       &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Hello World 3&amp;#39;&lt;/span&gt;
    stage &lt;span class="s1"&gt;&amp;#39;Stage 4&amp;#39;&lt;/span&gt;
       &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Hello World 4&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And you're going to have a lovely dashboard like this:&lt;/p&gt;
&lt;img alt="Jenkins pipeline example" class="align-center" src="img/jenkins_pipeline_stage_example.png" /&gt;
&lt;p&gt;Checkout, run test and compile the artifacts can be done in the past without
pipelines, but what about the deploys? It was possible, but human integration
was added in pipelines and the solution is great for tools like Terraform.&lt;/p&gt;
&lt;p&gt;Review a plan is one of the best features of &lt;a class="reference external" href="https://www.hashicorp.com/atlas.html"&gt;Hashicorp Atlas&lt;/a&gt;. An engineer will always be sure that
the plan will be applied correctly using &lt;a class="reference external" href="https://www.terraform.io/"&gt;terraform&lt;/a&gt;.  Now this can be possible with a few lines of
code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;node &lt;span class="o"&gt;{&lt;/span&gt;
   stage &lt;span class="s1"&gt;&amp;#39;checkout&amp;#39;&lt;/span&gt;
        checkout scm

   stage &lt;span class="s1"&gt;&amp;#39;test&amp;#39;&lt;/span&gt;
        parallel &lt;span class="o"&gt;(&lt;/span&gt;
            phase1: &lt;span class="o"&gt;{&lt;/span&gt; sh &lt;span class="s2"&gt;&amp;quot;echo p1; sleep 20s; echo phase1&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;,
            phase2: &lt;span class="o"&gt;{&lt;/span&gt; sh &lt;span class="s2"&gt;&amp;quot;echo p2; sleep 40s; echo phase2&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;)&lt;/span&gt;
   stage name: &lt;span class="s1"&gt;&amp;#39;build&amp;#39;&lt;/span&gt;, concurrency: &lt;span class="m"&gt;1&lt;/span&gt;
        sh &lt;span class="s2"&gt;&amp;quot;packer build project.json&amp;quot;&lt;/span&gt;

   stage name: &lt;span class="s1"&gt;&amp;#39;plan&amp;#39;&lt;/span&gt;, concurrency: &lt;span class="m"&gt;1&lt;/span&gt;
        sh &lt;span class="s2"&gt;&amp;quot;terraform plan --out plan&amp;quot;&lt;/span&gt;

   stage name: &lt;span class="s1"&gt;&amp;#39;deploy&amp;#39;&lt;/span&gt;, concurrency: &lt;span class="m"&gt;1&lt;/span&gt;
        def &lt;span class="nv"&gt;deploy_validation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; input&lt;span class="o"&gt;(&lt;/span&gt;
            id: &lt;span class="s1"&gt;&amp;#39;Deploy&amp;#39;&lt;/span&gt;,
            message: &lt;span class="s1"&gt;&amp;#39;Let\&amp;#39;&lt;/span&gt;s &lt;span class="k"&gt;continue&lt;/span&gt; the deploy plan&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;,
            type: &lt;span class="s2"&gt;&amp;quot;boolean&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;

        sh &lt;span class="s2"&gt;&amp;quot;terraform apply plan&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="Jenkins Terraform pipeline" class="align-center" src="img/jenkis_terraform.png" /&gt;
&lt;p&gt;With this code you can easy review changes that terraform will make and deploy
your infrastructure with the right human interaction. This code is too
simplified but you can do all the business logic that you want. Complete list of
examples can be found in &lt;a class="reference external" href="https://github.com/jenkinsci/pipeline-examples/tree/master/pipeline-examples"&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;img alt="Jenkins pipeline terraform plan" class="align-center" src="img/jenkis_terraform_plan.png" /&gt;
&lt;p&gt;From my point of view this is a big step forward for continuous delivery, I
always miss a tool that I can make pipelines into our organization. From now all
my fellows can see in what state is each build. In the other hand, &lt;a class="reference external" href="https://www.cloudbees.com/"&gt;Cloudbees&lt;/a&gt; is working in a new UI, &lt;a class="reference external" href="https://jenkins.io/blog/2016/05/26/introducing-blue-ocean/"&gt;blueocean&lt;/a&gt;, it is great and
it'll make even simpler to review it.&lt;/p&gt;
&lt;p&gt;Related with the Jenkinsfile DSL reference, &lt;a class="reference external" href="https://jenkins.io/blog/2016/05/26/introducing-blue-ocean/"&gt;Cloudbees wrote&lt;/a&gt; a complete blog
post with all commands. Furthermore full pipelines &lt;a class="reference external" href="https://jenkins.io/solutions/pipeline/"&gt;documentation&lt;/a&gt; can be found in jenkins webpage.&lt;/p&gt;
</content><category term="blog"></category><category term="terraform"></category><category term="jenkins"></category><category term="packer"></category></entry><entry><title>My review of Hashiconf Europe 16</title><link href="https://acalustra.com/my-review-of-hashiconf-europe-16.html" rel="alternate"></link><published>2016-06-20T16:00:00+02:00</published><updated>2016-06-20T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-06-20:/my-review-of-hashiconf-europe-16.html</id><summary type="html">&lt;p&gt;Few days ago I was in Amsterdam, in the lovely &lt;a class="reference external" href="https://www.hashiconf.eu/"&gt;Hashiconf EU&lt;/a&gt;. This conference fulfilled all my expectations
about hashi tools and the devops world. The conference was organized by &lt;a class="reference external" href="https://xebia.com/"&gt;Xebia&lt;/a&gt; with the help of &lt;a class="reference external" href="https://www.hashicorp.com/"&gt;Hashicorp&lt;/a&gt; and it was awesome, everything was great: venue,
sound, food, talks and the party …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Few days ago I was in Amsterdam, in the lovely &lt;a class="reference external" href="https://www.hashiconf.eu/"&gt;Hashiconf EU&lt;/a&gt;. This conference fulfilled all my expectations
about hashi tools and the devops world. The conference was organized by &lt;a class="reference external" href="https://xebia.com/"&gt;Xebia&lt;/a&gt; with the help of &lt;a class="reference external" href="https://www.hashicorp.com/"&gt;Hashicorp&lt;/a&gt; and it was awesome, everything was great: venue,
sound, food, talks and the party!&lt;/p&gt;
&lt;img alt="Hashiconf Europe 2016" class="align-center" src="img/hashiconf_eu1.jpg" /&gt;
&lt;p&gt;Let me explain why I went to this conference; the main reason is that nowadays
I'm doing a lot of devops, the vision of Hashicorp is very similar to my
ideas/problems so I'm learning a lot from them. In the other hand a lot of talks
were case studies from companies, so I learnt from other people's problems.&lt;/p&gt;
&lt;p&gt;The conference started with &lt;a class="reference external" href="https://twitter.com/mitchellh"&gt;Mitchell Hashimoto's&lt;/a&gt; keynote, and  I want to emphasize the
following points:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;The initial support to import in Terraform.&lt;/li&gt;
&lt;li&gt;Maps and list in Terraform.&lt;/li&gt;
&lt;li&gt;Terraform state cli.&lt;/li&gt;
&lt;li&gt;Vault code audit and the new features added in 0.6.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Related with Nomad, they did a good improvement release, &lt;cite&gt;nomad plan&lt;/cite&gt; is a boost
to the project and being able to run 1M containers in less than 300 seconds is a
good selling point. Also, he announced that &lt;a class="reference external" href="https://www.hashicorp.com/blog/vektra-joins-hashicorp.html"&gt;Vektra joins Hashicorp&lt;/a&gt; and they are
going to release  a new log management tool called &lt;a class="reference external" href="https://twitter.com/kelseyhightower/status/742624496763428864"&gt;Current&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The second keynote was from &lt;a class="reference external" href="https://twitter.com/techiewatt"&gt;Nicki Watt&lt;/a&gt; from
the London based &lt;a class="reference external" href="https://opencredo.com/"&gt;OpenCredo&lt;/a&gt;. I loved this &lt;a class="reference external" href="https://speakerdeck.com/nickithewatt/hashiconf-eu-2016-building-secure-environments-in-clouds-using-hashicorp-tools"&gt;talk&lt;/a&gt;!
Real problem was described from start and solutions were explained with the
proper balance between code and theory. The integration and workflow between
Terraform, Vault, Cloudinit gave me good insights for our infrastructure. In the
other hand I got the following quote, that is great:&lt;/p&gt;
&lt;blockquote class="epigraph"&gt;
The only thing constant in life is change
--  François de la Rochefoucauld&lt;/blockquote&gt;
&lt;p&gt;One of the topics that I was more interested was &lt;a class="reference external" href="https://www.nomadproject.io/"&gt;Nomad&lt;/a&gt;. A good review was given by &lt;a class="reference external" href="https://twitter.com/diptanu"&gt;Diptanu&lt;/a&gt;, he has a lot of experience in schedulers. In
my opinion all schedulers will be a good trend to follow, and all related with
the microservices. Some keypoints about it:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;It's simpler than other solutions.&lt;/li&gt;
&lt;li&gt;It's not as complete as kubernetes, but fill the gap for a lot of companies.&lt;/li&gt;
&lt;li&gt;I can't fully get how nomad can export public interfaces or network constraints.&lt;/li&gt;
&lt;li&gt;Traffic shaping it's good but not sure how nomad will work with media traffic.&lt;/li&gt;
&lt;li&gt;Restart on jitter is great.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nomad fs&lt;/strong&gt; is good, but need to change the paradigm in support teams.&lt;/li&gt;
&lt;li&gt;All this orchestrators lose the way about dependency requirements between microservices.&lt;/li&gt;
&lt;/ul&gt;
&lt;img alt="Hashiconf Europe 2016" class="align-center" src="img/hashiconf_eu2.jpg" /&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.vaultproject.io/"&gt;Vault&lt;/a&gt; was another hot topic in the
conference. This secret manager is great and the following uses are marvelous
for all the companies:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;SSH credentials&lt;/li&gt;
&lt;li&gt;ACL policies&lt;/li&gt;
&lt;li&gt;DB credentials&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A lot of people use Vault on production environments, so I'll give a try soon.
If you want to see an example, this is a good repository to start.&lt;/p&gt;
&lt;p&gt;Day two started with &lt;a class="reference external" href="https://twitter.com/anne_e_currie"&gt;Anne Currie&lt;/a&gt;
keynote, it was awesome talk. The way how I think about resource efficiency was
changed after I heard this keynote.  She went into details around
container/server metadata, &lt;a class="reference external" href="http://lavel-schema.org"&gt;lavel-schema.org&lt;/a&gt; and
&lt;a class="reference external" href="http://microbadger.com/"&gt;microbadger.com&lt;/a&gt; was introduced by her to all of
us.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.packer.io/"&gt;Packer&lt;/a&gt; was mentioned in almost all the talks. OS
Hardening using packer was presented by Xebia, they introduced a lot of security
related tools, as for example &lt;a class="reference external" href="https://github.com/ansible/ansible-lockdown"&gt;ansible-lockdown&lt;/a&gt;. Faster and reliable deploys
was explained by &lt;a class="reference external" href="https://twitter.com/otaku_coder"&gt;Vik Bhatti&lt;/a&gt; from Beamly,
for me, it was one of the best talks in the conference, I must insight the
following:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://sky-shiny.github.io/smolder/"&gt;Smolder test framework&lt;/a&gt;: Looks great and maybe I'll do something similar for sip.&lt;/li&gt;
&lt;li&gt;They introduced consul distributed locks, I've never realized of this problem before.&lt;/li&gt;
&lt;li&gt;Consul KV locks and they daemon MarcoPolo =&amp;gt; Great way to save config in runtime.&lt;/li&gt;
&lt;li&gt;He introduced &lt;a class="reference external" href="https://github.com/beamly/se4"&gt;SE4&lt;/a&gt;:  Simple Spec for Service Status and Health&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Day two finished with Nomad Demo by &lt;a class="reference external" href="https://twitter.com/kelseyhightower"&gt;Kelsey Hightower&lt;/a&gt;, live coding terraform provider and the
final keynote about security from &lt;cite&gt;nuna.com &amp;lt;https://www.nuna.com/&amp;gt;__&lt;/cite&gt;.&lt;/p&gt;
&lt;p&gt;I need to say big thanks to all the people that I spoke with and thanks to &lt;a class="reference external" href="https://twitter.com/janaboruta"&gt;Jana&lt;/a&gt;, Hashicorp and Xevia for organized this
awesome conference.&lt;/p&gt;
&lt;p&gt;Finally, there are few things that I think should be improved so I will write
them down here just in case it could be helpful:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;In my opinion, the talks finished too early in both days. I missed 1 or 2 more talks to finish around 17:30 or 18:00.&lt;/li&gt;
&lt;li&gt;I missed &lt;em&gt;Best-practices&lt;/em&gt; talks around products, I mean, I would love to hear tips around Consul or Packer by the head of the projects. For example Diptanu talk was great around Nomad.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This was my summary about Hashiconf EU2016. Thanks for reading!&lt;/p&gt;
&lt;img alt="Hashiconf Europe 2016" class="align-center" src="img/hashiconf_eu3.jpg" /&gt;
&lt;p&gt;PS: All photos are from &lt;a class="reference external" href="https://www.flickr.com/photos/137604751&amp;#64;N05/sets/72157667183542004/"&gt;Hashicorp flickr
page&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;PS2: Videos are &lt;a class="reference external" href="https://www.youtube.com/watch?list=PL81sUbsFNc5b-Gd59Lpz7BW0eHJBt0GvE&amp;amp;v=Ps44n1de0Js"&gt;now online&lt;/a&gt;&lt;/p&gt;
</content><category term="blog"></category><category term="docker"></category><category term="kamailio"></category><category term="hashicorp"></category><category term="terraform"></category><category term="nomad"></category><category term="consul"></category></entry><entry><title>Resume persoal da hackathon Sanjurjo Badía</title><link href="https://acalustra.com/resume-persoal-da-hackathon-sanjurjo-badia.html" rel="alternate"></link><published>2016-03-25T16:00:00+01:00</published><updated>2016-03-25T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2016-03-25:/resume-persoal-da-hackathon-sanjurjo-badia.html</id><summary type="html">&lt;p&gt;Como algún ben sabedes estaba involucrado xunto con Jesús na Hackathon Sanjurjo
Badía.  Gustaríame facer unha reflexión persoal e &amp;quot;en voz alta&amp;quot;, dado que creo
que é importante compartir este tipo de información.&lt;/p&gt;
&lt;p&gt;Sobre a hackathon, non vou comentar nada mais do que xa esta escrito nas
seguintes crónicas:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.initios.com/dos-dias-desarrollo-creativo-hackathon-sanjurjo-badia/"&gt;Crónica …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;Como algún ben sabedes estaba involucrado xunto con Jesús na Hackathon Sanjurjo
Badía.  Gustaríame facer unha reflexión persoal e &amp;quot;en voz alta&amp;quot;, dado que creo
que é importante compartir este tipo de información.&lt;/p&gt;
&lt;p&gt;Sobre a hackathon, non vou comentar nada mais do que xa esta escrito nas
seguintes crónicas:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.initios.com/dos-dias-desarrollo-creativo-hackathon-sanjurjo-badia/"&gt;Crónica de Initios Desarrollos&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://ainasa.gal/2016/03/05/hackathon-sanjurjo-badia-de-idea-a-proyecto-viable/"&gt;Crónica de Ainasa (Gañadores)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://jsanroman.net/2016/03/participamos-en-el-hackathon-sanjurjo-badia/"&gt;Crónica de Javi Sanroman&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;O primeiro que me gustaría dicir, e pedir perdón. Perdón a patrocinadores e
asistentes polos problemas de conexión a internet do sábado. Para evitar
problemas cun router pequeno, puxemos un firewall profesional diante, que
xestionaba todo o tráfico da wifi. Pero unha das cousas que se me esqueceu facer
foi configurar unha DMZ a ese router, polo que o router de internet, cando
chegaba a 15000 portos NAT abertos, broqueaba a conexión. O meu erro polo que
pido desculpas a todo o mundo.&lt;/p&gt;
&lt;p&gt;O segundo: gustaríame darlle as grazas o meu compañeiro &lt;a class="reference external" href="https://twitter.com/jsayar"&gt;Jesús Sayar&lt;/a&gt;, &lt;strong&gt;un auténtico fenómeno&lt;/strong&gt;, que fai que organizar un
evento de este tipo sexa moito mais sinxelo. Tamén acordarme de toda a sua
familia que se encargou do catering do evento.&lt;/p&gt;
&lt;img alt="Eloy Coto e Jesús Sayar" class="align-center" src="img/hacksb_0.jpg" /&gt;
&lt;p&gt;O terceiro, agradecer a esas persoas que eu chamei, que botaron unha man,
pero que non estaban nos créditos. Persoas que deron boas opinións, se
involucraron, e persoas que sempre tiveron un &amp;quot;SI A TODO&amp;quot; cando lle chamaba.
Aquí tedes a lista:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;O xefe do departamento de informática do Concello de Vigo. Por que fixo todo o
posible, traballou horas extras, durante as vacacións, para que esta hackathon
fora realidade.&lt;/li&gt;
&lt;li&gt;O &lt;a class="reference external" href="http://vigo.org"&gt;concello de Vigo&lt;/a&gt;, dado que o fácil sería dicirnos que
isto era unha idea loca, ou unha fricada. Resultou todo o contrario e
volcaronse con nós para que fora realidade.&lt;/li&gt;
&lt;li&gt;A &lt;a class="reference external" href="https://twitter.com/LuisMirandaAceb"&gt;Luis Miranda&lt;/a&gt;, que ademais de ser
unha persoa que axudou a lanzarnos ca idea, foi de esas persoas que colaborou en
todo o posible, e traballou arreo para que todo estivera perfecto.&lt;/li&gt;
&lt;li&gt;A &lt;a class="reference external" href="https://twitter.com/ediazcomellas"&gt;Edu de Ultreia&lt;/a&gt;, dado que o seu SI A
TODO non ten fin, cada vez que lle pedía consello era unha mellora, cada vez que
lle pedía unha favor sempre foi unha solución. Xente como Edu fai que organizar
este tipo de eventos sexa un pracer.&lt;/li&gt;
&lt;li&gt;A &lt;a class="reference external" href="https://www.linkedin.com/in/bruno-lema-baleato-0687bb59"&gt;Bruno Lema de Marine
Instruments&lt;/a&gt;,
coñecino nunha reunión para ver se Marine podía patrocinar. Ademais de escalar o
patrocinio, Bruno involucrouse persoalmente, algo que lle estamos moi
agradecidos.&lt;/li&gt;
&lt;li&gt;A todos os patrocinadores, dado que patrocinar un evento de este tipo non é
polo retorno económico, se non que é por mellorar o ecosistema da nosa
cidade. Polo tanto moitas grazas a todos.&lt;/li&gt;
&lt;li&gt;A &lt;a class="reference external" href="http://quobis.com/"&gt;Quobis&lt;/a&gt;: Toda a axuda que eles nos deron, dende cruzar algúns emails con
algúns patrocinadores, ata deixarnos todo o que podían axudar. Unha pena que
estiveran no MWC e que puideran estar durante todo o fin de semana no evento.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En canto a hackathon, cando empezamos a lidar esta hackahton, tiña varios
obxectivos persoais, que sendo realista, non cumprín como me esperaba!&lt;/p&gt;
&lt;img alt="Hackathon Sanjurjo Badía Xurado" class="align-center" src="img/hacksb_1.jpg" /&gt;
&lt;div class="section" id="sanjurjo-badia"&gt;
&lt;h2&gt;Sanjurjo Badía&lt;/h2&gt;
&lt;p&gt;Varios amigos (non vigueses) sempre menosprezan Vigo, algo que me repudia, unha
cidade que ten séculos de historia, pero que nunca fai valer o que nela se
viviu. Fomos clave na Reconquista (Que é mais que unha festa de chouripáns),
aparece a cibdade nos libros de Xulio Verne, temos grandes inventores, obxectivo
clave se entrabamos na segunda guerra mundial, etc.. . Pero para moitos
vigueses, Sanjurjo Badía é soamente o nome dunha rúa, e iso é algo que me daña o
corazón.&lt;/p&gt;
&lt;p&gt;Poñer el valor a &lt;a class="reference external" href="http://vigopedia.com/biografias-antonio-sanjurjo-badia/"&gt;Sanjurjo Badía&lt;/a&gt;, as súas
habilidades pra levar a industrialización o sector marítimo. Este enxeño era a
crave para fomentar nesta hackathon a tecnificación no sector marítimo.&lt;/p&gt;
&lt;p&gt;Teño a impresión, despois da hacakthon que a figura de Sanjurjo non quedou de
todo salientada, algo que me queda moita pena. &lt;strong&gt;Sanjurjo merece en Vigo moito
mais que o nome dunha rúa.&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="tecnoloxia-no-mar"&gt;
&lt;h2&gt;Tecnoloxía no mar&lt;/h2&gt;
&lt;p&gt;Algo que levo pensando anos, algo que Vigo ten que ter como prioridade número
un, pero que por desgraza non existen plans sólidos ou consensuados para levar
isto a cabo. Cando nos reunimos con &lt;a class="reference external" href="https://twitter.com/regades"&gt;David Regades(Concexal de
Fomento)&lt;/a&gt;, este non dubidou nin un minuto en
colaborar con nós. Agora toca darlle a continuidade necesaria.&lt;/p&gt;
&lt;p&gt;A idea de tecnoloxía no mar era complexa, demasiado! Levamos décadas que os
vigueses non pensamos en dicirlle aos nosos fillos dedícate o mar. E mais cando
estaba no instituto todo o mundo me menosprezaba cando dicía que eu de maior
quería ser arquitecto naval. &lt;strong&gt;Hai que cambiar iso!&lt;/strong&gt; levamos séculos vivindo do
mar, non ten sentido cambiar o noso sistema produtivo onde a nosa situación
xeográfica non e clave, o mar ten que ser parte primordial do noso futuro. Por
iso cando pensaba nesta hackathon víñame a cabeza un poema de Eduardo Pondal,
que di tal que así:&lt;/p&gt;
&lt;blockquote class="epigraph"&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Non cantes tan tristemente,&lt;/div&gt;
&lt;div class="line"&gt;probe e desolada nai;&lt;/div&gt;
&lt;div class="line"&gt;non lle cantes cantos brandos&lt;/div&gt;
&lt;div class="line"&gt;pra adormecer o rapaz;&lt;/div&gt;
&lt;div class="line"&gt;onde está a cova do sono,&lt;/div&gt;
&lt;div class="line"&gt;no céltico carballal;&lt;/div&gt;
&lt;div class="line"&gt;cántalla cantos ousados&lt;/div&gt;
&lt;div class="line"&gt;que esforzado o peito fan;&lt;/div&gt;
&lt;div class="line"&gt;cántalle o que xa cantara&lt;/div&gt;
&lt;div class="line"&gt;o nobre bardo Gundar;&lt;/div&gt;
&lt;div class="line"&gt;A lus virá para a caduca Iberia,&lt;/div&gt;
&lt;div class="line"&gt;dos fillos de Breogán!&lt;/div&gt;
&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;O que tiña claro que nesta hackathon tiñamos que seguir a Pondal, e cantar un
conto ousado que marcara un camiño. Creo que a idea de IoT e o Mar foi un conto
ousado, que deu resultado e todos os asistentes sentiranse confortables a facer
solucións hardware para o mar.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mentores"&gt;
&lt;h2&gt;Mentores&lt;/h2&gt;
&lt;p&gt;Unha das cousas que traballamos arreo foi nos mentores, queriamos contar con
todos os axentes do sector. Era clave que ademais de que os asistentes viran o
mar como solucións válidas, tamén os axentes do sector (estaleiros, armadores,
auxiliares, etc.. ) miraran que aquí tamén se poden facer cousas, o que tiña a
impresión que melloraría a sua impresión sobre os informáticos galegos.&lt;/p&gt;
&lt;p&gt;En Decembro fixemos unha reunión de 15 persoas, nunha sala onde estaba
estaleiros, auxiliares é uns cantos informáticos, a reunión deunos as ideas
iniciais, e ese foi o noso punto de partida.&lt;/p&gt;
&lt;p&gt;Inda que había mentores, por desgraza non había todos os que nos queríamos. Pero
expricar isto foi algo moi compricado e ademais da pouca xenerosidade que nos
proporcionaba as nosas chamadas ou email.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Todos os informáticos temos que facernos valer ante os sectores marítimos&lt;/strong&gt;,
aportarlle ideas, &lt;strong&gt;educarse sobre o que fan&lt;/strong&gt; e intentar tender pontes que poden
marcar o futuro da cidade. Eles saben traballar o ferro e coñecen o mar, os
informáticos sabemos facer sistemas intelixentes, &lt;strong&gt;fagamos pontes para que Vigo
sexa a capital de solucións tecnolóxicas do sector marítimo.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Esta hackathon xa queda pechada, moito traballo, moitos meses e mais ilusión
depositada nela. Para que vos fagades unha idea, esta é a gráfica de correos
enviados e recibidos no meu correo electrónico ca etiqueta da hackathon.&lt;/p&gt;
&lt;img alt="Hackathon Sanjurjo Badía Emails" class="align-center" src="img/hacksb_emails.png" /&gt;
&lt;p&gt;Por outra parte gustaríame salientar dúas cousas que non me gustaron nada, e
fan que me prántexe seguir con isto:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;No evento, 22 persoas non apareceron, e quedou xente na lista de espera. Unha
auténtica pena. Moito traballo, moita xente na lista de espera, e cando o
custo por participante era de 40€, foron 800€ mal gastados. Non vós podedes
imaxinar o que custa conseguir eses 800€, hai que ter conciencia polo traballo
do resto.&lt;/li&gt;
&lt;li&gt;Un dos medos que tiñamos era a devolución das pracas Udoo, de todas as que
tiñamos en réxime de alugueiro volveron todas. Pero por desgraza alguén roubou
unha na mesa de Udoo non rexistrada, algo que me deixa MOI mal sabor de boca.&lt;/li&gt;
&lt;li&gt;Despois de 16 chamadas a TVG, decidiron que era moito mais importante
entrevistar a un home que foi a un prostíbulo, se emborrachou e caeu nun pozo,
en vez de fomentar a innovación do mar. Unha auténtica pena :-(&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Teño que dicir que de todos os eventos nos que algún día eu estiben metido, este
foi o que mais me reconfortou, non soamente polo resultado, se non por que creo
que se cumpre o que algún día dicía Alfredo Brañas polo século XIX&lt;/p&gt;
&lt;blockquote class="epigraph"&gt;
As nogueiras e castiñeiros que dan hoxe noces e castañas non as prantáchedes
vosoutros. Foron vosos avós. Eles o fixeron acordándose de vosoutros e para
vosoutros. Tendes a obriga de face-lo mesmo. E se ademais de árbores que
dean froito deixades en herdo aos vosos unha terra libre e rica, dentro do
Estado español, faredes unha santa e redentora obra”&lt;/blockquote&gt;
&lt;p&gt;Nós xa prántamos o nosa nogueira, se todo segue o camiño natural, o equipo
gañador vai formalizarse nunha empresa. Isto é un orgullo para nós, dado que son
catro rapaces que podían ser carne da emigración en calquera momento, pero van a
focalizarse nun produto e mellorar a arte da pesca local, unha solución para
venderlle aos nosos veciños!&lt;/p&gt;
&lt;p&gt;Anímovos a fomentar empresas tecnolóxicas no mar, e facer o que algún día se
fixo en Galicia a finais do século XX. Onde un viño que cultivaban catro frades
no mosteiro de Armenteira, chamado Albariño, &lt;strong&gt;con esforzo, orgullo e valentía
duns poucos converteuse nun dos viños de referencia a nivel mundial, con selo
galego&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Xa rematando, para poñer en valor os proxectos da hackathon. Michelangello de
Udoo, que o seu principal traballo é estar en hackathons de medio mundo, quedou
alucinado ca calidade técnica dos proxectos. Parabéns a todos os participantes,
non tiña dúbida de isto, pero é bo que quede reflexado.&lt;/p&gt;
&lt;img alt="Hackahton Sanjurjo Badía participantes" class="align-center" src="img/hackathon-supertramp.jpg" /&gt;
&lt;blockquote class="epigraph"&gt;
O verdadeiro heroísmo está en convertir os anceios en realidades, e as ideas en feitos.
-- CASTELAO&lt;/blockquote&gt;
&lt;p&gt;Graciñas a todos!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="hackathon"></category><category term="vigo"></category><category term="mar"></category></entry><entry><title>Voip talk at Librecon 2015</title><link href="https://acalustra.com/voip-talk-at-librecon-2015.html" rel="alternate"></link><published>2015-10-29T16:00:00+01:00</published><updated>2015-10-29T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-10-29:/voip-talk-at-librecon-2015.html</id><summary type="html">&lt;p&gt;I had the luck to gave a talk at &lt;a class="reference external" href="http://www.librecon.io/"&gt;Librecon 2015&lt;/a&gt;.The
topic was about how I built a modern operator using asterisk, kamailio, and
other tools for measure and deploy.&lt;/p&gt;
&lt;div style="width: 70%;" class="align-center" align="center"&gt;
&lt;script async class="speakerdeck-embed"
data-id="abbbacd7686645a5a37408e7e713f564" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Thanks to &lt;a class="reference external" href="http://www.agasol.gal/"&gt;Agasol&lt;/a&gt; and big thanks to &lt;a class="reference external" href="https://twitter.com/xcastanho"&gt;Xavi
Castaño&lt;/a&gt; and Cris to help me with all my doubts.&lt;/p&gt;
&lt;p&gt;Happy …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I had the luck to gave a talk at &lt;a class="reference external" href="http://www.librecon.io/"&gt;Librecon 2015&lt;/a&gt;.The
topic was about how I built a modern operator using asterisk, kamailio, and
other tools for measure and deploy.&lt;/p&gt;
&lt;div style="width: 70%;" class="align-center" align="center"&gt;
&lt;script async class="speakerdeck-embed"
data-id="abbbacd7686645a5a37408e7e713f564" data-ratio="1.77777777777778"
src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;
&lt;/div&gt;&lt;p&gt;Thanks to &lt;a class="reference external" href="http://www.agasol.gal/"&gt;Agasol&lt;/a&gt; and big thanks to &lt;a class="reference external" href="https://twitter.com/xcastanho"&gt;Xavi
Castaño&lt;/a&gt; and Cris to help me with all my doubts.&lt;/p&gt;
&lt;p&gt;Happy code!&lt;/p&gt;
</content><category term="blog"></category><category term="packer"></category><category term="consul"></category><category term="terraform"></category><category term="kamailio"></category><category term="asterisk"></category><category term="statsd"></category><category term="grafana"></category><category term="influxdb"></category><category term="talks"></category></entry><entry><title>How can I monitor my Voip Application?</title><link href="https://acalustra.com/how-can-i-monitor-my-voip-application.html" rel="alternate"></link><published>2015-07-24T16:00:00+02:00</published><updated>2015-07-24T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-07-24:/how-can-i-monitor-my-voip-application.html</id><summary type="html">&lt;p&gt;In the last &lt;a class="reference external" href="https://acalustra.com/kamialio-world-2015.html"&gt;Kamailio World&lt;/a&gt; two of the
hot topics were &lt;a class="reference external" href="https://www.elastic.co/products/beats"&gt;Packetbeat&lt;/a&gt; and
&lt;a class="reference external" href="http://SIPCapture.org/"&gt;SIPCapture&lt;/a&gt;.  Both projects announced good news
meanwhile the conference, people got excited about it.&lt;/p&gt;
&lt;p&gt;SIPCapture released a new &lt;a class="reference external" href="http://www.voipusersconference.org/2015/vuc544-homer-open-source-sip-capture/"&gt;version 5&lt;/a&gt;,
huge work from &lt;a class="reference external" href="https://twitter.com/adubovikov"&gt;Alex&lt;/a&gt; and Lorenzo. Both worked
hard in this version. SIPCapture 5 provides the following …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In the last &lt;a class="reference external" href="https://acalustra.com/kamialio-world-2015.html"&gt;Kamailio World&lt;/a&gt; two of the
hot topics were &lt;a class="reference external" href="https://www.elastic.co/products/beats"&gt;Packetbeat&lt;/a&gt; and
&lt;a class="reference external" href="http://SIPCapture.org/"&gt;SIPCapture&lt;/a&gt;.  Both projects announced good news
meanwhile the conference, people got excited about it.&lt;/p&gt;
&lt;p&gt;SIPCapture released a new &lt;a class="reference external" href="http://www.voipusersconference.org/2015/vuc544-homer-open-source-sip-capture/"&gt;version 5&lt;/a&gt;,
huge work from &lt;a class="reference external" href="https://twitter.com/adubovikov"&gt;Alex&lt;/a&gt; and Lorenzo. Both worked
hard in this version. SIPCapture 5 provides the following new features:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;New captagent that allows lua scripting.&lt;/li&gt;
&lt;li&gt;Frontend was rewrited from scratch and now it's a full html5 app.&lt;/li&gt;
&lt;li&gt;New database structure, and full PostgresSQL support.&lt;/li&gt;
&lt;li&gt;New database backends in the panel, now you can use InfluxDB and ElasticSearch as data source.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;SIPCapture review on VUC&lt;/strong&gt;&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/MtuvwgRLBUg" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;&lt;p&gt;Secondly Packetbeat announced that &lt;a class="reference external" href="http://apmdigest.com/elastic-acquires-Packetbeat"&gt;joined Elastic&lt;/a&gt; and started a new branch
called &lt;a class="reference external" href="https://www.elastic.co/products/beats"&gt;Beats&lt;/a&gt;. Packetbeat provides
an interface to monitor our application performance without pain. You can
monitor all SQL information, Redis, HTTP information and get some insights of
your application.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Packetbeat presentation on OSDC 2015&lt;/strong&gt;&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/sGvfrA5FI5E" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;&lt;p&gt;Finally, statsd module can be added in this list. This module provides some
features to monitor your business logic. If you want to deep on this, please
read the following posts:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://acalustra.com/kamailio-statsd-better-statistics-in-your-voip-platform.html"&gt;Kamailio statsd installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://acalustra.com/kamailio-statsd-explained.html"&gt;Kamailio statsd best practices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://acalustra.com/statsd-talk-at-python-vigo-meetup.html"&gt;Statsd on python Vigo Meetup&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So three monitoring tools. Can we use only one? What is the strengths and the
weaknesses of these software? Is all valid for our platform? Yes, but these
projects fit for different situations, let me explain:&lt;/p&gt;
&lt;p&gt;SIPCapture is an awesome tool, but it only can help with our SIP stack, I love
it and I use to work with it. You can check what happens in your calls, and
it's pretty useful in the following cases:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;In a production platform when you need to check what happens in a call.&lt;/li&gt;
&lt;li&gt;If you run TLS calls, you can debug without SSL keys into wireshark.&lt;/li&gt;
&lt;li&gt;You can monitor the MOS in realtime in your platform.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Packetbeat is to monitor your application performance. Nowadays Kamailio is
using a lot 3 party software (databases, Messages Queues, Cache system).
Monitoring errors or timeouts of those 3-party software can be done with
Packetbeat without pain.&lt;/p&gt;
&lt;p&gt;Business/personal metrics must to be done in statsd. In statsd you can't define
what happens in a specific call or specific query, you're measuring the
percentile of the metric that you want it's correct, for example:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Packetbeat said that your SQL queries took 14ms as average. But in kamailio
you found a bottleneck in that query process, so you need to monitor into your
code. You can use statsd_timer and found the bottleneck in the specified route.&lt;/li&gt;
&lt;li&gt;Your average reply time in SIPCapture is upper than 1 second, you need to
found the bottleneck into your 5000 lines of code. With Statsd you can measure
your routes one by one, so it's easy to found the problem with few lines of
code.&lt;/li&gt;
&lt;li&gt;When new feature is implemented you want to know how many calls are using
this feature. Statsd provides a one line code to measure your business
statistics.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;UPDATE&lt;/strong&gt;: &lt;a class="reference external" href="https://twitter.com/adubovikov/status/624541282862518272"&gt;As Alex point me in Twitter&lt;/a&gt;, all the perf stats
can be displayed in SIPCapture included Packetbeat metrics and Influxdb metrics
sending by statsd. So SIPCapure it's perfect for support and operations.
&lt;strong&gt;Awesome&lt;/strong&gt; work made by Lorenzo &amp;amp; Alex.&lt;/p&gt;
&lt;p&gt;Some developers changed statsd for Logstash. My personal opinion about that is
the following:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Logstash need to parse logs. Logs are slow and difficult to compute.&lt;/li&gt;
&lt;li&gt;For timing functions, you need to write more lines of code. With statsd you
only use 2 lines of code to monitor specific lines.&lt;/li&gt;
&lt;li&gt;Logs can be broken easily in your config file.&lt;/li&gt;
&lt;li&gt;ES query language is more complicated than use SQL'ish in InluxDB.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally for telecoms companies all of the explained projects are useful.
SIPCapture is the swiss-knife for support teams. Packetbeat is an amazing tool
for all the operations teams and statsd is good for operations team and
marketing/business team to make decisions based on the current metrics.&lt;/p&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="sip"></category><category term="SIPCapture"></category><category term="Packetbeat"></category><category term="statsd"></category></entry><entry><title>Kamialio World 2015</title><link href="https://acalustra.com/kamialio-world-2015.html" rel="alternate"></link><published>2015-06-17T00:00:00+02:00</published><updated>2015-06-17T00:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-06-17:/kamialio-world-2015.html</id><summary type="html">&lt;p&gt;Last week of May I had the luck to attend &lt;a class="reference external" href="http://conference.kamailio.com/k03/"&gt;Kamailio World Conference&lt;/a&gt;. It was my third time and as usually I
learnt a lot. &lt;strong&gt;Kamailio was born fourteen years ago&lt;/strong&gt;, so a lot of people had a
lot of things to show.&lt;/p&gt;
&lt;p&gt;This year the conference was focused in …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Last week of May I had the luck to attend &lt;a class="reference external" href="http://conference.kamailio.com/k03/"&gt;Kamailio World Conference&lt;/a&gt;. It was my third time and as usually I
learnt a lot. &lt;strong&gt;Kamailio was born fourteen years ago&lt;/strong&gt;, so a lot of people had a
lot of things to show.&lt;/p&gt;
&lt;p&gt;This year the conference was focused in the following topics:&lt;/p&gt;
&lt;div class="section" id="webrtc"&gt;
&lt;h2&gt;WebRTC&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;WebRTC&lt;/em&gt; is the highway to the future. HTML5 is a reality in web world nowadays.
WebRTC is supported in some browsers and only need a push from Apple and
Microsoft to reach all possible customers. Meanwhile companies like &lt;a class="reference external" href="http://corporate.tuenti.com/en/dev/blog/Building-a-VoIP-Service-using-WebRTC"&gt;Tuenti&lt;/a&gt;
are using WebRTC in their apps and they provide some valuable feedback to the
community.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=5yPtUbZcaKs"&gt;Tim Panton&lt;/a&gt; explained how to
make WebRTC interact with some other HTML features. I loved the concept and I
think that WebRTC doesn't need to be another phone in the web. Innovation and
integration with the web will be the key to the success.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://www.youtube.com/watch?v=cTEjYj0AUlM"&gt;Jssip&lt;/a&gt; was explained by José
Luis Millán. I use to work with this library, so for me was not as interested
as it could be. But if you want to add some SIP-over-websocket library you
should definitely take a look to this talk.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mobile-operators-ims"&gt;
&lt;h2&gt;Mobile Operators- IMS&lt;/h2&gt;
&lt;p&gt;I'm not an expert in IMS or mobile operators, but some of the talks gave us
some insights about the IMS world. As every year I learnt a lot about IMS. This
time &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/smsops.html"&gt;3GPP-SMS-V2 kamailio module&lt;/a&gt; was presented
by &lt;a class="reference external" href="https://www.youtube.com/watch?v=pgYVMHVUemM"&gt;Carsten Bock&lt;/a&gt;, and he
introduced us in the SMS solutions using Kamailio.&lt;/p&gt;
&lt;p&gt;About mobile operators &lt;a class="reference external" href="https://www.youtube.com/watch?v=R4iu7dIdczI"&gt;Dragos Vingarzan&lt;/a&gt; shows to us all the possible
solutions about open mobile networks. He explained about how to build
distributed mobile network and dived us into &lt;a class="reference external" href="http://www.openepc.com/"&gt;OpenEPC project&lt;/a&gt;. In case of natural disasters this project is a
fast solution for rescue teams. Well done!&lt;/p&gt;
&lt;p&gt;Every year FhG Fokus Institute exposes all the new stuff related with mobile
network. This year &lt;a class="reference external" href="https://www.youtube.com/watch?v=SZ5hjvZnmUk"&gt;Thomas Magedanz&lt;/a&gt; explained all the work that
they are doing in 5G technology.&lt;/p&gt;
&lt;img alt="Daniel closed another great Kamaialio World" class="align-center" src="img/kworld-2015-daniel.jpg" /&gt;
&lt;/div&gt;
&lt;div class="section" id="pure-voip-applications"&gt;
&lt;h2&gt;Pure Voip Applications&lt;/h2&gt;
&lt;p&gt;The reason why I always go to KWorld is for Voice Apps and to learn about third
party applications that integrates with Kamailio. Last year I had seen Cgrates
and few months later I started to use it.&lt;/p&gt;
&lt;p&gt;This year &lt;a class="reference external" href="https://www.youtube.com/watch?v=Hsvcwleb-fY"&gt;Dan presented Cgrates LCR&lt;/a&gt;, this technology is pretty
interesting for wholesale providers. In the other hand Matt Jordan provided us
some insights about how to &lt;a class="reference external" href="https://www.youtube.com/watch?v=9CnrU5A2g1Q"&gt;build voice apps with the new version of Asterisk&lt;/a&gt;. I really love the new ARI
interface and it's matches perfectly with my idea of immutable servers.&lt;/p&gt;
&lt;p&gt;On the other hand, &lt;a class="reference external" href="https://www.youtube.com/watch?v=4XIrR9bwUkM&amp;amp;index=23&amp;amp;list=PLDaEs5k2Xy-vZ_zyz989AWkz8txu7YQYY"&gt;Federico Cabiddu&lt;/a&gt;
talked about the &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/tsilo.html"&gt;TSILO&lt;/a&gt; module, it's
gorgeous.  I think that TSILO module is too useful when your business logic is
not into your kamailio config file. I'm looking forward to use TSILO with &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/evapi.html"&gt;Evapi
module&lt;/a&gt; and it'll
help me a lot.&lt;/p&gt;
&lt;p&gt;Another hot topic was application monitoring. &lt;a class="reference external" href="https://www.youtube.com/watch?v=Z5IllQMSyKY&amp;amp;index=8&amp;amp;list=PLDaEs5k2Xy-vZ_zyz989AWkz8txu7YQYY"&gt;Alexandr Dubovikov&lt;/a&gt;
presented the new version of &lt;a class="reference external" href="http://sipcapture.org/"&gt;SIPcapture&lt;/a&gt;. Now you
don't have any reason to don't start using it.  On the other hand, &lt;a class="reference external" href="https://www.youtube.com/watch?v=0udEXKF9nAk&amp;amp;index=25&amp;amp;list=PLDaEs5k2Xy-vZ_zyz989AWkz8txu7YQYY"&gt;Tudor
Golubenco&lt;/a&gt;
presented &lt;a class="reference external" href="https://www.elastic.co/products/beats"&gt;PacketBeat&lt;/a&gt; a software to
monitor the performance of your application.&lt;/p&gt;
&lt;p&gt;Sipgate always shows amazing use cases, &lt;a class="reference external" href="https://www.youtube.com/watch?v=OB8F2bxtsGU"&gt;last year they spoke&lt;/a&gt; about their infrastructure.
This year &lt;a class="reference external" href="https://www.youtube.com/watch?v=j8e0D2aOE5A&amp;amp;list=PLDaEs5k2Xy-vZ_zyz989AWkz8txu7YQYY&amp;amp;index=9"&gt;Sebastian Damm gave a amazing talk&lt;/a&gt;
about how they are providing services over IPv6. Hands-on with &lt;a class="reference external" href="https://docs.google.com/forms/d/1nnjfzVAWaqt9taCOsJcdEnlrJyxbAKVZRsUdunZGfF8/viewform"&gt;lunch.sipgate.de&lt;/a&gt;
too, really nice initiative.&lt;/p&gt;
&lt;p&gt;Kazoo &lt;strong&gt;is&lt;/strong&gt; the innovation player in Kamailio. Glad to have them onboard. They
have all the config files in &lt;a class="reference external" href="https://github.com/2600hz/kazoo-configs"&gt;Github&lt;/a&gt; and you can learn a lot from them,
it's a great example! This year &lt;a class="reference external" href="https://www.youtube.com/watch?v=ukioKekTHIg"&gt;Luis Azedo&lt;/a&gt; was speaking about kazoo
module that is a message queue for Kamailio. Kazoo + TSILO + EVAPI can provide
a new way to make things in Kamailio and I'm looking forward to use/write about
it.&lt;/p&gt;
&lt;p&gt;Another talk was given by &lt;a class="reference external" href="https://www.youtube.com/watch?v=LyZq8jZaJ7U"&gt;Simon Tennant&lt;/a&gt; about protocols and why some
protocols were not successful. Simon is the CEO at Buddycloud. I met BuddyCloud
early 2012 in Fosdem conference. Buddycloud is a chat/twitter service based on
XMPP and open standards. You should keep an eye on this project.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="security"&gt;
&lt;h2&gt;Security&lt;/h2&gt;
&lt;p&gt;As often, &lt;a class="reference external" href="https://www.youtube.com/watch?v=NSZvMfDnLts"&gt;Olle E. Johansson&lt;/a&gt;
gave one of the keynotes. He explained all the problems related with old
technology and provide advices to be more secure, revolutionary and keep the
open standards, you know &lt;a class="reference external" href="https://twitter.com/hashtag/morecrypto?src=hash"&gt;#morecrypto&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/jesusprubio/bluebox-ng"&gt;Bluebox-ng&lt;/a&gt; was presented by my
friend &lt;a class="reference external" href="https://twitter.com/s3rgiogr"&gt;Sergio&lt;/a&gt; one of the core developers. He
explained all the possible attacks in SIP and he provided some examples + tricks
about how Bluebox can help you to keep your platform secure. He spoke about
custom scripts in Bluebox so I'll check to integrate this in our Jenkis
workflow.&lt;/p&gt;
&lt;p&gt;The last talk was given by &lt;a class="reference external" href="https://www.youtube.com/watch?v=yWRQamkCtTs"&gt;Daniel&lt;/a&gt;. He spoke about some security
tips in our kamailio config files. I need to say that I don't agree 100 percent
with his point of view. I think that redis is more effective than any sql in
memory database as backend, but same approach can be used with redis in this
case.&lt;/p&gt;
The last talk was given by &lt;a
href="https://www.youtube.com/watch?v=yWRQamkCtTs"&gt;Daniel&lt;/a&gt;. He spoke
about some security tips in our kamailio config files. &lt;strike&gt;I need to say
that I don't agree 100 percent with his point of view. I think that redis is
more effective than any sql in memory database as backend, but same approach
can be used with redis in this case.&lt;/strike&gt; I saw again this talk and I
misunderstanding a little bit. Daniel mentioned another databases and lua
scripts, and all mysql was only a examples.  Nowadays in my cases I'm using
redis as cache system, so I think that for us it's more useful &amp; simple. My
advice you must use the backend that fit in your installation in my case
Redis works perfect.&lt;p&gt;Finally I missed a lot of people: Carlos Ruiz from TokyApp, Torrey from Voxbone,
Anton from Quobis... active members that I always learn a lot from them. In the
other hand big thanks to all the people that were involved in this conference.
It was a blast!&lt;/p&gt;
&lt;img alt="Galician team at kamailio world 2015" class="align-center" src="img/galician_team_kworld_2015.jpg" /&gt;
&lt;p&gt;Huge thanks from the people to &lt;a class="reference external" href="http://www.quobis.com"&gt;Quobis&lt;/a&gt; (&lt;a class="reference external" href="https://twitter.com/s3rgiogr"&gt;Sergio&lt;/a&gt; and &lt;a class="reference external" href="https://twitter.com/lauskin"&gt;Santi&lt;/a&gt;).
I spent my trip with them and it was a pleasure, thanks guys.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="kamailio world"></category></entry><entry><title>My thoughts about CGRates</title><link href="https://acalustra.com/my-thoughts-about-cgrates.html" rel="alternate"></link><published>2015-05-27T21:00:00+02:00</published><updated>2015-05-27T21:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-05-27:/my-thoughts-about-cgrates.html</id><summary type="html">&lt;p&gt;At &lt;a class="reference external" href="http://www.foehn.co.uk"&gt;Foehn&lt;/a&gt;, we started to use
&lt;a class="reference external" href="http://cgrates.org/"&gt;CGRateS&lt;/a&gt; earlier this year, nowadays (May-2015) the
platform has rated tens of millions of calls. I want to share my experience.&lt;/p&gt;
&lt;p&gt;I discovered CGRateS in 2014 at the &lt;a class="reference external" href="http://conference.kamailio.com/k03/"&gt;Kamailio World
Conference&lt;/a&gt;. After a few years using
different solutions we found that CGRateS suits all …&lt;/p&gt;</summary><content type="html">&lt;p&gt;At &lt;a class="reference external" href="http://www.foehn.co.uk"&gt;Foehn&lt;/a&gt;, we started to use
&lt;a class="reference external" href="http://cgrates.org/"&gt;CGRateS&lt;/a&gt; earlier this year, nowadays (May-2015) the
platform has rated tens of millions of calls. I want to share my experience.&lt;/p&gt;
&lt;p&gt;I discovered CGRateS in 2014 at the &lt;a class="reference external" href="http://conference.kamailio.com/k03/"&gt;Kamailio World
Conference&lt;/a&gt;. After a few years using
different solutions we found that CGRateS suits all our needs, so I decided  to
give it a try.&lt;/p&gt;
&lt;p&gt;The project is written in &lt;a class="reference external" href="https://golang.org/"&gt;Golang&lt;/a&gt;, so this was the
first challenge, it's not a bad idea to learn a bit of Golang before installing
CGRateS.&lt;/p&gt;
&lt;p&gt;One of our uses is based on &lt;a class="reference external" href="https://cgrates.readthedocs.org/en/latest/cdrclient.html"&gt;cdr client&lt;/a&gt;, we have some
legacy installations where we wanted to use some CGRateS features. Every few
minutes we send csv files to the platform. This method is fast, we are billing
our daily traffic without problem. On the other hand I tested 10K calls per minute
and it is still fast.&lt;/p&gt;
&lt;p&gt;I can recommend this option if you are starting with CGRateS.&lt;/p&gt;
&lt;p&gt;In the last weeks, we started working with &lt;a class="reference external" href="https://github.com/cgrates/kamevapi"&gt;kamailio
evapi&lt;/a&gt; integration. This feature provides
a realtime rating engine in the proxy. This integration is still in test-mode
but I can recommend it well:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Performance in CGRateS is not a problem. We tested with 3K calls per minute in
a t2-small instance. Very good result.&lt;/li&gt;
&lt;li&gt;Kamailio configuration with CGRateS &lt;a class="reference external" href="https://github.com/cgrates/cgrates/blob/a2e36b6ae6273a61db2d5e3b2194cd281c105e0e/data/tutorials/kamevapi/kamailio/etc/kamailio/kamailio-cgrates.cfg"&gt;is easy&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;For every call, CGRateS has a cache map of the current calls, so the timeout
is set based on the virtual balance.&lt;/li&gt;
&lt;li&gt;With dialog module you can set the timeouts for these calls.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On the other hand, I love the following points:&lt;/p&gt;
&lt;div class="section" id="cdrstats"&gt;
&lt;h2&gt;CDRStats&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/cgrates/cgrates/blob/a2e36b6ae6273a61db2d5e3b2194cd281c105e0e/data/tariffplans/cdrstats/CdrStats.csv"&gt;This feature&lt;/a&gt;
provides some stats per account, tenant, time frame, call queues, etc.. This is
pretty useful, for example with time frames of 24 hours, you can easily get the
Total Cost of the calls in the last 24 hours per customer. Or the ACC (Average
Call Cost) in the last 1000 calls.&lt;/p&gt;
&lt;p&gt;It provides the best interface that I ever seen for fraud, for example:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;When TCC in the last 24 hours is more than £XXX&lt;/li&gt;
&lt;li&gt;When the ACC in the last 200 calls queue are more than £2&lt;/li&gt;
&lt;li&gt;When the ASR(Average success ratio) is less than 20%&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="derivate-charging"&gt;
&lt;h2&gt;Derivate Charging:&lt;/h2&gt;
&lt;p&gt;In our case we have some rates for customers, this was pretty easy, but we
needed that every call bills three times. One for the cost of the customer, one
for the cost of the reseller, and a one cost with our prices. With 2 lines into
DerivedChargers.csv we can get this easily.&lt;/p&gt;
&lt;p&gt;This is pretty useful, nowadays we have a graph with our benefits, costs, and
customer costs in one single panel.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="bundles"&gt;
&lt;h2&gt;Bundles:&lt;/h2&gt;
&lt;p&gt;Bundles are a swiss knife for telecoms. The good thing about CGRates is that
you can have more than one balance per account, moreover you can have two
different balances, &lt;em&gt;monetary&lt;/em&gt; or &lt;em&gt;minutes&lt;/em&gt;, so you can set a destination
included in a balance in minutes, when this balance finished account will be
switching to monetary balance.&lt;/p&gt;
&lt;p&gt;With Acions Triggers you can reset the bundle every first of the month, which
means there are no problems with the recurrent balaces.&lt;/p&gt;
&lt;p&gt;With Action Triggers you can call a action when the balance is less than XX
minutes too. It's easy to make business logic based on minutes balances.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="api"&gt;
&lt;h2&gt;API&lt;/h2&gt;
&lt;p&gt;One of the best improvements in the new version(0.9.7) is the fact that the API
is HTTP json-rpc, so it's easy to call to the API from a simple curl request or
any other software like postman.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="fixedfees"&gt;
&lt;h2&gt;FixedFees&lt;/h2&gt;
&lt;p&gt;Another improvement in CGRateS 0.9.7 is the &lt;em&gt;cdrlog&lt;/em&gt; action. With this action
you can log into the rated_cdrs table some actions. In this case I'm using it
for the recurrent fees that the customer paid for. Rent of DDIs, number of
extensions or support fees for example.&lt;/p&gt;
&lt;p&gt;Finally I need to say, starting with CGRateS it's not easy, but when you have a
little bit of knowledge you can get CGRateS do all the hard billing work for
you.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="billing"></category><category term="cgrates"></category></entry><entry><title>Acelerate your Ansible playbooks with async tasks</title><link href="https://acalustra.com/acelerate-your-ansible-playbooks-with-async-tasks.html" rel="alternate"></link><published>2015-05-08T16:00:00+02:00</published><updated>2015-05-08T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-05-08:/acelerate-your-ansible-playbooks-with-async-tasks.html</id><summary type="html">&lt;p&gt;I'm always impressed with my friends of
&lt;a class="reference external" href="https://www.streetlife.com/about/team/"&gt;Streetlife&lt;/a&gt;. They built a new
infrastructure based on immutable deploys. I'm surprised about how fast they are
able to build this
&lt;a class="reference external" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html"&gt;AMIs&lt;/a&gt;, they can
start a new full configured server in only 6 min.&lt;/p&gt;
&lt;p&gt;Three years ago I've started using &lt;a class="reference external" href="http://docs.ansible.com/"&gt;Ansible&lt;/a&gt;. My
deploys …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm always impressed with my friends of
&lt;a class="reference external" href="https://www.streetlife.com/about/team/"&gt;Streetlife&lt;/a&gt;. They built a new
infrastructure based on immutable deploys. I'm surprised about how fast they are
able to build this
&lt;a class="reference external" href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html"&gt;AMIs&lt;/a&gt;, they can
start a new full configured server in only 6 min.&lt;/p&gt;
&lt;p&gt;Three years ago I've started using &lt;a class="reference external" href="http://docs.ansible.com/"&gt;Ansible&lt;/a&gt;. My
deploys &lt;strong&gt;were&lt;/strong&gt; always up to twenty minutes, so one day I decided to achieve an
eight-min deploy. Eight min will be the time that I have to build a new server.&lt;/p&gt;
&lt;p&gt;To get this eight minute build, I focused on the following tasks:&lt;/p&gt;
&lt;div class="section" id="apt-cache-time"&gt;
&lt;h2&gt;APT cache time:&lt;/h2&gt;
&lt;p&gt;When you have different roles in Ansible, usually you always set &lt;em&gt;update_cache&lt;/em&gt;
in the apt task. This is pretty useful, but painful with different roles.&lt;/p&gt;
&lt;p&gt;Ansible provides the
&lt;a class="reference external" href="http://docs.ansible.com/apt_module.html"&gt;cache_valid_time&lt;/a&gt; option. If you
enable it, Ansible will check the cache age. If cache age is less than your
value, apt-get update will be ignored.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Installing useful packages&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;item&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;update_cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;yes&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;cache_valid_time&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;3600&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;with_items&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;htop&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;ngrep&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;vim&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="async-tasks"&gt;
&lt;h2&gt;Async Tasks:&lt;/h2&gt;
&lt;p&gt;Async tasks are in Ansible from version 1.7. It works like this: while one long
task is running, another short task can be executed.&lt;/p&gt;
&lt;p&gt;For example, if you want to install pip dependencies and bower dependencies:
both are needed, both can run at the same time and both take few minutes.&lt;/p&gt;
&lt;p&gt;With async tasks, tasks can be executed and forget, but this background task
can be checked later. So Ansible provides the option to get the task status in
any time.&lt;/p&gt;
&lt;p&gt;The following example show how pip and bower dependencies will run in two new
coroutines. While the dependencies are being installed in the system, another
task will create the users (or any other task). Before the playbook is
finished, it's going to be checked if the coroutines has finished properly.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;- name: bower install requirements (Coroutine #2)
  bower:
    path: /my_app/frontend/
    state: latest
  async: 1000
  poll: 0
  register: bower_install

- name: Add the users in the platform
  user:
    name: &amp;quot;{{item.name}}&amp;quot;
    shell: /bin/bash
    groups: &amp;quot;{{item.groups}}&amp;quot;
    state: &amp;quot;{{item.status}}&amp;quot;
  with_items:
    - {name: eloy, state: present, groups: admin}
    - {name: www, state: present, groups: admin}
    - {name: ftp, state: present, groups: admin}

- name: PIP result check (Check coroutine #1)
  async_status:
    jid: &amp;quot;{{ pip_install.ansible_job_id }}&amp;quot;
  register: job_result
  until: job_result.finished
  retries: 30

- name: Bower result check (Check coroutine #2)
  async_status:
    jid: &amp;quot;{{ bower_install.ansible_job_id }}&amp;quot;
  register: job_result
  until: job_result.finished
  retries: 30
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="ansible-async-task-and-loops"&gt;
&lt;h2&gt;Ansible async task and loops:&lt;/h2&gt;
&lt;p&gt;When you start with Ansible, you use a lot of &lt;em&gt;with_items&lt;/em&gt;. Loops are not
supported in Async tasks, but the following workaround can be used:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# vars.yml&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nt"&gt;dependencies&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;bison&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;gcc&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;git&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;make&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;mercurial&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p p-Indicator"&gt;-&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;Installing dependencies&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;apt&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;{{&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#39;,&amp;#39;.join(dependencies)&lt;/span&gt;&lt;span class="nv"&gt; &lt;/span&gt;&lt;span class="s"&gt;}}&amp;quot;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;update_cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;yes&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nt"&gt;cache_valid_time&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;3600&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;async&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;1000&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nt"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l l-Scalar l-Scalar-Plain"&gt;0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Happy deploy!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="ansible"></category><category term="async"></category><category term="debian"></category><category term="devops"></category><category term="deploy"></category></entry><entry><title>Statsd talk at Python Vigo Meetup</title><link href="https://acalustra.com/statsd-talk-at-python-vigo-meetup.html" rel="alternate"></link><published>2015-04-16T16:00:00+02:00</published><updated>2015-04-16T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-04-16:/statsd-talk-at-python-vigo-meetup.html</id><summary type="html">&lt;p&gt;I had the luck to give a talk to the Python Vigo community. The topic was about
how to measure our python applications with few lines of code.&lt;/p&gt;
&lt;p&gt;As you know I love statsd, so I spoke about statsd data types, InfluxDB database
and Grafana as dashboard.&lt;/p&gt;
&lt;script async class="speakerdeck-embed" data-id="83ac3b9b27974f39941924fc592f6fb2" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;p&gt;I wrote a …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I had the luck to give a talk to the Python Vigo community. The topic was about
how to measure our python applications with few lines of code.&lt;/p&gt;
&lt;p&gt;As you know I love statsd, so I spoke about statsd data types, InfluxDB database
and Grafana as dashboard.&lt;/p&gt;
&lt;script async class="speakerdeck-embed" data-id="83ac3b9b27974f39941924fc592f6fb2" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;p&gt;I wrote a few examples that are available in my Github Profile, so you only need
to do the following things to run those services in your server (Disclaimer: You
will need docker).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone https://github.com/eloycoto/statsd-influxdb-examples
&lt;span class="nb"&gt;cd&lt;/span&gt; statsd-influxdb-examples
./start.sh
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After that, the following services will be listen in these ports:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Influxdb: 8083 and 8086 (root/root)&lt;/li&gt;
&lt;li&gt;Grafana: 3000 (admin/admin)&lt;/li&gt;
&lt;li&gt;Statsd: 8125&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now you can test with the different python apps that you have in the repo.&lt;/p&gt;
&lt;p&gt;Happy code!&lt;/p&gt;
</content><category term="blog"></category><category term="statsd"></category><category term="grafana"></category><category term="statistics"></category><category term="monitoring"></category><category term="influxdb"></category></entry><entry><title>Kamailio from tables to htables</title><link href="https://acalustra.com/kamailio-from-tables-to-htables.html" rel="alternate"></link><published>2015-03-19T11:00:00+01:00</published><updated>2015-03-19T11:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-03-19:/kamailio-from-tables-to-htables.html</id><summary type="html">&lt;p&gt;Hash tables are one of the best features in Kamailio, but they can be a double
edged sword. Build web applications that work with the htables architecture can
be difficult.&lt;/p&gt;
&lt;p&gt;I am using Django since a few years ago. This framework had helped me a lot with
forms, database models …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hash tables are one of the best features in Kamailio, but they can be a double
edged sword. Build web applications that work with the htables architecture can
be difficult.&lt;/p&gt;
&lt;p&gt;I am using Django since a few years ago. This framework had helped me a lot with
forms, database models, fixtures, test, migrations, etc.. But when I needed to
use Django in conjunction with htables I found it painful: building forms,
fixtures and all that was not easy anymore.&lt;/p&gt;
&lt;p&gt;PostgreSQL provides powerful solutions for this problems. One of my favourites
is HStore. With HStore we can move from Django models to Kamailio htables in
few lines of code.&lt;/p&gt;
&lt;img alt="PostgreSQL logo" class="align-center" src="img/postgreSQL.png" /&gt;
&lt;p&gt;If, for example, we have the following data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;TABLE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;domain&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bigserial&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;PRIMARY&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;KEY&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;character&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varying&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;limit_calls&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;limit_duration&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;statsd_prefix&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;character&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varying&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;params&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;character&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varying&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;integer&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;prefix&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;character&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nb"&gt;varying&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NOT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;INSERT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;INTO&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;domain&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;limit_calls&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;limit_duration&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;statsd_prefix&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;params&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;strip&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;prefix&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acalustra.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3600&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acalustra&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;nomedia=yes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acalustra.es&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3600&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;acalustraes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;nomedia=yes&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;0034&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case we have one table with a lot of domain preferences. In our
Kamailio we will only need read access, so the easy way it's to create a new
view that generates Kamailio htable format.&lt;/p&gt;
&lt;p&gt;For that purpose we can use the following SQL query:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hstore&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;drop&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;view&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;htable_domain&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;create&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;view&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;htable_domain&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="n"&gt;rank&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;over&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;::&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;||&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)::&lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;key_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;value_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="k"&gt;CASE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;WHEN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;not&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;THEN&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;128&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;ELSE&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;&lt;span class="nb"&gt;varchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;128&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;END&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;key_value&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;      &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expires&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;FROM&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;each&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hstore&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;domainPref&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;domain&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;domainPref&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;htable&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This query uses a few PostgreSQL functions:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.PostgreSQL.org/docs/9.4/static/tutorial-window.html"&gt;rank()&lt;/a&gt;: Create a new id per row over the result.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.PostgreSQL.org/docs/9.4/static/HStore.html"&gt;hstore()&lt;/a&gt;: with the subquery(domainPref) creates a new dict like colum name -&amp;gt; value.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now we have a new SQL view with the following information:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;=&amp;gt; select * from htable_domain;
 id │           key_name            │ key_type │ value_type │   key_value   │ expires
────┼───────────────────────────────┼──────────┼────────────┼───────────────┼─────────
  1 │ acalustra.com::id             │        0 │          0 │ 1             │       0
  2 │ acalustra.es::id              │        0 │          0 │ 2             │       0
  3 │ acalustra.com::limit_calls    │        0 │          0 │ 10            │       0
  4 │ acalustra.es::limit_calls     │        0 │          0 │ 10            │       0
  5 │ acalustra.com::limit_duration │        0 │          0 │ 3600          │       0
  6 │ acalustra.es::limit_duration  │        0 │          0 │ 3600          │       0
  7 │ acalustra.com::name           │        0 │          0 │ acalustra.com │       0
  8 │ acalustra.es::name            │        0 │          0 │ acalustra.es  │       0
  9 │ acalustra.com::params         │        0 │          0 │ nomedia=yes   │       0
 10 │ acalustra.es::params          │        0 │          0 │ nomedia=yes   │       0
 11 │ acalustra.com::prefix         │        0 │          0 │ 0034          │       0
 12 │ acalustra.es::prefix          │        0 │          0 │ 0034          │       0
 13 │ acalustra.com::statsd_prefix  │        0 │          0 │ acalustra     │       0
 14 │ acalustra.es::statsd_prefix   │        0 │          0 │ acalustraes   │       0
 15 │ acalustra.com::strip          │        0 │          0 │ 0             │       0
 16 │ acalustra.es::strip           │        0 │          0 │ 0             │       0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, in Kamailio we only need to set the htable parameters:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;modparam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;htable&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;htable&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;domainPref=&amp;gt;dbtable=htable_domain;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With this piece of code, we can use this &lt;a class="reference external" href="http://kamailio.org/docs/modules/stable/modules/htable.html"&gt;htable&lt;/a&gt; having our web
developers happy which will definitely increase our dev speed.&lt;/p&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="postgresql"></category><category term="htables"></category></entry><entry><title>Kamailio statsd explained</title><link href="https://acalustra.com/kamailio-statsd-explained.html" rel="alternate"></link><published>2015-03-16T16:00:00+01:00</published><updated>2015-03-16T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-03-16:/kamailio-statsd-explained.html</id><summary type="html">&lt;p&gt;I remember when I heard about graphite/statsd. It was late of 2012 in the Python London Group. Few weeks before I read &lt;em&gt;Lean Startup&lt;/em&gt; and I learnt to measure all the things to improve our business.&lt;/p&gt;
&lt;p&gt;In early 2013 I started to use graphite. I tracked all logins, custom …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I remember when I heard about graphite/statsd. It was late of 2012 in the Python London Group. Few weeks before I read &lt;em&gt;Lean Startup&lt;/em&gt; and I learnt to measure all the things to improve our business.&lt;/p&gt;
&lt;p&gt;In early 2013 I started to use graphite. I tracked all logins, custom events, machine performance and all the running calls in the Foehn platform. After a few weeks I felt in love with Statsd/Graphite.&lt;/p&gt;
&lt;div class="section" id="about-statsd-graphite"&gt;
&lt;h2&gt;About Statsd/Graphite&lt;/h2&gt;
&lt;p&gt;Graphite born to help all the developers to monitoring their Apps. The complete stack (Graphite/statsd/Grafana) is a opensource Application Performance Management (APM). This stack is an opensource alternative to NewRelic or datadog.&lt;/p&gt;
&lt;p&gt;When we speak about graphite, we are speaking about 3 different projects:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Graphite&lt;/strong&gt;: is a meta-package with the following components:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Carbon: Is a daemon that listens for time-series data. UDP server with simple one direction protocol.&lt;/li&gt;
&lt;li&gt;Whisper: A simple database library for storing time-series data (Similar in design to RRD).&lt;/li&gt;
&lt;li&gt;Graphite Webapp: Django app that renders graphs on-demand.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Statsd&lt;/strong&gt;: Statsd was born to fix Carbon weakness. Statsd is a wrapper that support &lt;a class="reference external" href="https://github.com/etsy/statsd/blob/master/docs/metric_types.md"&gt;metric types&lt;/a&gt;. This wrapper makes graphite more powerful.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Grafana&lt;/strong&gt;: previous projects are for store information. Grafana make the sexy part and it's a dashboard where the info can be shared.&lt;/p&gt;
&lt;p&gt;Note: In the last year, a new event database is growing into the community. InfluxDB is more powerful than Graphite, supports different data types, and supports statsd protocol. Feel free to use with statsd_module. Community love it.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="why-statsd-graphite"&gt;
&lt;h2&gt;Why Statsd/Graphite&lt;/h2&gt;
&lt;p&gt;Graphite stack helps developers to measure all the things. It's not a sql/no-sql database. It's a database designed to save realtime/events info, tools to aggregate the info after hours, days or years and finally provide an http rest API.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;The main features of graphite are:&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;Save the info about events quickly. Only a simple key with value example: ('kamProd.gateways.gateway5').&lt;/li&gt;
&lt;li&gt;Find with a quick look your keys in the graphite web app or grafana.&lt;/li&gt;
&lt;li&gt;Compare information between days/hours.&lt;/li&gt;
&lt;li&gt;Make graphs related with Phones, Web, gateways, custom apps, or whatever you want.&lt;/li&gt;
&lt;li&gt;See trends in your platform in a simple panel.&lt;/li&gt;
&lt;li&gt;Compare numbers, a lot of different numbers.&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;To deep more into graphite in this talk: &lt;a class="reference external" href="http://vimeo.com/41146918"&gt;Video&lt;/a&gt; and &lt;a class="reference external" href="https://docs.google.com/presentation/d/1QlLV00OyV-J8DkwfdUiXYRao-hLRkKFuu5DP90u1jKQ/edit?pli=1#slide=id.p"&gt;Slides&lt;/a&gt; or &lt;a class="reference external" href="https://codeascraft.com/2011/02/15/measure-anything-measure-everything/"&gt;in this blog post&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="business-uses"&gt;
&lt;h2&gt;Business Uses&lt;/h2&gt;
&lt;p&gt;Activating statsd module in kamailio could allow you to measure the following things:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;How many requests have been processed and how long each request took.&lt;/li&gt;
&lt;li&gt;The load of the gateways.&lt;/li&gt;
&lt;li&gt;How many invites have been received without proper number format.&lt;/li&gt;
&lt;li&gt;How many reinvites do you have in the application.&lt;/li&gt;
&lt;li&gt;Media Codec logging to make sure that always HD codec. :-)&lt;/li&gt;
&lt;li&gt;Test how long take a database query.&lt;/li&gt;
&lt;li&gt;Count how many invalid register do you have in the application.&lt;/li&gt;
&lt;li&gt;Count how many connections are using tls.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Those are only few examples. Whatever you want to measure, can be measured without any trouble.&lt;/p&gt;
&lt;img alt="Kamailio statsd native integration" class="align-center" src="img/nice_dashboard.png" /&gt;
&lt;/div&gt;
&lt;div class="section" id="technical-info"&gt;
&lt;h2&gt;Technical info&lt;/h2&gt;
&lt;p&gt;To enable statsd in Kamailio you need to add the module in the compile flags:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;make&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;include_modules&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;statsd&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cfg&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;make&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Kamailio statsd only has 2 module parameters. &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.p.serverIP"&gt;IP&lt;/a&gt; and &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.p.serverPort"&gt;Port&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Exported functions match with statsd metric types:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;strong&gt;SET&lt;/strong&gt;: Simple info based on metric-value. &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_set"&gt;Kamailio module example&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;strong&gt;Gauge&lt;/strong&gt;: Simple info too, but in this case if &lt;a class="reference external" href="https://github.com/etsy/statsd/#key-concepts"&gt;flush interval&lt;/a&gt; is not defined, statsd will send to graphite the last value. You can send +1 or -1 in the value field. &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_gauge"&gt;Kamailio module example&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;strong&gt;Timming Options&lt;/strong&gt;: Timing is useful. Can be use &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_start"&gt;statsd_start&lt;/a&gt; and &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_stop"&gt;statsd_stop&lt;/a&gt; to track how long  took the code between start and stop.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;&lt;strong&gt;Counting Options&lt;/strong&gt;: If you want to track decrements or increments &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_incr"&gt;statsd_incr&lt;/a&gt; and &lt;a class="reference external" href="http://kamailio.org/docs/modules/devel/modules/statsd.html#statsd.f.statsd_decr"&gt;statsd_decr&lt;/a&gt; and this match exactly with statsd counting definition.&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;This&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;simple&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Add&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gorets&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;bucket&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;At&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;current&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;sent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;0.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;If&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;is&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;then&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;you&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;can&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;opt&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;no&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;metric&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;setting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;deleteCounters&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;applies&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;only&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;graphite&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;backend&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Statsd&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;will&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;both&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;rate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;well&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;as&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;each&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="installing-graphite"&gt;
&lt;h2&gt;Installing Graphite&lt;/h2&gt;
&lt;p&gt;Install graphite is hard if you are not familiarized with python tools. My advice is to follow this &lt;a class="reference external" href="https://github.com/grafana/grafana-docker-dev-env"&gt;dockerfile&lt;/a&gt; and test it using docker. At the moment I'm running a system with more than 1700 metrics keys and it works perfectly.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="graphite-statsd-environment"&gt;
&lt;h2&gt;Graphite/Statsd Environment&lt;/h2&gt;
&lt;p&gt;Environment is always important. Graphite environment is growing and it's important to add in this list:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://cabotapp.com"&gt;CabotApp&lt;/a&gt;: Monitor and alert system for your metrics. Gateway can be disabled if you are getting more than 100 5XX replies from it.&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/BrightcoveOS/Diamond/wiki"&gt;Diamond&lt;/a&gt;: Python daemon that collects system metrics. &lt;a class="reference external" href="https://github.com/BrightcoveOS/Diamond/wiki/Collectors"&gt;With a lot of useful collectors&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="my-advices"&gt;
&lt;h2&gt;My advices&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Use the docker image to start to test and production too!&lt;/li&gt;
&lt;li&gt;Grafana is a good friend, all your company will love it. &lt;a class="reference external" href="http://grafana.org/blog/2014/05/25/monitorama-video-and-update.html"&gt;You must see this video&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Graphite query language is quite powerful, &lt;a class="reference external" href="http://graphite.readthedocs.org/en/1.0/functions.html"&gt;have a look to the functions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://graphite.readthedocs.org/en/1.0/functions.html#graphite.render.functions.timeShift"&gt;TimeShift function&lt;/a&gt; is one of the best functions in graphite.&lt;/li&gt;
&lt;li&gt;The learning curve of graphite is not easy. You can try with one metric and try every week to add a new graph in grafana.&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="graphite"></category><category term="statsd"></category><category term="grafana"></category><category term="statistics"></category><category term="monitoring"></category></entry><entry><title>My first issue with Airbnb</title><link href="https://acalustra.com/my-first-issue-with-airbnb.html" rel="alternate"></link><published>2015-02-10T00:00:00+01:00</published><updated>2015-02-10T00:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2015-02-10:/my-first-issue-with-airbnb.html</id><summary type="html">&lt;p&gt;In early 2012 I met Airbnb. At the first time (I was living in Spain yet) I
thought that was not a very good idea. I was mainly scared about the fact that
I would be sharing a house with complete strangers.&lt;/p&gt;
&lt;p&gt;When I arrived in London a lot of …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In early 2012 I met Airbnb. At the first time (I was living in Spain yet) I
thought that was not a very good idea. I was mainly scared about the fact that
I would be sharing a house with complete strangers.&lt;/p&gt;
&lt;p&gt;When I arrived in London a lot of people of Google Campus were using it. So in
early 2013 I gave it a try.&lt;/p&gt;
&lt;p&gt;From early 2013, I made dozens of travels using Airbnb. Both professionally and
leisure. Nowadays I think that I couldn't live without this service.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/airbnb_logo.png" /&gt;
&lt;/div&gt;
&lt;p&gt;From mid 2013 I've travelled to London around one time per month. If I need to
book a hotel I would spend a lot of days with crappy internet connection and
nobody to speak with after work. Using Airbnb gave me a chance to speak with a
lot of English people, learning UK culture, etc... Actually, some of my
previous hosts are now my friends.&lt;/p&gt;
&lt;div class="section" id="the-first-airbnb-trouble"&gt;
&lt;h2&gt;The first Airbnb trouble&lt;/h2&gt;
&lt;p&gt;So, in January 2015, I had a reservation in a London house. I arrived on Sunday
afternoon and all was ok, so no problem. Monday got home after work and it was
freezing. I waited for the host. At 21:00 I sent her an sms and an email, at
22:00 I called her but she hanged up my call.&lt;/p&gt;
&lt;p&gt;So at 22:30 I opened an issue in Airbnb, telling that the home was freezing and
the host didn't reply to my intents of communication. Few hours later, I was in
bed with 2 duvets and 2 blankets, and Annie from Airbnb called me. She was very
very kind with me and she also offered me the chance to move to any hotel, or
try different options. By that time the host already arrived and she powered on
the central heating, so it was not needed to moved at that time in the night.
Problem fixed! - I thought.&lt;/p&gt;
&lt;p&gt;At 3:30 my room was freezing again. I tried to sleep but at 6:00 AM I woke up
and I went to work. At 8:00 I wrote a email to the host if she could provide a
solution for the heating.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/airbnb.png" /&gt;
&lt;/div&gt;
&lt;p&gt;During the morning I &lt;strong&gt;tried&lt;/strong&gt; to speak with Airbnb, but nobody replied my
emails.  So I didn't know where I'll sleep Tuesday night. Meanwhile the host
didn't reply me.&lt;/p&gt;
&lt;p&gt;At 17:00 UK time, I wrote a public tweet, and in 20 minutes someone from Airbnb
support rang me. They want to catch up with my issue! USA customer services
started to work again. :-)&lt;/p&gt;
&lt;p&gt;At 18:00 Annie called me again. She was the best support agent that I ever had.
She gave me some options (another house, hotels). I selected another house that
I used before. After few hours and dozens of Annie calls, I was in a warm house!
I'm quite happy with Annie's support, she gave me a lot of options. Meanwhile
two different Europe agents closed my tickets without any comment. I'm pissed
off with that.&lt;/p&gt;
&lt;p&gt;I was quite worried during Tuesday morning, I didn't want to move around London
in the evening. Europe support didn't provide me any solution.&lt;/p&gt;
&lt;p&gt;So, I totally recommend Airbnb! I never had problems before. USA agents and
Annie helped me a lot, but it definitely looks that they need some work in the
Europe customer service if they want to keep the good work.&lt;/p&gt;
&lt;p&gt;On the other hand, and more related with my field, Airbnb needs to improve the
calls quality. I had some issues with it and even some of the calls got dropped.&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="airbnb"></category><category term="travels"></category><category term="personal"></category></entry><entry><title>Dockercon Europe 14</title><link href="https://acalustra.com/dockercon-europe-14.html" rel="alternate"></link><published>2014-12-10T00:00:00+01:00</published><updated>2014-12-10T00:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-12-10:/dockercon-europe-14.html</id><summary type="html">&lt;p&gt;I was in the &lt;a class="reference external" href="http://europe.dockercon.com/"&gt;dockercon Europe&lt;/a&gt; only for one
reason: I think that docker and the VoIP world will be good friends. However,
some problems will need to be sorted before that can happen. At the moment the
state of the VoIP Docker support is far better than optimal, but …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I was in the &lt;a class="reference external" href="http://europe.dockercon.com/"&gt;dockercon Europe&lt;/a&gt; only for one
reason: I think that docker and the VoIP world will be good friends. However,
some problems will need to be sorted before that can happen. At the moment the
state of the VoIP Docker support is far better than optimal, but I am pretty
sure that it will be there in just few months, or even weeks because &lt;a class="reference external" href="https://github.com/docker/docker/graphs/commit-activity"&gt;Docker is
growing so fast.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I need to admit that my expectations before the conference were big, but the
result was even better than what I was expected. It was &lt;strong&gt;awesome&lt;/strong&gt;! The
organization was &lt;strong&gt;perfect&lt;/strong&gt;, venue, sound, displays, lights, WiFi, food,
&lt;strong&gt;everything&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;About the conference, it lasts for 2 days, split in 2 different kind of talks:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Keynotes from amazing people as the Docker CTO, CEO, ING IT manager, Netflix
architect... focussed in use cases and solutions.&lt;/li&gt;
&lt;li&gt;And some deeper talks about solutions, how to's, and a lot of tips.&lt;/li&gt;
&lt;/ul&gt;
&lt;img alt="Dockercon Europe start" class="align-center" src="img/dockercon.jpg" /&gt;
&lt;div class="section" id="docker-community"&gt;
&lt;h2&gt;Docker Community&lt;/h2&gt;
&lt;p&gt;One of the best things that Docker is doing is take care of their community.
It's growing a lot, loads of pull request &amp;amp; lots of new ideas. Manage this is
not easy and keeping track of all of those while you continue maintaining a
happy community is a hard work.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://www.slideshare.net/shykes/open-design-at-large-scale"&gt;The solution&lt;/a&gt;
for them is to split the project in small projects, and keep a different set of
maintainers for &lt;a class="reference external" href="https://clusterhq.com/blog/docker-extensions/"&gt;each plugin&lt;/a&gt;
of the real engine. This idea is amazing, and makes it easier for new parties
doing integrations-solutions. I love it &amp;lt;3&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="docker-machine"&gt;
&lt;h2&gt;Docker Machine&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/docker/machine"&gt;Docker Machine&lt;/a&gt; was the first new
announcement. The tool is quite powerful for admins or devs. Sadly, after deep
a little bit in the code is not as powerful as &lt;em&gt;I thought when they announced
it in the conference&lt;/em&gt;. It's definitely a tool to keep watching, but, at the
moment &lt;a class="reference external" href="http://agonzalezro.github.io/how-i-prepared-my-mac-to-make-some-docker-development.html"&gt;I'll keep my host machines with docker and shared volumes with my host.&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="docker-swarm"&gt;
&lt;h2&gt;Docker Swarm&lt;/h2&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/docker/swarm/"&gt;This announcement made me happy&lt;/a&gt;.
Orchestration is difficult, very difficult, &lt;a class="reference external" href="https://speakerdeck.com/vieux/docker-swarm"&gt;Swarm is the first step of
something that I hope will be great&lt;/a&gt;. Use docker as normal with
Swarm is quite useful, and easy to make it grow. Things like volumes or
networking linking will continue to be difficult, but I'm sure that will be
fixed in less than 4 months ;-).&lt;/p&gt;
&lt;p&gt;On the other hand: &lt;a class="reference external" href="https://twitter.com/capotribu/status/540851114242211840/photo/1"&gt;Mesos looks like that will integrate with Docker Swarm&lt;/a&gt;, this
relation makes Swam even more powerful.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="docker-compose"&gt;
&lt;h2&gt;Docker Compose&lt;/h2&gt;
&lt;p&gt;When docker announced the acquisition of &lt;a class="reference external" href="http://www.fig.sh/"&gt;fig&lt;/a&gt;, I was
thinking that the service would be merged into docker, but it looks that I was
wrong. Docker Compose use the same fig structure and I love it. Compose will
help a lot to devs, and I'm sure that in relation with Swarm they will do a
very good mix.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="another-talks"&gt;
&lt;h2&gt;Another talks&lt;/h2&gt;
&lt;p&gt;About the other talks: some of them were amazing: &lt;a class="reference external" href="https://github.com/mitchellh"&gt;Mitchell Hashimoto&lt;/a&gt; presented &lt;a class="reference external" href="http://terrafon.io"&gt;terrafon.io&lt;/a&gt; and &lt;a class="reference external" href="http://consul.io"&gt;consul.io&lt;/a&gt;. Both projects are
awesome. Consul.io will help to move from vertical scaling to horizontal
scaling in a lot of VoIP projects. Hopefully in few weeks I will write about
kamailio and consul ;-)&lt;/p&gt;
&lt;img alt="Dockercon Europe start" class="align-center" src="img/dockercon-hard.jpg" /&gt;
&lt;p&gt;Another talks were about tips, tips to build more faster, tips about how to
migrate old platforms, about how to move Docker to production, how to use it in
CI environments, those talks wer kinda useful.&lt;/p&gt;
&lt;p&gt;In the other hand, there were some other talks that I didn't like: BBC CI, Rafe
Colton talk... but it's quite difficult to keep the high level during all the
talks of the conference.&lt;/p&gt;
&lt;p&gt;Another think that it has impacted me is that the USA devs are far better
storytellers than Europe devs (We need to learn :-))&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sponsors"&gt;
&lt;h2&gt;Sponsors&lt;/h2&gt;
&lt;p&gt;Usually I don't like the sponsors trying to sell me something, but thanks to
the sponsorships at Dockerconf I got to met &lt;a class="reference external" href="https://www.tutum.co/"&gt;Tutum&lt;/a&gt;
(Amazing project to deploy multiple containers), a bit about &lt;a class="reference external" href="https://clusterhq.com/"&gt;ClusterHQ&lt;/a&gt; and I also saw that some vendors (as IBM, HP,
Vmware, Azure) getting involved in this technology which makes me happy. Thanks
to them for support the conference.&lt;/p&gt;
&lt;p&gt;On Thursday night I had a chat with Solomon Hykes about networking. &lt;a class="reference external" href="https://github.com/docker/docker/issues/8951"&gt;He shared
with me this open issues&lt;/a&gt;, I
realised that openvswitch is really powerful, and some other small tips about
networking. I'll test them and I'll tell you the results of my tests. It's
amazing how this disruptive web technology can be part of the VoIP Solutions,
I'm also sure that 2015 will be, for me, the year that I'll build a lot of VoIP
servers into containers ;-)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conclusion"&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Finally my conclusion about docker after the conference is:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;All the people use docker in testing environments.&lt;/li&gt;
&lt;li&gt;Docker is the future, but it's still hard in production.&lt;/li&gt;
&lt;li&gt;Docker is not just the technology, the good thing is the community.&lt;/li&gt;
&lt;li&gt;Split the project in small pieces, will keep the pieces small, and will be
easy to maintain, grown and focus. &lt;em&gt;Congrats to all, I love this idea &amp;lt;3&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Nothing more to add to the Dockercon summary. Thanks to all the Docker
community for this amazing conference, all the people made it amazing. Thanks
to the organizers. All conference was incredible, the venue, the party, ALL. I
know that organize events like this it's a lot of effort. Big thanks.&lt;/p&gt;
&lt;p&gt;Hopefully see you in the next Dockercon Europe!&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="docker"></category><category term="kamailio"></category></entry><entry><title>Ansible: how to maintain multiple ssh-keys in different servers</title><link href="https://acalustra.com/ansible-how-to-maintain-multiple-ssh-keys-in-different-servers.html" rel="alternate"></link><published>2014-11-19T21:00:00+01:00</published><updated>2014-11-19T21:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-11-19:/ansible-how-to-maintain-multiple-ssh-keys-in-different-servers.html</id><summary type="html">&lt;p&gt;In &lt;a class="reference external" href="http://www.ansible.com"&gt;Ansible&lt;/a&gt; is quite easy add users, pubkeys and other stuff to any server. If
you work in a organization where you have multiple servers, ssh-keys are a
swiss-knife, but they are kinda difficult to handle if you create/destroy
multiple servers every week.&lt;/p&gt;
&lt;p&gt;Without using Ansible (or any other …&lt;/p&gt;</summary><content type="html">&lt;p&gt;In &lt;a class="reference external" href="http://www.ansible.com"&gt;Ansible&lt;/a&gt; is quite easy add users, pubkeys and other stuff to any server. If
you work in a organization where you have multiple servers, ssh-keys are a
swiss-knife, but they are kinda difficult to handle if you create/destroy
multiple servers every week.&lt;/p&gt;
&lt;p&gt;Without using Ansible (or any other config management), to add or revoke access you will need to login in all
servers by hand (or by a script) and this is boring &amp;amp; error prone.&lt;/p&gt;
&lt;p&gt;With Ansible, you can setup a playbook to keep this up to date, and be sure
that the users &amp;amp; keys are going to be present or absent depending on your needs
(and the server that we are working with). For this purpose, Ansible provides 2
different functions: &lt;a class="reference external" href="http://docs.ansible.com/user_module.html"&gt;User&lt;/a&gt; and &lt;a class="reference external" href="http://docs.ansible.com/authorized_key_module.html"&gt;authorized_key&lt;/a&gt;. Let's see how to use them
in this small example &lt;cite&gt;playbook.yml&lt;/cite&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;- hosts: all
  user: root
  vars:
    admin_group: &amp;#39;admin&amp;#39;
    users:
      192.168.50.105:
        - {name: eloy, state: present}
  tasks:
    - name: Add admin group
      group: name={{admin_group}} state=present

    - name: Check users state
      user: name=&amp;quot;{{item.name}}&amp;quot; state=&amp;quot;{{item.state}}&amp;quot; group=&amp;quot;{{admin_group}}&amp;quot;
      with_items: users[ansible_eth1.ipv4.address]

    - name: Add Pub key
      authorized_key: user=&amp;quot;{{item.name}}&amp;quot;
                      key=&amp;quot;{{ lookup(&amp;#39;file&amp;#39;, &amp;#39;public_keys/&amp;#39;+item.name+&amp;#39;.pub&amp;#39;) }}&amp;quot;
                      state=&amp;quot;{{item.state}}&amp;quot;
      with_items: users[ansible_eth1.ipv4.address]
      when: item.state == &amp;quot;present&amp;quot;

    - name: Add admin group to sudo
      lineinfile: &amp;quot;dest=/etc/sudoers regexp=&amp;#39;^%{{admin_group}}} ALL&amp;#39; line=&amp;#39;%{{admin_group}} ALL=(ALL) NOPASSWD: ALL&amp;#39; state=present&amp;quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This snipped will perform 4 tasks that are easy to follow:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;We need to create group admin in the machine for sudo purposes.&lt;/li&gt;
&lt;li&gt;Per each host, we need to define the user and its state.&lt;/li&gt;
&lt;li&gt;If the user is present, we need to copy the ssh pub key into the correct folder.&lt;/li&gt;
&lt;li&gt;At the end, we need to allow the users on the admin group to sudo without password.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;If you want to use this piece of code you will only need to add your users to
the &lt;cite&gt;vars&lt;/cite&gt; section and their public keys to the &lt;cite&gt;public_keys&lt;/cite&gt; folder inside the
Ansible repo.&lt;/p&gt;
&lt;p&gt;Happy coding!&lt;/p&gt;
</content><category term="blog"></category><category term="ansible"></category><category term="ssh"></category><category term="deploy"></category><category term="users"></category></entry><entry><title>Hablando de Docker en betabeers Galicia</title><link href="https://acalustra.com/hablando-de-docker-en-betabeers-galicia.html" rel="alternate"></link><published>2014-11-14T16:00:00+01:00</published><updated>2014-11-14T16:00:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-11-14:/hablando-de-docker-en-betabeers-galicia.html</id><summary type="html">&lt;p&gt;Hace ya unos cuentos meses que estoy buceando en esto de Docker. Me parece un proyecto muy interesante tanto para proyectos de (&lt;a class="reference external" href="https://acalustra.com/asterisk-11-hangups-handlers.html"&gt;Asterisk&lt;/a&gt; o &lt;a class="reference external" href="https://acalustra.com/kamailio-statsd-better-statistics-in-your-voip-platform.html"&gt;Kamailio&lt;/a&gt;) como de web. Actualmente lo estoy usando en web, y espero que pronto de el paso a toda la voz.&lt;/p&gt;
&lt;p&gt;Aqui estan las slides:&lt;/p&gt;
&lt;script async class="speakerdeck-embed" data-id="411a4a904dfe0132b7887e32733ee33b" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;dl class="docutils"&gt;
&lt;dt&gt;Y …&lt;/dt&gt;&lt;/dl&gt;</summary><content type="html">&lt;p&gt;Hace ya unos cuentos meses que estoy buceando en esto de Docker. Me parece un proyecto muy interesante tanto para proyectos de (&lt;a class="reference external" href="https://acalustra.com/asterisk-11-hangups-handlers.html"&gt;Asterisk&lt;/a&gt; o &lt;a class="reference external" href="https://acalustra.com/kamailio-statsd-better-statistics-in-your-voip-platform.html"&gt;Kamailio&lt;/a&gt;) como de web. Actualmente lo estoy usando en web, y espero que pronto de el paso a toda la voz.&lt;/p&gt;
&lt;p&gt;Aqui estan las slides:&lt;/p&gt;
&lt;script async class="speakerdeck-embed" data-id="411a4a904dfe0132b7887e32733ee33b" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"&gt;&lt;/script&gt;&lt;dl class="docutils"&gt;
&lt;dt&gt;Y en cuanto a las preguntas que ha habido en la charla dejo unos cuantos links:&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/GoogleCloudPlatform/kubernetes"&gt;Kubernetes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blog.iron.io/2014/10/docker-in-production-what-weve-learned.html"&gt;Caso de éxito de iron.io&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.tech-d.net/2014/05/05/docker-quicktip-5-backing-up-volumes/"&gt;Backup de los contenedores&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Esto no es docker, pero lo preguntaron :P &lt;a class="reference external" href="https://github.com/wal-e/wal-e"&gt;Backup Postgresql&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
</content><category term="blog"></category><category term="Docker"></category><category term="betabeers"></category><category term="talks"></category></entry><entry><title>Asterisk 11 hangups handlers</title><link href="https://acalustra.com/asterisk-11-hangups-handlers.html" rel="alternate"></link><published>2014-10-22T16:00:00+02:00</published><updated>2014-10-22T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-10-22:/asterisk-11-hangups-handlers.html</id><summary type="html">&lt;p&gt;I don't know what I was doing when I read &lt;strong&gt;Asterisk 11 new features&lt;/strong&gt;. Last week I read in the asterisk &lt;a class="reference external" href="http://lists.digium.com/pipermail/asterisk-users/2014-October/284839.html"&gt;mailing list about hangup handlers.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;One of the pains in large apps based on asterisk are hangups. If one customer hangups in the middle of one subroutine, you need …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I don't know what I was doing when I read &lt;strong&gt;Asterisk 11 new features&lt;/strong&gt;. Last week I read in the asterisk &lt;a class="reference external" href="http://lists.digium.com/pipermail/asterisk-users/2014-October/284839.html"&gt;mailing list about hangup handlers.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;One of the pains in large apps based on asterisk are hangups. If one customer hangups in the middle of one subroutine, you need to add h exten in all subroutines. This make the code difficult to maintain. This is a normal subroutine in asterisk application:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_X&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Call&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;with&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;callerid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;CALLERID&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)})&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;EXTEN&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hangup in from-outside context&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_X&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Subroutine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Monkeys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;While&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Playback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EndWhile&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hangup into subrutine monkeys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Call from outside from eloy&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;monkeys,100,1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Subroutine Monkeys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;While&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1&amp;gt;0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Playback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tt-monkeys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000001&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Playing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;tt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gsm&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Spawn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exited&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;non&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000001&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000001&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="n"&gt;Hangup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;subrutine&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case, you should take care how to use asterisk hangup handlers into subroutines. You can't share subroutines between different logics if the hangup are different. In Asterisk 11 was added hangup handler options, and this, personally, is one of the best features added in asterisk.&lt;/p&gt;
&lt;p&gt;You can add a simple new hangup handler adding a simple set in the context:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CHANNEL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hangup_handler_push&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;EXTEN&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case, when user hangup, asterisk will use &lt;strong&gt;hangup-handler&lt;/strong&gt; context, and no problems in the gosub.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_X&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Call&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;CALLERID&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)})&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CHANNEL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hangup_handler_push&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;EXTEN&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;EXTEN&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_X&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Subroutine&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Monkeys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;While&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Playback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;same&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EndWhile&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;exten&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;_X&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;Noop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hangup into the handler&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Call from outside from eloy&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CHANNEL(hangup_handler_push)=hangup-handler,100,1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;outside&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;monkeys,100,1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Subroutine Monkeys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;While&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;1&amp;gt;0&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Playback&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tt-monkeys&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000006&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Playing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;tt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gsm&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;en&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Spawn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exited&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;non&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000006&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000006&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Internal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;NoOp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="n"&gt;Hangup&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;into&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Executing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Return&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SIP/eloy-00000006&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Spawn&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;extension&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;monkeys&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;exited&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;non&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;zero&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000006&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;SIP&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;eloy&lt;/span&gt;&lt;span class="mo"&gt;-00000006&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Internal&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Gosub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hangup&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;complete&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GOSUB_RETVAL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can check the docs into the &lt;a class="reference external" href="https://wiki.asterisk.org/wiki/display/AST/Hangup+Handlers"&gt;Aserisk wiki&lt;/a&gt;, more functions are available (push, pop, wipe). In the CLI you can check the hangup handlers with this command &lt;strong&gt;core show hanguphandlers &amp;lt;chan&amp;gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Happy coding!&lt;/p&gt;
</content><category term="blog"></category><category term="asterisk"></category><category term="dialplan"></category><category term="ari"></category><category term="hangup"></category></entry><entry><title>Kamailio statsd, better statistics in your voip platform.</title><link href="https://acalustra.com/kamailio-statsd-better-statistics-in-your-voip-platform.html" rel="alternate"></link><published>2014-10-22T16:00:00+02:00</published><updated>2014-10-22T16:00:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-10-22:/kamailio-statsd-better-statistics-in-your-voip-platform.html</id><summary type="html">&lt;p&gt;I remember when I read about &lt;a class="reference external" href="http://graphite.wikidot.com/"&gt;Graphite&lt;/a&gt;. I was reading that Vimeo used it for making realtime monitoring in their projects and reporting for all the team. I got a chance to test with my local apps and after a few days I started to love graphite.&lt;/p&gt;
&lt;p&gt;I start to …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I remember when I read about &lt;a class="reference external" href="http://graphite.wikidot.com/"&gt;Graphite&lt;/a&gt;. I was reading that Vimeo used it for making realtime monitoring in their projects and reporting for all the team. I got a chance to test with my local apps and after a few days I started to love graphite.&lt;/p&gt;
&lt;p&gt;I start to use graphite in my web apps. After few weeks I needed to monitor a new feature deployed in one of our kamailio. The first time I used mod_python+statsd, but I realise that using python module was not the best way so I write &lt;a class="reference external" href="https://github.com/eloycoto/statsd"&gt;statsd module&lt;/a&gt; that work native with kamailio.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://github.com/eloycoto/statsd"&gt;I made this module, after 7 years working with Kamailio&lt;/a&gt;, I read/modified a lot of modules, but I never had a chance to write a new one.&lt;/p&gt;
&lt;p&gt;Kamailio mod statsd provides just four functions. All of those functions are damn easy to understand but if you are not familiarized with this world, I would recommend you to check this posts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://www.digitalocean.com/community/tutorials/an-introduction-to-tracking-statistics-with-graphite-statsd-and-collectd"&gt;Introduction to graphite and collectd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://blog.pkhamre.com/2012/07/24/understanding-statsd-and-graphite/"&gt;Undertanding graphite and statsd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/etsy/statsd/blob/master/docs/metric_types.md"&gt;Statsd metric types&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;img alt="grafana kamailio integration" class="align-center" src="img/grafana1.png" /&gt;
&lt;p&gt;If you want to test the module without a lot of trouble, the recommended way in my opinion is to use this &lt;a class="reference external" href="https://github.com/grafana/grafana-docker-dev-env"&gt;Docker deploy&lt;/a&gt; (Grafana is the best dashboard for graphite).&lt;/p&gt;
&lt;p&gt;And after have it installed, go throught the &lt;a class="reference external" href="https://github.com/eloycoto/statsd/blob/master/Readme.md"&gt;READAME.md&lt;/a&gt; file:&lt;/p&gt;
&lt;div class="section" id="kamailio-statsd-parameters"&gt;
&lt;h2&gt;&lt;a class="reference external" href="http://github.com/eloycoto/kamailio-statsd"&gt;Kamailio statsd parameters&lt;/a&gt;:&lt;/h2&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;&lt;strong&gt;IP&lt;/strong&gt;: Statsd listen IP.&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;modparam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;statsd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ip&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;127.0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;dt&gt;&lt;strong&gt;PORT&lt;/strong&gt;: Statsd listen port.&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;modparam&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;statsd&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;port&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;8125&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
&lt;div class="section" id="kamailio-statsd-functions"&gt;
&lt;h2&gt;&lt;a class="reference external" href="http://github.com/eloycoto/kamailio-statsd"&gt;Kamailio statsd functions&lt;/a&gt;:&lt;/h2&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;&lt;strong&gt;Set&lt;/strong&gt;:  counting unique occurrences of events between flushes, using a Set to store all occurring events.&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;customer_credit&lt;/span&gt;&lt;span class="p"&gt;]{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;statsd_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;“&lt;/span&gt;&lt;span class="n"&gt;customer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;+$avp(customer)+”credit”, $var(credit))&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;&lt;strong&gt;Gauge&lt;/strong&gt;:  A gauge simply indicates an arbitrary value at a point in time. You can use like this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;gauge_method&lt;/span&gt;&lt;span class="p"&gt;]{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;statsd_gauge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;method.count&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;$rm&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;“&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;”&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;$avp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;prepaid&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;statsd_gauge&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;customer.prepaid&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;“&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="err"&gt;”&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Timing&lt;/strong&gt;: You can use timing options in any function, or specific route, with code like this:&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;long_mysql_query&lt;/span&gt;&lt;span class="p"&gt;]{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;statsd_start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;long_mysql_query&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;sql_query&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ca&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;select sleep(rand()/4)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ra&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;statsd_stop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;long_mysql_query&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;Timers (statsd_start, statsd_stop) are an incredibly powerful tool for tracking application performance.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Counters&lt;/strong&gt;:  You can use statsd_incr or statsd_decr for increment/decrement a counter. For example I used a lot the counter with GeoIP module or log any specific feature in the platform (Prepaid user, new features launch).&lt;/p&gt;
&lt;blockquote&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;route&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;]{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;geoip_match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$si&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;src&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)){&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;statsd_incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;country.&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;$&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can also check how many failure are coming from your providers, gateways, etc.&lt;/p&gt;
&lt;p&gt;After that, you can use grafrana (Port 8081 if you are using the dockerfile) and &lt;a class="reference external" href="http://grafana.org/docs/features/graphite/"&gt;add a new graph with your information&lt;/a&gt;. The first days, you will feel lost, after a few weeks I'm sure that you will love it ;-)&lt;/p&gt;
&lt;img alt="Grafana kamailio integration dashboard" class="align-center" src="img/grafana3.png" /&gt;
&lt;p&gt;If you have any trouble, you can ping me in my email, or in twitter &lt;a class="reference external" href="http://twitter.com/eloycoto/"&gt;&amp;#64;eloycoto&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;You can get the source of the statsd module in github:
&lt;a class="reference external" href="https://github.com/eloycoto/statsd"&gt;https://github.com/eloycoto/statsd&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="graphite"></category><category term="statsd"></category><category term="grafana"></category><category term="statistics"></category><category term="monitoring"></category></entry><entry><title>trick and tips en ansible</title><link href="https://acalustra.com/trick-and-tips-en-ansible.html" rel="alternate"></link><published>2014-06-03T12:20:00+02:00</published><updated>2014-06-03T12:20:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-06-03:/trick-and-tips-en-ansible.html</id><summary type="html">&lt;p&gt;Hace aproximadamente dos años que empecé a trabajar con Ansible. Desde ese día después de usar algo de chef/puppet y darme cabezazos contra la pared (dada su complejidad), este stack se ha convertido en mi preferido, por lo sencillo que es. No es tan completo como los anteriormente comentados …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Hace aproximadamente dos años que empecé a trabajar con Ansible. Desde ese día después de usar algo de chef/puppet y darme cabezazos contra la pared (dada su complejidad), este stack se ha convertido en mi preferido, por lo sencillo que es. No es tan completo como los anteriormente comentados, pero para mis necesidades cumple perfectamente.&lt;/p&gt;
&lt;p&gt;Durante este tiempo han sido muchas las cosas que he aprendido, de las cuales me parece bueno salientar:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Registro de variables&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Cada tarea tiene un resultado, muchas veces creemos que no nos dan un resultado que no sea True/False. Pero muchos módulos devuelven mucha información en un objeto json. En el código fuente de los &lt;a class="reference external" href="https://github.com/ansible/ansible/blob/devel/library/commands/command#L150-L160"&gt;módulos se pueden buscar que info es la que exporta&lt;/a&gt;. Para poder utilizarla solo debemos hacer lo siguiente en nuestro playbook:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
- command: cat /etc/hostname
  register: my_var

- debug: msg=&amp;quot;Hostname == {{my_var.stdout}} Command start at {{my_var.start}}&amp;quot;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Condicionales&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Las condiciones es una de las partes más sencillas de Ansible. Pero lo mejor que este sistema tiene es la capacidad de hacer condicionales con expresiones de python, lo que nos permite validar en una sola línea:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p class="first"&gt;Usando variables internas de ansible:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
- include: debian.yml
  when: ansible_os_family == &amp;quot;Debian&amp;quot;

- include: network.yml
  when: ansible_eth0.active
&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;Usando expresiones &lt;a class="reference external" href="https://docs.python.org/2/library/string.html"&gt;string de python&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
- include: debian.yml
  when: &amp;quot;'Debian' in my_var.stdout&amp;quot;

- include: debian.yml
  when: my_var.stdout.find(&amp;quot;Debian&amp;quot;) =&amp;gt;= 1

- include: debian.yml
  when: my_var.stdout.lower() == 'debian'
&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Debug&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Suele ser útil mostrar debug en un formato legible. La función debug es una gran desconocida pero hace justo lo que deseamos:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
- debug: msg=&amp;quot;System {{ inventory_hostname }} with IP: {{ansible_eth0.ipv4}} is ready&amp;quot;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;pre_task y post_task&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Nosotros por ejemplo tenemos muchos roles en repositorios separados y usamos &lt;a class="reference external" href="http://git-scm.com/docs/git-submodule"&gt;git-submodules&lt;/a&gt;. De esta manera compartimos muchos de los roles (Asterisk, Kamailio, Postgresql) por lo que muchas veces antes de ejecutar el rol, tenemos que ejecutar una serie de tareas propias del proyecto, para ello nuestros playbooks lucen así:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
- name: apply asterisk config
  hosts: prod
  gather_facts: yes
  user: root
  vars_files:
    - vars/prod.yml
    - vars/ha.yml
  roles:
    - asterisk
  post_task:
    - name: Add configs
      template: src=src/{{item}}.j2 dest=/etc/asterisk/{{item}}.conf mode=0444
      with_items:
        - extensions
        - sip
        - features
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Callbacks&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Personalmente esta es una de las funciones más interesantes que hay en &lt;a class="reference external" href="http://jpmens.net/2012/09/11/watching-ansible-at-work-callbacks/"&gt;Ansible&lt;/a&gt;. Cada vez que el playbook o tarea acaba podemos definir una serie de &lt;a class="reference external" href="https://github.com/ansible/ansible/blob/devel/plugins/callbacks/osx_say.py#L31"&gt;callbacks&lt;/a&gt; y obtener información de la misma.Yo las suelo usar para enviar un resumen a nuestro xmpp de cuantas tareas se ejecutaron con cambios, la hora de los cambios y el resultado:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
class CallbackModule(object):
    def playbook_on_stats(self, stats):
        do_stuff()
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Test&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Una de las cosas que me falta en Ansible es una solución 100% opensource como &lt;a class="reference external" href="http://www.ansible.com/tower"&gt;Tower&lt;/a&gt;. Tower no es caro, pero en nuestro caso, no es necesario este sistema. Una de las mejoras que hemos implementado es cada vez que se hace un push al server, Jenkins ejecuta un dry-run y ver el resultado de la siguiente manera:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
ansible-playbook -i host playbook.yml -C
&lt;/pre&gt;
&lt;p&gt;Con lo que tenemos una lista de resultados que se van a ejecutar en la máquina. En el caso de que existan cambios tengo una mini APP que nos notifica que estan pendiente cambios sin aplicar.&lt;/p&gt;
&lt;p&gt;Finalmente estas son las funciones que nunca ves en los ejemplos pero que son muy útiles a la hora de desarrollar y hacer despliegues en entornos de producción, pruebas y desarrollo. Yo tengo el 90% de mis servidores basados en Ansible y cada día que pasa estoy más alegre de utilizarlo.  ;-)&lt;/p&gt;
</content><category term="blog"></category><category term="ansible"></category><category term="devops"></category><category term="howto"></category><category term="asterisk"></category><category term="playbook"></category></entry><entry><title>Politicas de seguridad en Kamailio</title><link href="https://acalustra.com/politicas-de-seguridad-en-kamailio.html" rel="alternate"></link><published>2014-04-05T12:20:00+02:00</published><updated>2014-04-05T12:20:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2014-04-05:/politicas-de-seguridad-en-kamailio.html</id><summary type="html">&lt;p&gt;El otro día a través de este &lt;a class="reference external" href="https://twitter.com/hellc2/status/448756126382034944"&gt;tuit de Elio Rojano&lt;/a&gt; me anime a  documentar una serie de procesos que estamos siguiendo para mantener nuestra infraestructura segura y al mismo tiempo poder mantener las excepciones para no cortar el servicio en falsos positivos.&lt;/p&gt;
&lt;p&gt;Para securizar kamailio lo más normal es …&lt;/p&gt;</summary><content type="html">&lt;p&gt;El otro día a través de este &lt;a class="reference external" href="https://twitter.com/hellc2/status/448756126382034944"&gt;tuit de Elio Rojano&lt;/a&gt; me anime a  documentar una serie de procesos que estamos siguiendo para mantener nuestra infraestructura segura y al mismo tiempo poder mantener las excepciones para no cortar el servicio en falsos positivos.&lt;/p&gt;
&lt;p&gt;Para securizar kamailio lo más normal es usar el &lt;a class="reference external" href="http://kamailio.org/docs/modules/stable/modules/pike.html"&gt;módulo pike&lt;/a&gt;, teniendo un código muy parecido a este tipo:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
route[PIKE_CHECK]{
    if (src_ip == myself)
        return(1);

    if($sht(ipban=&amp;gt;$si)!=$null){
        xdbg(&amp;quot;Request $rm from blocked IP - from $fu (IP:$si:$sp)\n&amp;quot;);
        exit;
    }

    if (!pike_check_req()){
        xlog(&amp;quot;L_ALERT&amp;quot;,&amp;quot;Callid $ci -- pike blocking $rm from $fu (IP:$si:$sp)&amp;quot;);
        $sht(ipban=&amp;gt;$si) = 1;
        exit;
    }
}
&lt;/pre&gt;
&lt;p&gt;Pero esto según los parámetros del modelo  podemos poner más rígido o más flexible. Si le pones flexible puedes poner en riesgo tu infraestructura. Nosotros creemos que la mejor opción es ser restrictivos y añadir opciones para desbloquear.&lt;/p&gt;
&lt;p&gt;En nuestro caso a la ruta normal de Pike hemos añadido una serie de valores que nos son útiles para añadir datos a la blacklist:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Validar si la extensión se parece a una existente.El caso de que se registre a la extensión 140 cuando lo normal es tener extensiones 7XXX, por otro lado para extensiones con nombre vamos a usar el &lt;a class="reference external" href="https://github.com/seatgeek/fuzzywuzzy"&gt;método fuzzy&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Validar una lista blanca de IPs que siempre están validadas.&lt;/li&gt;
&lt;li&gt;En caso de error tenemos una cola que obtiene el valor del &lt;a class="reference external" href="http://stackoverflow.com/questions/2575760/python-lookup-hostname-from-ip-with-1-second-timeout"&gt;reverse dns&lt;/a&gt; de la ip origen, si no pertenece a un dominio válido no bloqueamos.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Por otra parte muchos de nuestros clientes se conectan desde ips de hoteles/starbucks/etc. Es bastante difícil de explicar que se te bloquea desde un determinado lugar por tener problemas con el registro de su sip. Básicamente hemos añadido una opción dentro del userportal, que valida la ip como usuario y añade durante una hora la ip en la whitelist. Para hacerlo tenemos la siguiente route:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
modparam(&amp;quot;ndb_redis&amp;quot;, &amp;quot;server&amp;quot;, &amp;quot;name=srvN;addr=127.0.0.1;port=6379;db=0&amp;quot;)
route[IS_IN_WHITE_LIST]{
    if ( redis_cmd(&amp;quot;srvN&amp;quot;,&amp;quot;GET white_list:$si&amp;quot;,&amp;quot;r&amp;quot;) ){
        return(1);
    }else{
        return(0);
    }
}
&lt;/pre&gt;
&lt;p&gt;Desde nuestra web básicamente hacemos los siguientes comandos dentro de redis:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
redis 127.0.0.1:6379&amp;gt; SET white_list:{SOURCE_IP} 1
OK
redis 127.0.0.1:6379&amp;gt; EXPIRE white_list:{SOURCE_IP} 3600
(integer) 1
&lt;/pre&gt;
&lt;p&gt;Con esto de momento y teniendo muy en cuenta la información del graphite vamos intentando solucionar todos nuestros problemas. Nuestra white list es accesible desde diferentes puntos, desde la integración con la web nuestros clientes están más contentos y al mismo tiempo en cualquier momento podemos bloquear a una IP.&lt;/p&gt;
&lt;p&gt;Por otra parte tenemos nuestro sistema de bloqueo por rates, en el momento que un cliente se dispara de rates en un momento, lo que hacemos es borrarlo de la white_list y volvemos a bloquearlo. Por otra parte estamos buscando una manera de añadir un counter con expire, para ver que una ip no hace 100 request en 5 minutos, pero esto, de momento, es una idea.&lt;/p&gt;
&lt;p&gt;Esto, evidentemente, no es el mejor sistema de seguridad, un robot puede llegar a acceder a la url del sistema, pero bueno, al mismo tiempo intentamos que nuestros problemas no sean problemas de nuestros clientes ;-)&lt;/p&gt;
&lt;p&gt;PS: Desde la pasada Kamailio World conference el siguiente punto será este usar los datos de &lt;a class="reference external" href="http://mirror.simwood.com/honeypot/"&gt;Ips de Simwood&lt;/a&gt;&lt;/p&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="redis"></category><category term="python"></category><category term="seguridad"></category><category term="ataques"></category><category term="voip"></category><category term="sip"></category></entry><entry><title>Haciendo test con sipp sin morir en el intento</title><link href="https://acalustra.com/haciendo-test-con-sipp-sin-morir-en-el-intento.html" rel="alternate"></link><published>2013-08-30T10:10:00+02:00</published><updated>2013-08-30T10:10:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2013-08-30:/haciendo-test-con-sipp-sin-morir-en-el-intento.html</id><summary type="html">&lt;p&gt;En el pasado Febrero cerramos un proyecto muy importante. Dicho proyecto necesita una cantidad de test, no porque el cliente lo pidiera, si no porque el SLA que teníamos con ellos nos hacia que con cualquier cambio solo teníamos ventanas muy pequeñas de tiempo. Lo que nos hizo tener que …&lt;/p&gt;</summary><content type="html">&lt;p&gt;En el pasado Febrero cerramos un proyecto muy importante. Dicho proyecto necesita una cantidad de test, no porque el cliente lo pidiera, si no porque el SLA que teníamos con ellos nos hacia que con cualquier cambio solo teníamos ventanas muy pequeñas de tiempo. Lo que nos hizo tener que programar todos los escenarios posibles para una validación más eficiente.&lt;/p&gt;
&lt;p&gt;Desde ese proyecto y usando &lt;a class="reference external" href="http://sipsimpleclient.org/"&gt;python-sipsimple&lt;/a&gt; hice un pequeño framework, para hacer test sin ser la locura de los ficheros xml de &lt;a class="reference external" href="http://sipp.sourceforge.net/"&gt;sipp&lt;/a&gt;. En los últimos meses estaba pensando en como poder hacer un framework libre, que pudiera ser útil para demás proyectos. Cuando tenía algo de código han salido a la luz dos proyectos muy interesantes.&lt;/p&gt;
&lt;p&gt;El primero ha sido el que ha realizado &lt;a class="reference external" href="http://www.metaswitch.com/"&gt;metaswitch&lt;/a&gt;, que &lt;a class="reference external" href="https://github.com/Metaswitch"&gt;han liberado muchas partes de sus herramientas/productos&lt;/a&gt; y tiene un &lt;a class="reference external" href="https://github.com/Metaswitch/clearwater-live-test"&gt;framework de test muy orientado a su plataforma.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;El framework esta bien, pero era costoso de hacer sin ser referido a Metaswitch.&lt;/p&gt;
&lt;p&gt;Esta semana &lt;a class="reference external" href="https://twitter.com/bklang"&gt;Ben Klang&lt;/a&gt; ha liberado &lt;a class="reference external" href="http://bklang.github.io/sippy_cup/"&gt;sippy_cup&lt;/a&gt;, un framework que la verdad me ha dejado muy contento. Es justo lo que estaba haciendo, por lo que a partir de ahora, usare este sistema y me &lt;a class="reference external" href="https://github.com/bklang/sippy_cup/pull/8"&gt;centraré en enviar pull-request&lt;/a&gt; si algo veo que se puede mejorar.&lt;/p&gt;
&lt;p&gt;Para instalar este framework hay que seguir los siguientes pasos:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Dependencias ruby&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt-get install build-essential git --yes
curl -L https://get.rvm.io &lt;span class="p"&gt;|&lt;/span&gt; bash -s stable
&lt;span class="nb"&gt;source&lt;/span&gt; ~/.rvm/scripts/rvm
rvm autolibs &lt;span class="nb"&gt;enable&lt;/span&gt;
rvm install &lt;span class="m"&gt;1&lt;/span&gt;.9.3
rvm use &lt;span class="m"&gt;1&lt;/span&gt;.9.3
gem install sippy_cup
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Instalando sipp&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;apt-get install libpcap-dev
&lt;span class="nb"&gt;cd&lt;/span&gt; /tmp/
git clone https://github.com/polysics/sipp_dynamic_pcapp_play.git
tar -xvzf sipp-xxx.tar.gz
&lt;span class="nb"&gt;cd&lt;/span&gt; sipp-*
patch -p1 -i /tmp/sipp_dynamic_pcapp_play/
autoreconf -ivf
./configure --with-pcap
make
cp sipp /usr/local/bin/
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Usando sippy_cup&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Para empezar con sippy_cup se necesita crear un fichero .yml con la siguiente estructura&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;---
source: &lt;span class="m"&gt;192&lt;/span&gt;.168.1.114
destination: &lt;span class="m"&gt;192&lt;/span&gt;.168.1.120
max_concurrent: &lt;span class="m"&gt;10&lt;/span&gt;
calls_per_second: &lt;span class="m"&gt;5&lt;/span&gt;
number_of_calls: &lt;span class="m"&gt;20&lt;/span&gt;
sip_user: &lt;span class="m"&gt;100&lt;/span&gt;
steps:
  - invite
  - wait_for_answer
  - ack_answer
  - sleep &lt;span class="m"&gt;3&lt;/span&gt;
  - send_digits &lt;span class="s1"&gt;&amp;#39;3125551234&amp;#39;&lt;/span&gt;
  - sleep &lt;span class="m"&gt;5&lt;/span&gt;
  - send_digits &lt;span class="s1"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;
  - wait_for_hangup
&lt;/pre&gt;&lt;/div&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Una vez creado el fichero, tenemos dos opciones para correr el &lt;strong&gt;sippy_cup&lt;/strong&gt;:&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;&lt;strong&gt;-c&lt;/strong&gt;: Esto genera solamente el .xml y el pcap que se necesita&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;-r&lt;/strong&gt;: Esto hace que el programa empieze a correr y genera el flujo de llamadas.&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sippy_cup -cr my_test_scenario.yml
Compiling media to /Users/eloycotopereiro/dev/sipp/sippcup/my_test_scenario.xml...done.
Compiling scenario to /Users/eloycotopereiro/dev/sipp/sippcup/my_test_scenario.pcap...done.
&lt;span class="s2"&gt;&amp;quot;Preparing to run SIPp command: sudo sipp -i 192.168.1.114 -p 8836 -sf /Users/eloycotopereiro/dev/sipp/sippcup/my_test_scenario.xml -l 10 -m 20 -r 5 -s 100 192.168.1.120 &amp;gt; /dev/null 2&amp;gt;&amp;amp;1&amp;quot;&lt;/span&gt;
Password:
&lt;span class="s2"&gt;&amp;quot;Test completed successfully!&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ahora ya tenemos nuestro servicio de testing mas sencillo de leer, y mas fácil para hacer pruebas en nuestros servicios de voip.&lt;/p&gt;
</content><category term="blog"></category><category term="sip"></category><category term="sipp"></category><category term="ruby"></category><category term="sippy_cup"></category><category term="test"></category><category term="asterisk"></category><category term="asteriskTestSuite"></category></entry><entry><title>Integrando hubot con nuestro servicio xmpp</title><link href="https://acalustra.com/integrando-hubot-con-nuestro-servicio-xmpp.html" rel="alternate"></link><published>2013-05-10T00:30:00+02:00</published><updated>2013-05-10T00:30:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2013-05-10:/integrando-hubot-con-nuestro-servicio-xmpp.html</id><summary type="html">&lt;p&gt;&lt;a class="reference external" href="http://hubot.github.com/"&gt;Hubot&lt;/a&gt; es uno de los productos más de moda en el panorama de empresas desarrolladoras de software Americanas. Iniciado y comandado por &lt;a class="reference external" href="http://github.com/"&gt;Github&lt;/a&gt;, Hubot permite automatizar muchas tareas a través de tu chat de grupo.&lt;/p&gt;
&lt;p&gt;La propia descripción de Hubot en la página web es la siguiente:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;GitHub&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Inc&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;wrote …&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</summary><content type="html">&lt;p&gt;&lt;a class="reference external" href="http://hubot.github.com/"&gt;Hubot&lt;/a&gt; es uno de los productos más de moda en el panorama de empresas desarrolladoras de software Americanas. Iniciado y comandado por &lt;a class="reference external" href="http://github.com/"&gt;Github&lt;/a&gt;, Hubot permite automatizar muchas tareas a través de tu chat de grupo.&lt;/p&gt;
&lt;p&gt;La propia descripción de Hubot en la página web es la siguiente:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;GitHub&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Inc&lt;/span&gt;&lt;span class="p"&gt;.,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;wrote&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;first&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;version&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Hubot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;automate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;our&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;company&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;chat&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;room&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Hubot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;knew&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;how&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;deploy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;site&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;automate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;lot&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;and&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;be&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;source&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;fun&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;company&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;Eventually&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;he&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;grew&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;to&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;become&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;formidable&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;force&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;GitHub&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;But&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;he&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;led&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kr"&gt;private&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;messy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;life&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;So&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;we&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;rewrote&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;him&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;img alt="hubot-fast-integration" class="align-center" src="img/hubot.jpg" /&gt;
&lt;p&gt;En este caso Hubot es muy potente. Además es muy fácil extender los módulos existentes. La situación más normal es tenerlo integrado con Hipchat, o campfire. Pero pocas veces se ve integrado con XMPP. En mi empresa usamos bastante el XMPP, por lo que poder integrar esta herramienta es increíble para nosotros, no solo por los script existentes, si no también por lo que podemos generar.&lt;/p&gt;
&lt;p&gt;Para instalar hubot lo primero que hay que hacer es tener la versión de &lt;a class="reference external" href="http://nodejs.org/"&gt;node&lt;/a&gt; / &lt;a class="reference external" href="http://coffeescript.org/"&gt;coffee-script&lt;/a&gt; correcta:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# apt-get install build-essential libssl-dev git-core redis-server libexpat1-dev&lt;/span&gt;
&lt;span class="c1"&gt;# cd /usr/src/&lt;/span&gt;
&lt;span class="c1"&gt;# wget http://nodejs.org/dist/v0.8.17/node-v0.8.17.tar.gz&lt;/span&gt;
&lt;span class="c1"&gt;# tar xf node-v0.8.17.tar.gz -C /usr/local/src &amp;amp;amp;&amp;amp;amp; cd /usr/local/src/node-v0.8.17&lt;/span&gt;
&lt;span class="c1"&gt;# ./configure &amp;amp;amp;&amp;amp;amp; make &amp;amp;amp;&amp;amp;amp; make install&lt;/span&gt;
&lt;span class="c1"&gt;# npm install -g coffee-script&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una vez instaladas todas las dependencias solamente hay que hacer el deploy del código base.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cd /opt&lt;/span&gt;
&lt;span class="c1"&gt;# git clone git://github.com/github/hubot.git &amp;amp;amp;&amp;amp;amp; cd hubot&lt;/span&gt;
&lt;span class="c1"&gt;# npm install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una vez instalado tenemos que comprobar que funciona correctamente, para ello ejecutamos los siguientes comandos:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@deb-pruebas:/opt/hubot$ ./bin/hubot
Hubot&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;gt&lt;span class="p"&gt;;&lt;/span&gt; hubot ping
Hubot&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;gt&lt;span class="p"&gt;;&lt;/span&gt; PONG
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ahora tenemos que crear el bot que sera la configuración que se conecte a nuestro servidor:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/opt/hubot/bin/hubot -c ./xmpp
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Eso nos crea una carpeta llamada xmpp, ahora tenemos que entrar y editar las dependencias en el package.json para añadir nuestras necesidades:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;dependencies&amp;quot;&lt;/span&gt;: &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;hubot&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=2.3.2&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;hubot-scripts&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;= 2.1.0&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;optparse&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=1.0.3&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;node-xmpp&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=0.3.2&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;hubot-xmpp&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=0.1.0&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;htmlparser&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=1.7.6&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;soupselect&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=0.2.0&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;underscore&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=1.3.3&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;underscore.string&amp;quot;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;quot;&amp;amp;gt;=2.2.0rc&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ahora solo tenemos que instalar las dependencias con &lt;strong&gt;npm install&lt;/strong&gt;. Una vez instaladas tenemos que configurar las env variables.  Donde le decimos a donde/como se tiene que conectar:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HUBOT_XMPP_USERNAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;hubot@deb-pruebas
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HUBOT_XMPP_PASSWORD&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;hubot
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HUBOT_XMPP_ROOMS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;dev@dev-pruebas
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Una vez configurado solo tenemos que ejecutarlo y empezar a jugar en nuestro chat de grupo:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@deb-pruebas:/$ /opt/hubot/xmpp/bin/hubot --adapter xmpp
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;En ese momento veremos que se conecta el usuario hubot a la conferencia y ya podemos empezar a usar los comandos en la sala.  Para listar todos los comandos y ver que se puede hacer solamente hay que ejecutar &lt;strong&gt;hubot help&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Si necesitais mas scripts, &lt;a class="reference external" href="https://github.com/github/hubot-scripts/"&gt;en este repositorio de github&lt;/a&gt;, existen un ciento de ellos totalmente diferentes. &lt;a class="reference external" href="http://net.tutsplus.com/tutorials/javascript-ajax/writing-hubot-plugins-with-coffeescript/"&gt;Por otra parte aquí os dejo un tutorial para poder escribir vuestros propios plugins&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Este es una pequeña demo de lo que se puede hacer.&lt;/p&gt;
&lt;iframe src="http://player.vimeo.com/video/57637316" width="500" height="314" frameborder="0"&gt;&lt;/iframe&gt;&lt;p&gt;Yo lo he instalado recientemente, durante esta semana creo que voy a escribir varios módulos. Te imaginas obtener cuantas llamadas existen en vuestra plataforma, o quizás añadir/expulsar a un usuario a la cola solamente con un comando xmpp :-)&lt;/p&gt;
</content><category term="blog"></category><category term="xmpp"></category><category term="github"></category><category term="productividad"></category><category term="hubot"></category><category term="asterisk"></category><category term="jabber"></category></entry><entry><title>Spring Hackaton London</title><link href="https://acalustra.com/spring-hackaton-london.html" rel="alternate"></link><published>2013-04-28T12:25:00+02:00</published><updated>2013-04-28T12:25:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2013-04-28:/spring-hackaton-london.html</id><summary type="html">&lt;p&gt;26-28 de Abril en Londres, 3 hackathones en apenas 300 metros de distancia y muchas ganas de programar. En el pasado mes de octubre había estado en la #angelhack me quedo con un poco mal sabor de boca debido a que no cumplió mis expectativas a nivel de proyectos.&lt;/p&gt;
&lt;p&gt;Este …&lt;/p&gt;</summary><content type="html">&lt;p&gt;26-28 de Abril en Londres, 3 hackathones en apenas 300 metros de distancia y muchas ganas de programar. En el pasado mes de octubre había estado en la #angelhack me quedo con un poco mal sabor de boca debido a que no cumplió mis expectativas a nivel de proyectos.&lt;/p&gt;
&lt;p&gt;Este fin de semana, con la compañía de &lt;a class="reference external" href="https://twitter.com/agonzalezroro/"&gt;&amp;#64;agonzalezroro&lt;/a&gt;, nos fuimos a la &lt;a class="reference external" href="http://hackathoncentral.com/"&gt;hackatoncentral&lt;/a&gt;, que tenía una bases muy interesantes:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Varios proveedores de &lt;a class="reference external" href="http://hackathoncentral.com/#schedule"&gt;APIS que patrocinaban el evento&lt;/a&gt;. Siendo los más accesibles &lt;a class="reference external" href="http://www.openstreetmap.org/"&gt;OpenStreetMaps&lt;/a&gt;, &lt;a class="reference external" href="http://www.twilio.com/"&gt;twilio&lt;/a&gt; o el &lt;a class="reference external" href="http://data.police.uk/api/docs/"&gt;api de la policía de Reino unido&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Enfocado a aplicaciones locales, ya sean web o móvill.&lt;/li&gt;
&lt;li&gt;Tenía que ser freshcode&lt;/li&gt;
&lt;li&gt;Había &lt;a class="reference external" href="http://hackathoncentral.com/#prizes"&gt;6 diferentes categorías&lt;/a&gt; para optar a interesantes premios.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;La idea era hacer un chat Webrtc/sip con &lt;a class="reference external" href="https://acalustra.com/sistemas-de-colas-basado-en-redis-en-kamailio.html"&gt;Kamailio&lt;/a&gt; con localización en un mapa, pero finalmente, al presentar las API de los patrocinadores, la habían propuesto, por lo que la desechamos y empezamos a pensar en otra solución/idea.&lt;/p&gt;
&lt;p&gt;La idea fue un sistema de localización de comisarías de policía en un mapa, y que al clickar en ella se pudiera llamar gratuitamente a la comisaría.&lt;/p&gt;
&lt;img alt="" class="align-center" src="img/springhackathon.png" style="width: 50%;" /&gt;
&lt;p&gt;Empezamos a programar y teníamos claro que usaríamos herramientas que no usábamos a menudo para así aprender algo nuevo,aqui os presento la lista:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Backend: Finalmente usamos &lt;a class="reference external" href="http://flask.pocoo.org/docs/"&gt;Flask&lt;/a&gt;, que es muy ligero y rápido de programar.&lt;/li&gt;
&lt;li&gt;Frontend: Finalmente nos decantamos por &lt;a class="reference external" href="http://emberjs.com/"&gt;emberjs&lt;/a&gt;. Álex prefería backbone, pero yo había estudiado las últimas semanas este framework. Por otra parte también usamos &lt;a class="reference external" href="http://openlayers.org/"&gt;Openlayers&lt;/a&gt; con los &lt;a class="reference external" href="http://dev.openlayers.org/docs/files/OpenLayers/Layer/Bing-js.html"&gt;layers de bing&lt;/a&gt; para mostrar el mapa.&lt;/li&gt;
&lt;li&gt;Se hicieron una pequeños scrappers para detectar la situaciones de las comisarías de policía, algo liosa la API para usar, por lo que se hizo un pequeño script que lo pasaba a un fichero json.&lt;/li&gt;
&lt;li&gt;Para el deploy usamos &lt;a class="reference external" href="http://www.heroku.com"&gt;Heroku&lt;/a&gt; que nunca lo había usado, pese a leer sobre el a menudo. Muy grata satisfacción con la sencillez de hacer los deploys :-).&lt;/li&gt;
&lt;li&gt;Para realizar las llamadas usamos &lt;a class="reference external" href="http://www.twilio.com"&gt;Twilio&lt;/a&gt;, que simplemente realizaba un click to call de vieja usanza.&lt;/li&gt;
&lt;/ul&gt;
&lt;img alt="" class="align-center" src="img/emberjs.jpg" style="width: 50%;" /&gt;
&lt;p&gt;Al final el resultado: para ser un par de días, y no haber pasado mucho tiempo por la noche creo que ha sido bastante aceptable, como no el codigo esta en &lt;a class="reference external" href="http://kcy.me/joh2"&gt;github&lt;/a&gt; y &lt;a class="reference external" href="http://kcy.me/joog"&gt;se puede ver la aplicación online&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Me alegra haber asistido a esta hackaton. Alex me ha enseñado muchos tips que me van a servir mucho durante mis jornadas laborales. Además por fin he probado esas tecnologías que siempre lees, pero que siempre tienes la duda de usarlas o no.&lt;/p&gt;
&lt;p&gt;Nos vemos en la próxima hackathon, que espero que sea pronto. :-)&lt;/p&gt;
</content><category term="blog"></category><category term="openlayers"></category><category term="twilio"></category><category term="cloud-communications"></category><category term="programacion"></category><category term="emberjs"></category><category term="python"></category></entry><entry><title>sistemas de colas basado en redis en kamailio</title><link href="https://acalustra.com/sistemas-de-colas-basado-en-redis-en-kamailio.html" rel="alternate"></link><published>2013-04-10T00:30:00+02:00</published><updated>2013-04-10T00:30:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2013-04-10:/sistemas-de-colas-basado-en-redis-en-kamailio.html</id><summary type="html">&lt;p&gt;Desde la versión
&lt;a class="reference external" href="http://www.kamailio.org/wiki/features/new-in-3.2.x"&gt;3.2&lt;/a&gt;
de&lt;a class="reference external" href="http://www.kamailio.org/"&gt;Kamailio&lt;/a&gt; tiene soporte para
&lt;a class="reference external" href="http://redis.io/"&gt;Redis&lt;/a&gt;. Junto con el módulo
&lt;a class="reference external" href="http://kamailio.org/docs/modules/3.3.x/modules_k/memcached.html"&gt;memcache&lt;/a&gt;,
se aproxima al mundo web, algo que favorece a la telefonía en los
tiempos que vivimos. :)&lt;/p&gt;
&lt;p&gt;Antiguamente para llamar un programa externo y tener información
detallada(en tiempo real) en otro sistema te hacía …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Desde la versión
&lt;a class="reference external" href="http://www.kamailio.org/wiki/features/new-in-3.2.x"&gt;3.2&lt;/a&gt;
de&lt;a class="reference external" href="http://www.kamailio.org/"&gt;Kamailio&lt;/a&gt; tiene soporte para
&lt;a class="reference external" href="http://redis.io/"&gt;Redis&lt;/a&gt;. Junto con el módulo
&lt;a class="reference external" href="http://kamailio.org/docs/modules/3.3.x/modules_k/memcached.html"&gt;memcache&lt;/a&gt;,
se aproxima al mundo web, algo que favorece a la telefonía en los
tiempos que vivimos. :)&lt;/p&gt;
&lt;p&gt;Antiguamente para llamar un programa externo y tener información
detallada(en tiempo real) en otro sistema te hacía falta usar el modulo
de python, xhttp,lua..Todos son muy válidos, pero la velocidad/sencillez
que aporta redis no lo aportan los otros sistemas.&lt;/p&gt;
&lt;p&gt;Redis es una 'Database' que esta escrita en C que empezó en el 2009, y
que esta siendo usada en muchos entornos web. Por otra parte la
estructura de datos es orientada en key=&amp;gt;value. Por lo que los que
venimos del mundo voip la podemos asociar a la database de Asterisk.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="class" src="img/redis.jpg" /&gt;
&lt;/div&gt;
&lt;p&gt;Para un sistema de colas es simple. Existe un proceso(o varios) que
inserta los datos (Comando &lt;a class="reference external" href="http://redis.io/commands/rpush"&gt;RPUSH&lt;/a&gt;) y
un proceso (worker) que esta a la espera de que el master inserte datos
(&lt;a class="reference external" href="http://redis.io/commands/blpop"&gt;BLPOP&lt;/a&gt;) para poder ejecutar la
acción, ahora os dejo un ejemplo:&lt;/p&gt;
&lt;p&gt;Inserción de datos (Kamailio):&lt;/p&gt;
&lt;p&gt;Para la instalación del módulo de redis, &lt;a class="reference external" href="http://www.kamailio.org/wiki/install/3.3.x/git"&gt;simplemente tenemos que seguir
esta guía de la wiki de
kamailio&lt;/a&gt; cambiando
el &lt;em&gt;make FLAVOUR&lt;/em&gt; por este:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
make FLAVOUR=kamailio include_modules=&amp;quot;db_mysql ndb_redis&amp;quot; cfg
&lt;/pre&gt;
&lt;p&gt;Una vez instalado deberemos hacer los siguientes cambios en el
kamailio.cfg:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
   loadmodule &amp;quot;ndb_redis.so&amp;quot;
modparam(&amp;quot;ndb_redis&amp;quot;, &amp;quot;server&amp;quot;, &amp;quot;name=srvN;addr=127.0.0.1;port=6379;db=0&amp;quot;)
route{
  ...
  ...
  ...
  ...
  if(redis_cmd(&amp;quot;srvN&amp;quot;, &amp;quot;RPUSH calls $ci&amp;quot;, &amp;quot;r&amp;quot;)) {
    # success
    xlog(&amp;quot;===== $redis(r=&amp;amp;gt;type) * $redis(r=&amp;amp;gt;value)\n&amp;quot;);
  }
}
&lt;/pre&gt;
&lt;p&gt;Obtención de datos (python):&lt;/p&gt;
&lt;pre class="literal-block"&gt;
pip install hiredis
pip install redis

    import redis
    def queue():
        r= redis.StrictRedis(host='127.0.0.1', port=6379, db=1)
        while True:
            (queue, msg) = r.blpop('invites')
            print 'Entrada en la cola %s y con datos %s'%(queue,msg)

    if __name__ == '__main__':
        queue()
&lt;/pre&gt;
&lt;p&gt;Con este módulo se me ocurren varias aplicaciones que realizar:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Tener el numero de llamadas que se están cursando.&lt;/li&gt;
&lt;li&gt;Un sistema de colas para generar los cdrs.&lt;/li&gt;
&lt;li&gt;Notificación para sistemas de prepago, descontar saldo etc..&lt;/li&gt;
&lt;li&gt;Notificación de estados de llamadas en un dashboard.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Como veis la aplicación es bastante sencilla, y en sistemas que no sean
puramente de voz, viene muy bien para interaccionar con otros programas.&lt;/p&gt;
&lt;p&gt;Dentro de poco mostraré la integración de Opensips con Mongodb. Esta
database no es que me apasione, pero lo de poder escribir objetos json,
es muy rápido para ciertos casos.&lt;/p&gt;
</content><category term="blog"></category><category term="kamailio"></category><category term="redis"></category><category term="python"></category><category term="notifications"></category><category term="voip"></category><category term="telefonia"></category></entry><entry><title>Notificaciones de Github mediante XMPP.</title><link href="https://acalustra.com/notificaciones-de-github-mediante-xmpp.html" rel="alternate"></link><published>2013-03-15T12:25:00+01:00</published><updated>2013-03-15T12:25:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2013-03-15:/notificaciones-de-github-mediante-xmpp.html</id><summary type="html">&lt;p&gt;El concepto de desarrollador ha cambiado desde hace un par de años.
Antiguamente todo el mundo escribia sus programas, o se adaptaba algo de
software libre. Ahora se busca la integración de todos los servicios
mediante APIS.&lt;/p&gt;
&lt;p&gt;Por una razón o por otra me ha tocado estar en los dos …&lt;/p&gt;</summary><content type="html">&lt;p&gt;El concepto de desarrollador ha cambiado desde hace un par de años.
Antiguamente todo el mundo escribia sus programas, o se adaptaba algo de
software libre. Ahora se busca la integración de todos los servicios
mediante APIS.&lt;/p&gt;
&lt;p&gt;Por una razón o por otra me ha tocado estar en los dos lados de una API.
En la de diseño del API de webphone, y en el consumo de las mismas.
Siempre que he tenido la oportunidad de usarlas he echado de menos la
información push. Siempre se puede arreglar con el uso de base de datos
y celery, pero bueno, no es lo mismo.&lt;/p&gt;
&lt;p&gt;XMPP es un protocolo que se puede usar para todo, tanto como un sistema
de mesajeria corporativo, como servicio de presencia o &lt;a class="reference external" href="http://bosqueviejo.net/2012/11/17/soa-con-xmpp/"&gt;para desplegar
servicios soa.&lt;/a&gt;&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="xmpp" src="img/xmpp.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Github tiene una lista de servicios push bastante interesante con cada
repositorio &lt;a class="reference external" href="https://github.com/github/github-services"&gt;(ademas los tiene liberados bajo software
libre)&lt;/a&gt;, uno de ellos es
la integración con
&lt;a class="reference external" href="https://github.com/github/github-services/blob/master/lib/services/jabber.rb"&gt;Jabber&lt;/a&gt;.
En un sistema de varios desarrolladores suele ser útil para notificar al
resto de usuarios de una nueva versión de código en el repositorio.En mi
actual empresa además parcheamos la entrada e insertamos los datos en
nuestra plataforma de tareas.&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="github" src="img/github.png" /&gt;
&lt;/div&gt;
&lt;p&gt;Para configurar las notificaciones en un repositorio de Github solamente
tenemos que hacer lo siguiente,
&lt;a class="reference external" href="https://help.github.com/articles/post-receive-hooks"&gt;opciones/servicios/jabber&lt;/a&gt;
y setear el usuario/conferencia que deseemos.&lt;/p&gt;
&lt;p&gt;Leer los datos con python no es una tarea muy complicada, y aqui os dejo
un pequeño trozo de código que espera la entrada de un commit de github&lt;/p&gt;
&lt;p&gt;La verdad que echo de menos una lista de triggers en muchos servicios en
los que cuando ocurra una accción que se notifique mediante XMPP. Hay
librerías para todos los lenguajes y se puede reducir mucho las
peticiones REST que simplemente se hacen si existe algún cambio.&lt;/p&gt;
</content><category term="blog"></category><category term="git"></category><category term="github"></category><category term="xmpp"></category><category term="triggers"></category><category term="push"></category></entry><entry><title>Para hacerlo mal, mejor no hacerlo</title><link href="https://acalustra.com/para-hacerlo-mal-mejor-no-hacerlo.html" rel="alternate"></link><published>2012-11-28T12:25:00+01:00</published><updated>2012-11-28T12:25:00+01:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2012-11-28:/para-hacerlo-mal-mejor-no-hacerlo.html</id><summary type="html">&lt;p&gt;Durante el tiempo que he trabajado siempre ha existido un problema, todo
el mundo quiere pagar por un taladro de primera calidad, pero nadie es
capaz de pagar por un software de primera calidad.&lt;/p&gt;
&lt;p&gt;Esto post va a ser referido a las herramientas que se usan en todo tipo
de …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Durante el tiempo que he trabajado siempre ha existido un problema, todo
el mundo quiere pagar por un taladro de primera calidad, pero nadie es
capaz de pagar por un software de primera calidad.&lt;/p&gt;
&lt;p&gt;Esto post va a ser referido a las herramientas que se usan en todo tipo
de empresas tecnológicas. Es muy difícil que una empresa pague una
cuantía mensual por un sistema de tickets para soporte, o que
simplemente pague por un sistema de gestión de tareas, o por el IDE del
empleado.&lt;/p&gt;
&lt;p&gt;Además empresas tecnológicas el sistema de gestión de tareas, el control
de versiones, o el sistema operativo a usar. Lo elige un director de
sistemas o el responsable de grupo lo que acarrea una tarea costosa para
el verdadero empleado (el que reporta)&lt;/p&gt;
&lt;p&gt;Según se asume la necesidad, la primera opción siempre es el software
libre, pero muchas veces el problema es que no existen más opciones.&lt;/p&gt;
&lt;p&gt;Siempre he intentado trabajar en lo que me gusta, y donde evidentemente
generó valor. Por eso para mi tener que pelearme con un sistema de
tareas inválido, o tener que usar un sistema operativo que no conozco
los atajos de teclado, para mi, es tirar dinero.&lt;/p&gt;
&lt;p&gt;Ahora dejo algunos ejemplos con mis experiencias en el entorno
empresarial:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cliente de correo:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Muchas de las pequeñas empresas tienen el correo gestionado con su
proveedor de hosting, o las más alocadas montan su propio servidor.&lt;/p&gt;
&lt;p&gt;En mi anterior etapa de &lt;a class="reference external" href="http://www.quobis.com"&gt;Quobis&lt;/a&gt;, teníamos una
suite colaborativa basada en &lt;a class="reference external" href="http://www.novell.com/products/groupwise/"&gt;Novell
Groupwise&lt;/a&gt;. La herramienta
era potente(mucho) pero no para una empresa de 10 empleados. Además
había la obligación de usar un cliente de correo corporativo, que en
linux era bastante lento (el 80% de la plantilla lo utilizaba), tenía
una buena web, pero no era tan buena como Gmail.&lt;/p&gt;
&lt;p&gt;El mantenimiento de licencias salía en torno a 600€ al mes (60€
empleado) y había un coste de consumo eléctrico y mantenimiento que
había que asumir. Además de prevenir las constantes caídas que teníamos.&lt;/p&gt;
&lt;p&gt;La decisión fue el cambio a &lt;a class="reference external" href="http://www.google.co.uk/intl/en_uk/enterprise/apps/business/"&gt;Google
Apps&lt;/a&gt;,
que además de solucionar los problemas del correo, se mataba el servidor
de xmpp, y todos podíamos usar Google Docs. Por su parte los clientes
nativos de Iphone/Android resultan más rápidos y eficaces.&lt;/p&gt;
&lt;p&gt;Además Gmail provee un api, que cualquier software por ahí deje que te
loguees contra el, por lo que además sirve como un &lt;strong&gt;fork&lt;/strong&gt; de ldap.&lt;/p&gt;
&lt;p&gt;En cuanto a todos los plugins de navegador que se pueden usar a nivel
empresarial, hace que la herramienta de google apps, no tenga rival en
entornos pequeños, y me atrevería a decir en empresas grandes, pero
cuando se elevan los usuarios herramientas como Zimbra quizás no es tan
eficaz, pero válida por costes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Gestión de tareas:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Esta es de las que más me cabrea, usar un sistema de tareas decente
(Jira, Youtrack, Assembla) es algo primordial. Es muy común que mucha
gente use Redmine, yo no tengo nada contra el, pero cualquiera de los
anteriormente mencionados es muy superior a la hora del uso y de la
rapidez de gestionarlo.&lt;/p&gt;
&lt;p&gt;Además los anteriormente comentados tienen las siguientes
características:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Plugins para el navegador, importante para mejorar la productividad.&lt;/li&gt;
&lt;li&gt;Se actualizan solos en la versión ondemand&lt;/li&gt;
&lt;li&gt;Están pensados para los programadores y para managers. Para unos
tienen APIS y para otros gráficas. :)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;De esta manera es la única (Bueno, eso fuera de España) de que el
responsable de turno no venga el lunes a preguntarte como esta el
proyecto, o que tengas que enviarle los viernes los avances del mismo.&lt;/p&gt;
&lt;p&gt;La creación de tareas con Jira es rápida si esta bien configurado, los
reportes que da son eficaces y de esta manera se mejora la productividad
de todo el mundo.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Servidor de control de versiones:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Aquí va al gusto, pero esta muy ligado a la gestión de tareas, el
sistema de control de versiones para la empresa es Bitbucket,por las
siguientes razones:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;Se integra con Jira de una manera perfecta&lt;/li&gt;
&lt;li&gt;La gestión de tickets es rápida y visual + La nueva interfaz ha
mejorado muchisimo en rapidez.&lt;/li&gt;
&lt;li&gt;A nivel de precios es competitivo, por 10$/mensuales tienes 10 dev
trabajando.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;En cuanto a la opción de Github, me gusta y la interfaz es mucho más
práctica que bitbucket, pero la diferencia es que licenciar por
repositorio es más complicado para la pequeña empresa que suele tener
varios repositorios privados.&lt;/p&gt;
&lt;p&gt;En cuanto si instalar tu propio servidor para mi no es viable, la
instalación de gitlabHQ puede llevarle a una persona 8 horas, y las
actualizaciones. Contando las horas del técnico se escapan los 10$
mensuales que vale la licencia para 10 usuarios de Bitbucket. :)&lt;/p&gt;
&lt;p&gt;Finalmente valorar el software libre debe ser nuestra primera opción,
pero las herramientas de trabajo tienen que ser las mejores, para mi hay
una diferencia enorme entre un zimbra-gmail, jira-redmine. A veces
perder mas de 10 minutos en preparar un informe porque la aplicación no
es flexible, o no se adapta, sale bastante mas caro que pagar unos 200$
por trabajador al año.&lt;/p&gt;
&lt;p&gt;Consecuentemente en la empresa tiene que brindar el sentido común, no es
normal que un trabajador tenga un portátil que se le apaga cuando se le
calienta, o que tenga que trabajar con Eclipse y los 2 gigabytes de
memoria RAM no sean suficientes para poder compilar. Por ahorrar 200$ se
esta tirando varios días de trabajo de un empleado.&lt;/p&gt;
&lt;p&gt;Mas me sorprende cuando en el entorno empresarial se ven muchos
teléfonos móviles de última generación/tablets, y algunos trabajadores
están trabajando en pantallas de 15”, con ordenadores Pentium 4, y con
ratones de bola. Cuando las herramientas son buenas el trabajo será
mejor, pero las buenas herramientas no suelen estar en manos de los
&lt;em&gt;curritos&lt;/em&gt;.&lt;/p&gt;
</content><category term="blog"></category><category term="productividad"></category><category term="software libre"></category><category term="jira"></category><category term="bitbucket"></category><category term="googleapps"></category></entry><entry><title>La aventura de marcharche al Google Campus</title><link href="https://acalustra.com/la-aventura-de-marcharche-al-google-campus.html" rel="alternate"></link><published>2012-10-01T00:30:00+02:00</published><updated>2012-10-01T00:30:00+02:00</updated><author><name>eloycoto</name></author><id>tag:acalustra.com,2012-10-01:/la-aventura-de-marcharche-al-google-campus.html</id><summary type="html">&lt;p&gt;Como muchos sabéis desde Septiembre estoy trabajando desde Londres. Una
ilusión que tenía desde pequeño. Vivir en una ciudad grande, que me
pudiera dar en cualquier momento una sorpresa.&lt;/p&gt;
&lt;p&gt;Todo este proyecto empezó en el 2010, cuando por una razón o por otra me
quería adentrar en otra cultura, otras …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Como muchos sabéis desde Septiembre estoy trabajando desde Londres. Una
ilusión que tenía desde pequeño. Vivir en una ciudad grande, que me
pudiera dar en cualquier momento una sorpresa.&lt;/p&gt;
&lt;p&gt;Todo este proyecto empezó en el 2010, cuando por una razón o por otra me
quería adentrar en otra cultura, otras empresas, etc.. Hubo un intento,
pero no cuajo. Por lo que desistí y decidí dejar un sueño de lado. Al
fin al cabo tenía una vida fácil, me podía permitir todo lo que quería y
era feliz. Además tenía la suerte de que en cualquier momento podía
plantarme e intentarlo.&lt;/p&gt;
&lt;p&gt;Hasta que un día me llamó David Bello, mi actual CEO,&amp;nbsp;diciéndome&amp;nbsp;para
trabajar en la Coruña, algo que a mi no me motivaba, dado que estaba en
una empresa de primera división, pequeña, solvente y con la capacidad de
hacer cosas innovadoras. Pero después de unas cuantas llamadas viene
David y me lanza, ¡Entiendo que no quieras venir para Coruña! ¿Y si
trabajas desde el país que te apetezca? ¡Manda carallo! se daba una
ecuación perfecta para intentarlo:&lt;/p&gt;
&lt;p&gt;Empresa gallega en proceso de internacionalización, lo que conlleva
abrir un nuevo país, ayudar a la misma y generar valor en España, que
buena falta hace.&lt;/p&gt;
&lt;p&gt;Una empresa pequeña, que conoces a todos tus compañeros y no tienes
problemas jerarquicos.&lt;/p&gt;
&lt;p&gt;La entrada de dinero de un grupo inversor, es la mejor noticia para una
startup. Con ese dinero se puede garantizar de que se puede hacer
producto, y tener a varios desarrolladores durante &amp;quot;unos meses&amp;quot; sin
sacar rentabilidad a la empresa, pero que en un futuro generará una
fuente de ingresos recursivos.&lt;/p&gt;
&lt;p&gt;La idea siempre fue Londres, una ciudad que me fascina desde que tengo
uso de razón. Poder estar dentro de la Tech city es un
lugar&amp;nbsp;increíble&amp;nbsp;para cualquier persona técnica.&lt;/p&gt;
&lt;p&gt;Poder estar en las oficinas del Google campus es una oportunidad que
debería poder tener cualquier persona, el ambiente es&amp;nbsp;increíble&amp;nbsp; las
conversaciones de una calidad envidiable y las oportunidades de
mentoring de personal de otras empresas son semanales.&lt;/p&gt;
&lt;p&gt;Trabajar en una oficina de coworking tiene mas ventajas. Las ganas de
ayudar a tu compañero de al lado cuando dice &amp;quot;Mother Fuck!&amp;quot; es algo que
no se espera, ¡se supone!. Además cuando en una empresa pequeña una
persona es muy buena, la calidad del resto mejora substancialmente.
Imaginaros que esa calidad no la&amp;nbsp;tengáis&amp;nbsp;que contratar, si no que los
puedas tener de compañero, que lo ves todos los días y los dos puedan
evolucionar mutuamente. Eso para una startup, que tiene a sus primeros
trabajadores es algo que a plantear para el&amp;nbsp;crecimiento&amp;nbsp;de la misma.&lt;/p&gt;
&lt;p&gt;Actualmente hablando de Webphone estamos en pleno proceso de
internacionalización, se ha trabajado duro durante los últimos meses
para sacar una nueva versión, que pasa de un MVP a un producto completo,
en el cual ahora mismo podemos hacer releases semanales, hemos mejorado
la arquitectura, mejorado algunas funcionalidades y añadidas otras
muchas. El resultado se verá en un plazo corto de tiempo :)&lt;/p&gt;
&lt;p&gt;Desde&amp;nbsp;aquí&amp;nbsp;saludaros y daros la bienvenida a mi nuevo rinconcete.&lt;/p&gt;
</content><category term="blog"></category><category term="londres"></category><category term="webphone"></category><category term="techhub"></category><category term="googleCampus"></category></entry></feed>